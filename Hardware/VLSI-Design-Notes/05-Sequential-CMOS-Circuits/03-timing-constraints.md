# Chapter 5.3: Timing Constraints

## ğŸ“‹ Chapter Overview

**Timing constraints** are fundamental to synchronous digital design. This chapter covers setup time, hold time, clock-to-Q delay, and how these parameters determine maximum operating frequency and reliable operation of sequential circuits.

---

## ğŸ¯ Learning Objectives

After completing this chapter, you will be able to:
- Define and calculate setup time, hold time, and clock-to-Q delay
- Derive maximum clock frequency constraints
- Identify and fix setup and hold violations
- Understand the impact of clock skew on timing

---

## 5.3.1 Timing Parameters Defined

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLIP-FLOP TIMING DEFINITIONS                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   CLK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                               â”‚                                     â”‚
â”‚                               â†“ Active edge                        â”‚
â”‚                                                                      â”‚
â”‚   D   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                            â”‚  â”‚  â”‚                                  â”‚
â”‚                            â””â”€â”€â”´â”€â”€â”˜                                  â”‚
â”‚           â†â”€â”€â”€ tsetup â”€â”€â”€â†’â†â”€â”€â”‚â”€â”€â†’â†â”€â”€ thold â”€â”€â”€â†’                    â”‚
â”‚                               â”‚                                     â”‚
â”‚                     SETUP     â”‚   HOLD                              â”‚
â”‚                    WINDOW     â”‚  WINDOW                             â”‚
â”‚                               â”‚                                     â”‚
â”‚   Q   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                               â”‚              â”‚                      â”‚
â”‚                               â”‚â†â”€â”€â”€ tcq â”€â”€â”€â”€â†’â”‚                     â”‚
â”‚                               â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                      â”‚
â”‚   SETUP TIME (tsetup):                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚   â€¢ Time D must be stable BEFORE the active clock edge             â”‚
â”‚   â€¢ Ensures data is captured correctly                             â”‚
â”‚   â€¢ Violation â†’ wrong value captured or metastability              â”‚
â”‚                                                                      â”‚
â”‚   HOLD TIME (thold):                                                â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚   â€¢ Time D must be stable AFTER the active clock edge              â”‚
â”‚   â€¢ Ensures data isn't corrupted during capture                    â”‚
â”‚   â€¢ Violation â†’ wrong value or metastability                       â”‚
â”‚                                                                      â”‚
â”‚   CLOCK-TO-Q DELAY (tcq):                                          â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚   â€¢ Time from clock edge to output Q changing                      â”‚
â”‚   â€¢ Also called propagation delay (tpcq)                           â”‚
â”‚   â€¢ Determines how fast the FF responds                            â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.3.2 Setup Time Constraint

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SETUP TIME ANALYSIS                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   Typical sequential path:                                          â”‚
â”‚                                                                      â”‚
â”‚        CLK          CLK                                             â”‚
â”‚         â”‚            â”‚                                              â”‚
â”‚     â”Œâ”€â”€â”€â”´â”€â”€â”€â”    â”Œâ”€â”€â”€â”´â”€â”€â”€â”                                          â”‚
â”‚     â”‚       â”‚    â”‚       â”‚                                          â”‚
â”‚   â”€â”€â”¤  FF1  â”œâ”€â”€â”€â”€â”¤ Logic â”œâ”€â”€â”€â”€â”¤  FF2  â”œâ”€â”€                           â”‚
â”‚     â”‚       â”‚    â”‚       â”‚    â”‚       â”‚                             â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚         â†“            â†“            â†“                                 â”‚
â”‚        Q1     Combinational      D2                                â”‚
â”‚               Delay (tlogic)                                        â”‚
â”‚                                                                      â”‚
â”‚   Timing path:                                                      â”‚
â”‚                                                                      â”‚
â”‚   Launch      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” Capture    â”‚
â”‚   Edge   â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Edge       â”‚
â”‚               â”‚                                       â”‚             â”‚
â”‚               â”‚â†tcqâ†’â”‚â†â”€â”€â”€â”€â”€tlogicâ”€â”€â”€â”€â”€â”€â†’â”‚â†â”€tsetupâ”€â”€â†’â”‚             â”‚
â”‚               â”‚     â”‚                   â”‚            â”‚             â”‚
â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Tcycle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
â”‚                                                                      â”‚
â”‚   For correct operation:                                            â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚        tcq + tlogic + tsetup  â‰¤  Tcycle                     â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚        Data must arrive at FF2 before setup window closes   â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚   Maximum frequency:                                                â”‚
â”‚                                                                      â”‚
â”‚                         1                                           â”‚
â”‚        fmax = â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚
â”‚               tcq + tlogic + tsetup                                â”‚
â”‚                                                                      â”‚
â”‚   Example:                                                          â”‚
â”‚   tcq = 0.1 ns, tlogic = 0.3 ns, tsetup = 0.05 ns                 â”‚
â”‚   Tcycle_min = 0.1 + 0.3 + 0.05 = 0.45 ns                         â”‚
â”‚   fmax = 1/0.45 ns = 2.22 GHz                                      â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.3.3 Hold Time Constraint

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HOLD TIME ANALYSIS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   Hold time ensures data stays stable AFTER the clock edge:        â”‚
â”‚                                                                      â”‚
â”‚   CLK  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”‚
â”‚                 â”‚                                                   â”‚
â”‚   D2   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”‚
â”‚                 â”‚     â”‚                                             â”‚
â”‚                 â”‚â†holdâ”‚â†â”€ D2 can change here                       â”‚
â”‚                 â”‚     â”‚                                             â”‚
â”‚                                                                      â”‚
â”‚   The new data from FF1 must NOT arrive at FF2 before              â”‚
â”‚   FF2's hold time requirement is satisfied:                        â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚        tcq + tlogic  â‰¥  thold                               â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚        New data must arrive AFTER hold window closes        â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚   Same edge timing analysis:                                        â”‚
â”‚                                                                      â”‚
â”‚   Launch/Capture                                                    â”‚
â”‚   Edge (same)   â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚                        â”‚                                            â”‚
â”‚               Old data â”‚  New data                                  â”‚
â”‚                  â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
â”‚                        â”‚â†holdâ†’â”‚                                    â”‚
â”‚                        â”‚      â”‚                                     â”‚
â”‚               â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€ D2 (at FF2 input)                â”‚
â”‚                        â”‚â†tcqâ†’ â”‚â†tlogicâ†’                            â”‚
â”‚                        â”‚      â”‚        â”‚                            â”‚
â”‚                               â”‚        â†“ New data arrives          â”‚
â”‚                                                                      â”‚
â”‚   For NO hold violation:                                            â”‚
â”‚   tcq + tlogic > thold                                             â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚  CRITICAL: Hold time is independent of clock frequency!     â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚  â€¢ Cannot fix hold violations by slowing the clock          â”‚   â”‚
â”‚   â”‚  â€¢ Must add delay in the path (buffers)                     â”‚   â”‚
â”‚   â”‚  â€¢ Or redesign the logic                                    â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.3.4 Timing Violations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SETUP AND HOLD VIOLATIONS                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   SETUP VIOLATION:                                                  â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚                                                                      â”‚
â”‚   CLK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚                      â”‚                                              â”‚
â”‚   D   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                              â”‚
â”‚                   â”‚  â”‚  Data changes too late!                     â”‚
â”‚                   â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚               â†tsetupâ†’â”‚                                             â”‚
â”‚                 Not   â”‚                                             â”‚
â”‚               satisfied                                             â”‚
â”‚                                                                      â”‚
â”‚   Result: FF captures wrong value or becomes metastable            â”‚
â”‚                                                                      â”‚
â”‚   Fix: Reduce clock frequency OR reduce logic delay                â”‚
â”‚        Tcycle > tcq + tlogic + tsetup                              â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   HOLD VIOLATION:                                                   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚                                                                      â”‚
â”‚   CLK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚                      â”‚                                              â”‚
â”‚   D   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”                                          â”‚
â”‚                      â”‚  â”‚  Data changes too early!                 â”‚
â”‚                      â”‚â†â†’â”‚                                          â”‚
â”‚                      thold                                          â”‚
â”‚                    Not satisfied                                    â”‚
â”‚                                                                      â”‚
â”‚   Result: New data overwrites old data before it's captured        â”‚
â”‚                                                                      â”‚
â”‚   Fix: Add delay buffers in the path (cannot change frequency!)    â”‚
â”‚        tcq + tlogic > thold                                        â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚ Violation  â”‚ Fix Method                                   â”‚     â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚   â”‚ Setup      â”‚ Lower frequency, reduce logic delay,        â”‚     â”‚
â”‚   â”‚            â”‚ use faster FF                                â”‚     â”‚
â”‚   â”‚ Hold       â”‚ Add delay buffers, restructure path,        â”‚     â”‚
â”‚   â”‚            â”‚ CANNOT fix with frequency                    â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.3.5 Clock Skew Effects

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLOCK SKEW                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   Clock skew = difference in clock arrival times at different FFs  â”‚
â”‚                                                                      â”‚
â”‚              CLK (source)                                           â”‚
â”‚                  â”‚                                                  â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                                            â”‚
â”‚            â”‚           â”‚                                            â”‚
â”‚          d1â”‚         d2â”‚  â† Different wire delays                  â”‚
â”‚            â”‚           â”‚                                            â”‚
â”‚            â–¼           â–¼                                            â”‚
â”‚         CLK1         CLK2                                           â”‚
â”‚            â”‚           â”‚                                            â”‚
â”‚        â”Œâ”€â”€â”€â”´â”€â”€â”€â”   â”Œâ”€â”€â”€â”´â”€â”€â”€â”                                        â”‚
â”‚        â”‚  FF1  â”œâ”€â”€â”€â”¤  FF2  â”‚                                        â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                                                                      â”‚
â”‚   Skew = tskew = d2 - d1                                           â”‚
â”‚   â€¢ Positive skew: CLK2 arrives later than CLK1                    â”‚
â”‚   â€¢ Negative skew: CLK2 arrives earlier than CLK1                  â”‚
â”‚                                                                      â”‚
â”‚   Impact on Setup Constraint:                                       â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚
â”‚                                                                      â”‚
â”‚   tcq + tlogic + tsetup â‰¤ Tcycle + tskew                           â”‚
â”‚                                                                      â”‚
â”‚   â€¢ Positive skew (CLK2 late): HELPS setup, HURTS hold            â”‚
â”‚   â€¢ Negative skew (CLK2 early): HURTS setup, HELPS hold           â”‚
â”‚                                                                      â”‚
â”‚   Impact on Hold Constraint:                                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚                                                                      â”‚
â”‚   tcq + tlogic â‰¥ thold + tskew                                     â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚  Complete Timing Equations with Skew:                       â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚  Setup:  tcq + tlogic + tsetup â‰¤ Tcycle + tskew            â”‚   â”‚
â”‚   â”‚  Hold:   tcq + tlogic â‰¥ thold + tskew                      â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚  For worst case (zero skew tolerance):                      â”‚   â”‚
â”‚   â”‚  Setup:  tcq + tlogic + tsetup + |tskew| â‰¤ Tcycle          â”‚   â”‚
â”‚   â”‚  Hold:   tcq + tlogic â‰¥ thold + |tskew|                    â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.3.6 Timing Margin (Slack)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TIMING SLACK                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   Slack = Available time - Required time                           â”‚
â”‚                                                                      â”‚
â”‚   SETUP SLACK:                                                      â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚                                                                      â”‚
â”‚   Setup_Slack = Tcycle - (tcq + tlogic + tsetup)                   â”‚
â”‚                                                                      â”‚
â”‚   â€¢ Positive slack: Timing met with margin âœ“                      â”‚
â”‚   â€¢ Zero slack: Exactly meets timing (risky)                       â”‚
â”‚   â€¢ Negative slack: Timing violated! âœ—                             â”‚
â”‚                                                                      â”‚
â”‚   Slack                                                             â”‚
â”‚     â”‚                                                               â”‚
â”‚     â”‚  â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—                                           â”‚
â”‚   + â”‚   Safe region                                                 â”‚
â”‚     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       â”‚
â”‚   0 â”‚                    â† Borderline                              â”‚
â”‚     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       â”‚
â”‚   - â”‚                      â—â”€â”€â”€â”€â”€â”€â”€â—                               â”‚
â”‚     â”‚                       Violation!                             â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                          â”‚
â”‚       Low freq                      High freq                      â”‚
â”‚                                                                      â”‚
â”‚   HOLD SLACK:                                                       â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
â”‚                                                                      â”‚
â”‚   Hold_Slack = (tcq + tlogic) - thold                              â”‚
â”‚                                                                      â”‚
â”‚   â€¢ Positive: Data arrives after hold window closes âœ“             â”‚
â”‚   â€¢ Negative: Data arrives too early, violation! âœ—                â”‚
â”‚                                                                      â”‚
â”‚   Example:                                                          â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚   tcq = 100 ps, tlogic = 200 ps, tsetup = 50 ps, thold = 30 ps    â”‚
â”‚   Tcycle = 500 ps (2 GHz)                                          â”‚
â”‚                                                                      â”‚
â”‚   Setup_Slack = 500 - (100 + 200 + 50) = 150 ps âœ“                 â”‚
â”‚   Hold_Slack = (100 + 200) - 30 = 270 ps âœ“                        â”‚
â”‚                                                                      â”‚
â”‚   Both positive â†’ Timing is met!                                   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.3.7 Timing Summary Equations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPLETE TIMING EQUATIONS                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   Variables:                                                        â”‚
â”‚   â€¢ tcq: Clock-to-Q delay                                          â”‚
â”‚   â€¢ tlogic: Combinational logic delay                              â”‚
â”‚   â€¢ tsetup: Setup time requirement                                 â”‚
â”‚   â€¢ thold: Hold time requirement                                   â”‚
â”‚   â€¢ Tcycle: Clock period                                           â”‚
â”‚   â€¢ tskew: Clock skew                                              â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚  SETUP CONSTRAINT (Maximum Frequency):                      â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚      tcq + tlogic + tsetup â‰¤ Tcycle - tskew                â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚                    1                                        â”‚   â”‚
â”‚   â”‚      fmax = â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚   â”‚
â”‚   â”‚             tcq + tlogic + tsetup + tskew                  â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚  HOLD CONSTRAINT (Path Delay):                              â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚      tcq + tlogic â‰¥ thold + tskew                          â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚      tlogic_min = thold + tskew - tcq                      â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚  SLACK CALCULATIONS:                                        â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚      Setup_Slack = Tcycle - tcq - tlogic - tsetup - tskew  â”‚   â”‚
â”‚   â”‚      Hold_Slack = tcq + tlogic - thold - tskew             â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚      Both must be â‰¥ 0 for correct operation                â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Summary Table

| Parameter | Symbol | Typical Value | Description |
|-----------|--------|---------------|-------------|
| Setup Time | $t_{setup}$ | 50-200 ps | D stable before clock |
| Hold Time | $t_{hold}$ | 20-100 ps | D stable after clock |
| Clock-to-Q | $t_{cq}$ | 100-300 ps | Clock to output delay |
| Clock Skew | $t_{skew}$ | 10-100 ps | Clock arrival difference |

| Constraint | Equation | Fixes |
|------------|----------|-------|
| Setup | $t_{cq} + t_{logic} + t_{setup} \leq T_{cycle}$ | Lower frequency, reduce delay |
| Hold | $t_{cq} + t_{logic} \geq t_{hold}$ | Add buffers |

---

## â“ Quick Revision Questions

1. **What is the difference between setup time and hold time?**

2. **Derive the maximum operating frequency for: tcq = 150ps, tlogic = 400ps, tsetup = 80ps.**

3. **Why can't hold violations be fixed by reducing clock frequency?**

4. **A design has positive clock skew of 50ps from FF1 to FF2. How does this affect setup and hold margins?**

5. **Calculate setup slack for: Tcycle = 1ns, tcq = 0.2ns, tlogic = 0.5ns, tsetup = 0.1ns.**

6. **What is metastability and when does it occur?**

---

## ğŸ”— Navigation

| Previous | Up | Next |
|----------|-------|------|
| â† [D Flip-Flop Design](02-d-flip-flop-design.md) | [Unit 5 Home](README.md) | [Static vs Dynamic Storage â†’](04-static-dynamic-storage.md) |

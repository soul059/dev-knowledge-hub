# Chapter 5.2: D Flip-Flop Design

## ğŸ“‹ Chapter Overview

**Flip-flops** are edge-triggered storage elements that sample input only at clock transitions, unlike level-sensitive latches. This chapter covers master-slave flip-flop construction, positive and negative edge triggering, and various CMOS implementations used in modern digital design.

---

## ğŸ¯ Learning Objectives

After completing this chapter, you will be able to:
- Explain edge-triggered vs level-sensitive behavior
- Design master-slave D flip-flops
- Compare positive and negative edge-triggered flip-flops
- Implement efficient CMOS flip-flop circuits

---

## 5.2.1 Edge vs Level Triggering

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LEVEL vs EDGE TRIGGERING                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   LEVEL-SENSITIVE (Latch)          EDGE-TRIGGERED (Flip-Flop)      â”‚
â”‚                                                                      â”‚
â”‚   CLK â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”           CLK â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚           â”‚    â”‚       â”‚                   â”‚    â”‚       â”‚           â”‚
â”‚           â””â”€â”€â”€â”€â”˜       â””â”€â”€                 â””â”€â”€â”€â”€â”˜       â””â”€â”€         â”‚
â”‚                                                                      â”‚
â”‚   D   â”€â”€â”  â”Œâ”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€         D   â”€â”€â”  â”Œâ”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚         â”‚  â”‚  â”‚ â”‚                        â”‚  â”‚  â”‚ â”‚                  â”‚
â”‚         â””â”€â”€â”˜  â””â”€â”˜                        â””â”€â”€â”˜  â””â”€â”˜                  â”‚
â”‚                                                                      â”‚
â”‚   Q   â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€         Q   â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚             â”‚  â”‚    â”‚ â”‚                        â”‚ â”‚                  â”‚
â”‚             â””â”€â”€â”˜    â””â”€â”˜                        â””â”€â”˜                  â”‚
â”‚         â†‘                             â†‘                             â”‚
â”‚    Changes during                 Changes only                      â”‚
â”‚    entire CLK high                at CLK edge                       â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Level-Sensitive        â”‚ Edge-Triggered                     â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚ Transparent when       â”‚ Samples only at clock edge        â”‚   â”‚
â”‚   â”‚ CLK is at active level â”‚                                    â”‚   â”‚
â”‚   â”‚ Output can change      â”‚ Output changes once per           â”‚   â”‚
â”‚   â”‚ multiple times         â”‚ clock cycle                        â”‚   â”‚
â”‚   â”‚ Simpler circuit        â”‚ More complex (two latches)        â”‚   â”‚
â”‚   â”‚ Timing more critical   â”‚ Easier timing analysis            â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.2.2 Master-Slave Concept

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MASTER-SLAVE FLIP-FLOP                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   Two latches in series with complementary clock signals:          â”‚
â”‚                                                                      â”‚
â”‚                    CLKÌ„                        CLK                   â”‚
â”‚                     â”‚                          â”‚                    â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚             â”‚               â”‚          â”‚               â”‚            â”‚
â”‚      D â”€â”€â”€â”€â”€â”¤  MASTER       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    SLAVE      â”œâ”€â”€â”€â”€â”€â–º Q   â”‚
â”‚             â”‚  (Negative)   â”‚    Qm    â”‚  (Positive)   â”‚            â”‚
â”‚             â”‚               â”‚          â”‚               â”‚            â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                      â”‚
â”‚   â€¢ Master: Negative latch (transparent when CLK = 0)              â”‚
â”‚   â€¢ Slave: Positive latch (transparent when CLK = 1)               â”‚
â”‚                                                                      â”‚
â”‚   Operation (Positive Edge-Triggered):                             â”‚
â”‚                                                                      â”‚
â”‚   CLK = 0 (LOW):                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ â€¢ Master transparent: D â†’ Qm                               â”‚   â”‚
â”‚   â”‚ â€¢ Slave opaque: Q holds previous value                     â”‚   â”‚
â”‚   â”‚ â€¢ D captured into Master                                   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚   CLK = 1 (HIGH):                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ â€¢ Master opaque: Qm holds captured value                   â”‚   â”‚
â”‚   â”‚ â€¢ Slave transparent: Qm â†’ Q                                â”‚   â”‚
â”‚   â”‚ â€¢ Value transfers to output                                â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚   At rising edge (0 â†’ 1):                                          â”‚
â”‚   â€¢ Master closes (captures D at that moment)                      â”‚
â”‚   â€¢ Slave opens (transfers captured value to Q)                    â”‚
â”‚   â€¢ Q changes only at rising edge â†’ Edge-triggered!               â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.2.3 Timing Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MASTER-SLAVE TIMING                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚        â”‚    T1    â”‚    T2    â”‚    T3    â”‚    T4    â”‚               â”‚
â”‚                                                                      â”‚
â”‚   CLK  â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚            â”‚      â”‚          â”‚          â”‚          â”‚                â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€            â”‚
â”‚             â†‘      â†‘          â†‘          â†‘                         â”‚
â”‚            fall   rise       fall       rise                        â”‚
â”‚                                                                      â”‚
â”‚   D    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                    â”‚    â”‚                    â”‚                      â”‚
â”‚                    â””â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚            D=1         D=0        D=1            D=0               â”‚
â”‚                                                                      â”‚
â”‚   Qm   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         (internal)  â”‚
â”‚        follows D   â”‚    â”‚   follows D        â”‚                      â”‚
â”‚        when CLK=0  â””â”€â”€â”€â”€â”˜   when CLK=0       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
â”‚            â†‘                     â†‘                                  â”‚
â”‚        Master transparent    Master transparent                    â”‚
â”‚                                                                      â”‚
â”‚   Q    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚        Holds until       â”‚          â”‚   Transfers at               â”‚
â”‚        rising edge       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   rising edge                â”‚
â”‚                          â†‘          â†‘                               â”‚
â”‚                      Q captures  Q captures                        â”‚
â”‚                      Qm at edge  Qm at edge                        â”‚
â”‚                                                                      â”‚
â”‚   Key observations:                                                 â”‚
â”‚   â€¢ Q changes ONLY at rising edges of CLK                         â”‚
â”‚   â€¢ D must be stable around the rising edge (setup/hold)          â”‚
â”‚   â€¢ Qm follows D when CLK = 0, but Q doesn't see it              â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.2.4 CMOS Master-Slave D Flip-Flop

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TG-BASED MASTER-SLAVE DFF                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚      CLKÌ„         CLK           CLK         CLKÌ„                     â”‚
â”‚       â”‚           â”‚             â”‚           â”‚                       â”‚
â”‚   â”Œâ”€â”€â”€â—â”€â”€â”€â”       â”‚         â”Œâ”€â”€â”€â—â”€â”€â”€â”       â”‚                       â”‚
â”‚   â”‚   â”‚   â”‚       â”‚         â”‚   â”‚   â”‚       â”‚                       â”‚
â”‚ Dâ”€â”¤  TG1  â”œâ”€â”¬â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  TG3  â”œâ”€â”¬â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Q       â”‚
â”‚   â”‚   â”‚   â”‚ â”‚     â”‚         â”‚   â”‚   â”‚ â”‚     â”‚                       â”‚
â”‚   â””â”€â”€â”€â—â”€â”€â”€â”˜ â”‚     â”‚         â””â”€â”€â”€â—â”€â”€â”€â”˜ â”‚     â”‚                       â”‚
â”‚       â”‚     â”‚     â”‚             â”‚     â”‚     â”‚                       â”‚
â”‚      CLK    â”‚     â”‚            CLKÌ„    â”‚     â”‚                       â”‚
â”‚             â”‚     â”‚                   â”‚     â”‚                       â”‚
â”‚         â”Œâ”€â”€â”€â”´â”€â”€â”  â”‚               â”Œâ”€â”€â”€â”´â”€â”€â”  â”‚                       â”‚
â”‚         â”‚ INV  â”‚  â”‚               â”‚ INV  â”‚  â”‚                       â”‚
â”‚         â””â”€â”€â”€â”¬â”€â”€â”˜  â”‚               â””â”€â”€â”€â”¬â”€â”€â”˜  â”‚                       â”‚
â”‚         â”Œâ”€â”€â”€â”´â”€â”€â”  â”‚               â”Œâ”€â”€â”€â”´â”€â”€â”  â”‚                       â”‚
â”‚         â”‚ INV  â”‚  â”‚               â”‚ INV  â”‚  â”‚                       â”‚
â”‚         â””â”€â”€â”€â”¬â”€â”€â”˜  â”‚               â””â”€â”€â”€â”¬â”€â”€â”˜  â”‚                       â”‚
â”‚             â”‚     â”‚                   â”‚     â”‚                       â”‚
â”‚      CLK    â”‚     â”‚            CLKÌ„    â”‚     â”‚                       â”‚
â”‚       â”‚     â”‚     â”‚             â”‚     â”‚     â”‚                       â”‚
â”‚   â”Œâ”€â”€â”€â—â”€â”€â”€â” â”‚     â”‚         â”Œâ”€â”€â”€â—â”€â”€â”€â” â”‚     â”‚                       â”‚
â”‚   â”‚   â”‚   â”‚ â”‚     â”‚         â”‚   â”‚   â”‚ â”‚     â”‚                       â”‚
â”‚   â”‚  TG2  â”œâ”€â”˜     â”‚         â”‚  TG4  â”œâ”€â”˜     â”‚                       â”‚
â”‚   â”‚   â”‚   â”‚       â”‚         â”‚   â”‚   â”‚       â”‚                       â”‚
â”‚   â””â”€â”€â”€â—â”€â”€â”€â”˜       â”‚         â””â”€â”€â”€â—â”€â”€â”€â”˜       â”‚                       â”‚
â”‚       â”‚           â”‚             â”‚           â”‚                       â”‚
â”‚      CLKÌ„                       CLK                                  â”‚
â”‚                                                                      â”‚
â”‚   â†â”€â”€â”€â”€â”€â”€â”€ MASTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â†â”€â”€â”€â”€â”€â”€â”€ SLAVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’             â”‚
â”‚   (Neg latch: CLKÌ„ controls) (Pos latch: CLK controls)             â”‚
â”‚                                                                      â”‚
â”‚   Transistor count:                                                 â”‚
â”‚   â€¢ 4 TGs Ã— 2 = 8 transistors                                      â”‚
â”‚   â€¢ 4 inverters Ã— 2 = 8 transistors                                â”‚
â”‚   â€¢ Total: 16 transistors (but often 20-24 with buffers)          â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.2.5 Positive vs Negative Edge-Triggered

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EDGE POLARITY                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   POSITIVE EDGE-TRIGGERED              NEGATIVE EDGE-TRIGGERED     â”‚
â”‚   (Rising edge samples)                (Falling edge samples)       â”‚
â”‚                                                                      â”‚
â”‚   CLK â”€â”€â”    â”Œâ”€â”€â”€â”€                     CLK â”€â”€â”    â”Œâ”€â”€â”€â”€             â”‚
â”‚         â”‚    â”‚                               â”‚    â”‚                 â”‚
â”‚         â””â”€â”€â”€â”€â”˜                               â””â”€â”€â”€â”€â”˜                 â”‚
â”‚              â†‘                          â†“                           â”‚
â”‚          Samples here              Samples here                     â”‚
â”‚                                                                      â”‚
â”‚   Configuration:                       Configuration:               â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  NEG    â”‚   â”‚  POS    â”‚           â”‚  POS    â”‚   â”‚  NEG    â”‚    â”‚
â”‚   â”‚ LATCH   â”œâ”€â”€â”€â”¤ LATCH   â”œâ”€â”€Q        â”‚ LATCH   â”œâ”€â”€â”€â”¤ LATCH   â”œâ”€â”€Q â”‚
â”‚   â”‚ (Master)â”‚   â”‚ (Slave) â”‚           â”‚ (Master)â”‚   â”‚ (Slave) â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â”‚
â”‚        â”‚             â”‚                     â”‚             â”‚          â”‚
â”‚       CLKÌ„          CLK                   CLK           CLKÌ„        â”‚
â”‚                                                                      â”‚
â”‚   Symbol:                              Symbol:                      â”‚
â”‚                                                                      â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚   D â”€â”¤        â”‚                        D â”€â”¤        â”‚                â”‚
â”‚      â”‚   DFF  â”œâ”€ Q                        â”‚   DFF  â”œâ”€ Q             â”‚
â”‚      â”‚        â”‚                           â”‚    â—‹   â”‚                â”‚
â”‚  â”€â”€â”€â–ºâ”‚        â”‚                       â”€â”€â”€â–ºâ”‚        â”‚                â”‚
â”‚  CLK â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       CLK â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                            â†‘                        â”‚
â”‚      Triangle = edge                  Bubble = inversion           â”‚
â”‚      (rising edge)                    (falling edge)               â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.2.6 Compact CMOS Flip-Flop (TSPC)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TRUE SINGLE-PHASE CLOCK (TSPC) DFF                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   TSPC uses dynamic storage and requires only one clock phase:     â”‚
â”‚                                                                      â”‚
â”‚        VDD                    VDD                     VDD           â”‚
â”‚         â”‚                      â”‚                       â”‚            â”‚
â”‚     â”Œâ”€â”€â”€â”´â”€â”€â”€â”              â”Œâ”€â”€â”€â”´â”€â”€â”€â”               â”Œâ”€â”€â”€â”´â”€â”€â”€â”        â”‚
â”‚  D â”€â”¤   P1  â”‚          â”Œâ”€â”€â”€â”¤   P3  â”‚           â”Œâ”€â”€â”€â”¤   P5  â”‚        â”‚
â”‚     â””â”€â”€â”€â”¬â”€â”€â”€â”˜          â”‚   â””â”€â”€â”€â”¬â”€â”€â”€â”˜           â”‚   â””â”€â”€â”€â”¬â”€â”€â”€â”˜        â”‚
â”‚         â”‚              â”‚       â”‚               â”‚       â”‚            â”‚
â”‚     â”Œâ”€â”€â”€â”´â”€â”€â”€â”          â”‚   â”Œâ”€â”€â”€â”´â”€â”€â”€â”           â”‚   â”Œâ”€â”€â”€â”´â”€â”€â”€â”        â”‚
â”‚ CLKâ”€â”¤   P2  â”‚          â”‚   â”‚   X   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚   Y   â”œâ”€â”€â–º Q  â”‚
â”‚     â””â”€â”€â”€â”¬â”€â”€â”€â”˜          â”‚   â””â”€â”€â”€â”¬â”€â”€â”€â”˜           â”‚   â””â”€â”€â”€â”¬â”€â”€â”€â”˜        â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚               â”‚       â”‚            â”‚
â”‚         â”‚                  â”Œâ”€â”€â”€â”´â”€â”€â”€â”           â”‚   â”Œâ”€â”€â”€â”´â”€â”€â”€â”        â”‚
â”‚     â”Œâ”€â”€â”€â”´â”€â”€â”€â”          CLKâ”€â”¤   N3  â”‚       CLKâ”€â”¼â”€â”€â”€â”¤   N5  â”‚        â”‚
â”‚  D â”€â”¤   N1  â”‚              â””â”€â”€â”€â”¬â”€â”€â”€â”˜           â”‚   â””â”€â”€â”€â”¬â”€â”€â”€â”˜        â”‚
â”‚     â””â”€â”€â”€â”¬â”€â”€â”€â”˜              â”Œâ”€â”€â”€â”´â”€â”€â”€â”           â”‚   â”Œâ”€â”€â”€â”´â”€â”€â”€â”        â”‚
â”‚     â”Œâ”€â”€â”€â”´â”€â”€â”€â”              â”‚   N4  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   N6  â”‚        â”‚
â”‚ CLKâ”€â”¤   N2  â”‚              â””â”€â”€â”€â”¬â”€â”€â”€â”˜               â””â”€â”€â”€â”¬â”€â”€â”€â”˜        â”‚
â”‚     â””â”€â”€â”€â”¬â”€â”€â”€â”˜                  â”‚                       â”‚            â”‚
â”‚         â”‚                     GND                     GND           â”‚
â”‚        GND                                                          â”‚
â”‚                                                                      â”‚
â”‚   â†â”€ Stage 1 â”€â”€â†’â†â”€â”€â”€â”€ Stage 2 â”€â”€â”€â”€â”€â†’â†â”€â”€â”€â”€ Stage 3 â”€â”€â”€â”€â†’            â”‚
â”‚    (D-clocked    (Dynamic          (Dynamic                        â”‚
â”‚     inverter)     inverter)         inverter)                      â”‚
â”‚                                                                      â”‚
â”‚   Advantages:                                                       â”‚
â”‚   â€¢ Single clock phase (no CLKÌ„ needed)                             â”‚
â”‚   â€¢ Fewer transistors (~9-11)                                      â”‚
â”‚   â€¢ High speed                                                      â”‚
â”‚                                                                      â”‚
â”‚   Disadvantages:                                                    â”‚
â”‚   â€¢ Dynamic (charge can leak)                                      â”‚
â”‚   â€¢ Sensitive to clock duty cycle                                  â”‚
â”‚   â€¢ More complex timing analysis                                   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.2.7 Flip-Flop Performance Metrics

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLIP-FLOP TIMING PARAMETERS                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   CLK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚                       â”‚                                             â”‚
â”‚                       â”‚â†“ Rising edge                               â”‚
â”‚                       â”‚                                             â”‚
â”‚   D   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚           â†tsetupâ†’â”‚â†â”€â”€â”‚â”€â”€â†’â”‚â†tholdâ†’                                 â”‚
â”‚                   â””â”€â”€â”€â”‚â”€â”€â”€â”˜                                         â”‚
â”‚                       â”‚                                             â”‚
â”‚                       â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tcq â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’                  â”‚
â”‚   Q   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                       â”‚                   â”‚                         â”‚
â”‚                       â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚                                                                      â”‚
â”‚   Key Parameters:                                                   â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ Parameter     â”‚ Description                               â”‚    â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚   â”‚ tsetup        â”‚ Time D must be stable BEFORE clock edge  â”‚    â”‚
â”‚   â”‚ thold         â”‚ Time D must be stable AFTER clock edge   â”‚    â”‚
â”‚   â”‚ tcq (tCLKâ†’Q)  â”‚ Delay from clock edge to Q change        â”‚    â”‚
â”‚   â”‚ tpcq          â”‚ Propagation delay (similar to tcq)       â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚  If D changes during setup/hold window â†’ METASTABILITY      â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚  Metastability: Q stuck in undefined state for long time   â”‚   â”‚
â”‚   â”‚  Can cause system failures                                  â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚   Typical values (modern CMOS):                                    â”‚
â”‚   â€¢ tsetup: 50-200 ps                                              â”‚
â”‚   â€¢ thold: 20-100 ps                                               â”‚
â”‚   â€¢ tcq: 100-300 ps                                                â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Summary Table

| FF Type | Transistors | Clock Phases | Edge | Characteristics |
|---------|-------------|--------------|------|-----------------|
| TG Master-Slave | 16-20 | 2 (CLK, CLKÌ„) | Rising | Standard, robust |
| TSPC | 9-11 | 1 (CLK only) | Rising | Fast, dynamic |
| Sense-Amp FF | 20-24 | 1-2 | Rising | Very fast, power hungry |
| Pulsed Latch | 10-14 | 1 + pulse | Pulse | Small tcq, complex |

---

## â“ Quick Revision Questions

1. **How does a master-slave flip-flop achieve edge-triggered behavior using two latches?**

2. **For a positive edge-triggered FF, what type of latch (positive/negative) is the master?**

3. **What is the role of the setup time? What happens if it's violated?**

4. **Draw a timing diagram showing D, CLK, Qm (master output), and Q for a rising-edge DFF.**

5. **What is metastability and when does it occur?**

6. **Compare the transistor count of TG-based master-slave DFF vs TSPC DFF.**

---

## ğŸ”— Navigation

| Previous | Up | Next |
|----------|-------|------|
| â† [SR and D Latches](01-sr-d-latches.md) | [Unit 5 Home](README.md) | [Timing Constraints â†’](03-timing-constraints.md) |

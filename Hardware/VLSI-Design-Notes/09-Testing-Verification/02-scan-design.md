# Chapter 9.2: Scan Design

## ğŸ“‹ Chapter Overview

**Scan design** is the most widely used DFT technique. It replaces flip-flops with scan flip-flops that can be connected in a shift register chain, providing full controllability and observability of internal state.

---

## ğŸ¯ Learning Objectives

After completing this chapter, you will be able to:
- Understand scan chain architecture and operation
- Design mux-D scan flip-flops
- Apply scan insertion methodology
- Understand compression techniques for large designs

---

## 9.2.1 Scan Chain Concept

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SCAN CHAIN ARCHITECTURE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   NORMAL MODE (SE=0): Flip-flops capture functional data           â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                   Combinational Logic                        â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚   â”‚     â”‚         â”‚       â”‚         â”‚       â”‚         â”‚        â”‚   â”‚
â”‚   â”‚ â”€â”€â”€â–ºâ”‚  Logic  â”œâ”€â”€â”€â”€â”€â”€â–ºâ”‚  Logic  â”œâ”€â”€â”€â”€â”€â”€â–ºâ”‚  Logic  â”‚        â”‚   â”‚
â”‚   â”‚     â”‚         â”‚       â”‚         â”‚       â”‚         â”‚        â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚   â”‚          â”‚  D              â”‚  D              â”‚  D           â”‚   â”‚
â”‚   â”‚          â–¼                 â–¼                 â–¼              â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚   â”‚     â”‚  SFF1   â”‚       â”‚  SFF2   â”‚       â”‚  SFF3   â”‚        â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚   â”‚          â”‚                 â”‚                 â”‚              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚              â”‚                 â”‚                 â”‚                  â”‚
â”‚              â–¼                 â–¼                 â–¼                  â”‚
â”‚          Functional outputs                                         â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   SCAN MODE (SE=1): Flip-flops form shift register                 â”‚
â”‚                                                                      â”‚
â”‚   Scan In (SI)                                                      â”‚
â”‚       â”‚                                                             â”‚
â”‚       â–¼                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” Q     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” Q     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” Q                â”‚
â”‚   â”‚  SFF1   â”œâ”€â”€â”€â”€â”€â”€â–ºâ”‚  SFF2   â”œâ”€â”€â”€â”€â”€â”€â–ºâ”‚  SFF3   â”œâ”€â”€â”€â”€â”€â”€â–º Scan Out  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        (SO)      â”‚
â”‚       â–²                 â–²                 â–²                        â”‚
â”‚       â”‚                 â”‚                 â”‚                        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€ Scan Clock           â”‚
â”‚                                                                      â”‚
â”‚   Operation:                                                        â”‚
â”‚   1. Shift in test pattern (SE=1, clock N times for N FFs)        â”‚
â”‚   2. Apply pattern (SE=0, one clock pulse - capture)              â”‚
â”‚   3. Shift out response (SE=1, clock N times)                     â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9.2.2 Scan Flip-Flop Design

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MUX-D SCAN FLIP-FLOP                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   Structure:                                                        â”‚
â”‚                                                                      â”‚
â”‚          D (functional data)                                        â”‚
â”‚             â”‚                                                       â”‚
â”‚             â–¼                                                       â”‚
â”‚         â”Œâ”€â”€â”€â”´â”€â”€â”€â”                                                   â”‚
â”‚         â”‚       â”‚â”€0                                                 â”‚
â”‚         â”‚  MUX  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚D    Qâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â–º Q                  â”‚
â”‚         â”‚       â”‚â”€1           â”‚      â”‚                              â”‚
â”‚         â””â”€â”€â”€â”¬â”€â”€â”€â”˜             â”‚      â”‚                              â”‚
â”‚             â–²                 â”‚      â”‚                              â”‚
â”‚             â”‚                 â””â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚    SI (scan in)                  â–²                                  â”‚
â”‚                                  â”‚                                  â”‚
â”‚    SE (scan enable) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                  â”‚
â”‚                                  â”‚                                  â”‚
â”‚    CLK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   Truth table:                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚   â”‚ SE  â”‚ D  â”‚ SI â”‚ Q(next)   â”‚ Mode      â”‚                        â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
â”‚   â”‚  0  â”‚ X  â”‚ X  â”‚ D         â”‚ Functionalâ”‚                        â”‚
â”‚   â”‚  1  â”‚ X  â”‚ X  â”‚ SI        â”‚ Scan      â”‚                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   Gate-level implementation (mux-scan):                             â”‚
â”‚                                                                      â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                     â”‚        D-Flip-Flop          â”‚                 â”‚
â”‚         SE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â–ºâ”‚â–·â”œâ”€â”€â”€â”€â”€â”             â”‚                 â”‚
â”‚             â”‚       â”‚               â”‚             â”‚                 â”‚
â”‚         D â”€â”€â”¼â”€â”€â–ºâ”‚ANDâ”œâ”€â”€â–ºâ”‚   â”œâ”€â”€â”¬â”€â”€â–ºâ”‚D    Qâ”œâ”€â”€â–ºQ â”‚                 â”‚
â”‚             â”‚    â”‚    â”‚  â”‚OR â”‚  â”‚   â”‚      â”‚    â”‚                 â”‚
â”‚             â”‚    â”‚    â”‚  â”‚   â”‚  â”‚   â”‚      â”‚    â”‚                 â”‚
â”‚        SI â”€â”€â”´â”€â”€â–ºâ”‚ANDâ”œâ”€â”€â–ºâ”‚   â”œâ”€â”€â”˜   â”‚      â”‚    â”‚                 â”‚
â”‚              â•‘   â”‚    â”‚            â””â”€â”€â”€â”€â”€â”€â”˜    â”‚                 â”‚
â”‚         SE â”€â”€â•¬â”€â”€â”€â”˜                     â–²        â”‚                 â”‚
â”‚              â•‘                         â”‚        â”‚                 â”‚
â”‚        CLK â”€â”€â•¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚                 â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   Timing parameters:                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ Parameter        â”‚ Impact vs Standard FF                    â”‚  â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   â”‚ D-to-Q delay     â”‚ +mux delay (~30-50ps)                    â”‚  â”‚
â”‚   â”‚ Setup time       â”‚ Slightly increased                       â”‚  â”‚
â”‚   â”‚ Area             â”‚ +15-25%                                  â”‚  â”‚
â”‚   â”‚ Power            â”‚ +10-20% (mux switching)                  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9.2.3 Scan Test Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SCAN TEST PROCEDURE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   Test vector application sequence:                                 â”‚
â”‚                                                                      â”‚
â”‚   Phase 1: SHIFT IN (Load test pattern)                            â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               â”‚
â”‚   SE = 1 (scan mode)                                               â”‚
â”‚                                                                      â”‚
â”‚   SI â”€â”€â–º[1]â”€â”€â–º[0]â”€â”€â–º[1]â”€â”€â–º[1]â”€â”€â–º[0]â”€â”€â–º SO (old data out)          â”‚
â”‚                                                                      â”‚
â”‚   After N clocks: Pattern "10110" loaded into 5 FFs               â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   Phase 2: CAPTURE (Apply pattern to logic)                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚   SE = 0 (functional mode)                                         â”‚
â”‚   Apply 1 clock pulse                                               â”‚
â”‚                                                                      â”‚
â”‚          Test Pattern          Logic Response                       â”‚
â”‚              â”‚                       â”‚                              â”‚
â”‚              â–¼                       â–¼                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚  [1]â”€â”€â–ºCombâ”€â”€â–º[?]  [0]â”€â”€â–ºCombâ”€â”€â–º[?]          â”‚                  â”‚
â”‚   â”‚              Logic                Logic       â”‚                  â”‚
â”‚   â”‚  [1]â”€â”€â–ºCombâ”€â”€â–º[?]  [1]â”€â”€â–ºCombâ”€â”€â–º[?]          â”‚                  â”‚
â”‚   â”‚              Logic                Logic       â”‚                  â”‚
â”‚   â”‚  [0]â”€â”€â–ºCombâ”€â”€â–º[?]                            â”‚                  â”‚
â”‚   â”‚              Logic                            â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                      â”‚
â”‚   FFs capture combinational logic response                         â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   Phase 3: SHIFT OUT (Observe response)                            â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚
â”‚   SE = 1 (scan mode)                                               â”‚
â”‚                                                                      â”‚
â”‚   SI â”€â”€â–º[Next Pattern]â”€â”€â–º SO â”€â”€â–º[Response to compare]              â”‚
â”‚                                                                      â”‚
â”‚   Shift out captured response while shifting in next pattern       â”‚
â”‚   (Overlap saves time!)                                            â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   Timing diagram:                                                   â”‚
â”‚                                                                      â”‚
â”‚   SE      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘                               â”‚
â”‚           â”‚shift â”‚Câ”‚shift â”‚Câ”‚shift â”‚                                â”‚
â”‚                                                                      â”‚
â”‚   CLK     â”Œâ”â”Œâ”â”Œâ”â”Œâ”â”Œâ”â”Œâ”â”Œâ”â”Œâ”â”Œâ”â”Œâ”â”Œâ”â”Œâ”â”Œâ”â”Œâ”                             â”‚
â”‚           â””â”˜â””â”˜â””â”˜â””â”˜â””â”˜â””â”˜â””â”˜â””â”˜â””â”˜â””â”˜â””â”˜â””â”˜â””â”˜â””â”˜                             â”‚
â”‚           â†  N  â†’â”‚1â”‚â†  N  â†’â”‚1â”‚â† N  â†’                               â”‚
â”‚                                                                      â”‚
â”‚   Test time = (Shift cycles + Capture cycle) Ã— Number of patterns  â”‚
â”‚   For N flip-flops, P patterns: Time = P Ã— (N + 1) clock cycles   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9.2.4 Scan Chain Stitching

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SCAN CHAIN ORGANIZATION                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   Single chain vs Multiple chains:                                  â”‚
â”‚                                                                      â”‚
â”‚   SINGLE CHAIN (1M flip-flops):                                    â”‚
â”‚   SI â”€â”€â–º[FF]â”€â”€â–º[FF]â”€â”€â–º...â”€â”€â–º[FF]â”€â”€â–º SO                             â”‚
â”‚         â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 1M FFs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                        â”‚
â”‚                                                                      â”‚
â”‚   Shift time per pattern: 1M clocks = 1ms @ 1GHz                   â”‚
â”‚   For 1000 patterns: 1000 seconds!  â† Too slow!                    â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   MULTIPLE CHAINS (100 chains Ã— 10K FFs each):                     â”‚
â”‚                                                                      â”‚
â”‚   SI[0] â”€â”€â–º[FF]â”€â”€â–º...â”€â”€â–º[FF]â”€â”€â–º SO[0]                              â”‚
â”‚   SI[1] â”€â”€â–º[FF]â”€â”€â–º...â”€â”€â–º[FF]â”€â”€â–º SO[1]                              â”‚
â”‚   SI[2] â”€â”€â–º[FF]â”€â”€â–º...â”€â”€â–º[FF]â”€â”€â–º SO[2]                              â”‚
â”‚     :          â† 10K FFs each â†’        :                            â”‚
â”‚   SI[99]â”€â”€â–º[FF]â”€â”€â–º...â”€â”€â–º[FF]â”€â”€â–º SO[99]                             â”‚
â”‚                                                                      â”‚
â”‚   Shift time per pattern: 10K clocks = 10Âµs @ 1GHz                 â”‚
â”‚   100Ã— faster!                                                      â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   Chain balancing:                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ Chain lengths should be balanced (within ~10%)              â”‚  â”‚
â”‚   â”‚                                                              â”‚  â”‚
â”‚   â”‚ Unbalanced:         Balanced:                               â”‚  â”‚
â”‚   â”‚ [1000 FFs]          [850 FFs]                               â”‚  â”‚
â”‚   â”‚ [500 FFs]    â†’      [850 FFs]                               â”‚  â”‚
â”‚   â”‚ [1200 FFs]          [850 FFs]                               â”‚  â”‚
â”‚   â”‚ [800 FFs]           [850 FFs]                               â”‚  â”‚
â”‚   â”‚                                                              â”‚  â”‚
â”‚   â”‚ Longest chain determines test time!                         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   Chain ordering strategies:                                        â”‚
â”‚   â€¢ Physical proximity (minimize wire length)                      â”‚
â”‚   â€¢ Random (for security, prevent pattern leakage)                â”‚
â”‚   â€¢ Clock domain grouping (simplify timing)                        â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9.2.5 Test Compression

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SCAN COMPRESSION                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   Problem: Test data volume too large for ATE memory               â”‚
â”‚   â€¢ 10M FFs Ã— 10K patterns = 100 Gbits of test data!              â”‚
â”‚   â€¢ ATE (Automatic Test Equipment) memory limited                  â”‚
â”‚                                                                      â”‚
â”‚   Solution: On-chip compression/decompression                      â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   DECOMPRESSOR (input side):                                        â”‚
â”‚                                                                      â”‚
â”‚      Few ATE channels              Many internal scan chains        â”‚
â”‚            â”‚                              â”‚                         â”‚
â”‚            â–¼                              â–¼                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚  8 SI channels  â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚        Decompressor          â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  (LFSR or XOR network)        â”‚       â”‚
â”‚                            â”‚                                â”‚       â”‚
â”‚                            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚
â”‚                            â”‚  â”‚ â†’ Chain 1 (SI)           â”‚ â”‚       â”‚
â”‚                            â”‚  â”‚ â†’ Chain 2 (SI)           â”‚ â”‚       â”‚
â”‚                            â”‚  â”‚ â†’ ...                    â”‚ â”‚       â”‚
â”‚                            â”‚  â”‚ â†’ Chain 200 (SI)         â”‚ â”‚       â”‚
â”‚                            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚
â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                      â”‚
â”‚   Compression ratio: 200/8 = 25Ã—                                   â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   COMPACTOR (output side):                                          â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â”‚         Compactor             â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚  8 SO channels â”‚       â”‚
â”‚   â”‚   (XOR tree / MISR)           â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚   â”‚                                â”‚                                â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                â”‚
â”‚   â”‚  â”‚ Chain 1 (SO) â†’           â”‚ â”‚                                â”‚
â”‚   â”‚  â”‚ Chain 2 (SO) â†’           â”‚ â”‚                                â”‚
â”‚   â”‚  â”‚ ...                      â”‚ â”‚                                â”‚
â”‚   â”‚  â”‚ Chain 200 (SO) â†’         â”‚ â”‚                                â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   Overall system:                                                   â”‚
â”‚                                                                      â”‚
â”‚       8 pins                  200 chains                   8 pins   â”‚
â”‚       â”Œâ”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”    â”‚
â”‚   ATEâ”€â”¤SI â”œâ”€â”€â”€â–ºâ”‚Decompressâ”œâ”€â”€â”€â–ºâ”‚ Chip  â”œâ”€â”€â”€â–ºâ”‚ Compact  â”œâ”€â”€â”€â–ºâ”‚SO â”œâ”€â”€â–ºATEâ”‚
â”‚       â””â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”˜    â”‚
â”‚                                                                      â”‚
â”‚   Benefits:                                                         â”‚
â”‚   â€¢ 25Ã— less test data to store                                    â”‚
â”‚   â€¢ 25Ã— faster data transfer                                       â”‚
â”‚   â€¢ Fewer tester channels needed                                   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9.2.6 Scan Design Challenges

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SCAN DESIGN ISSUES                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   1. SCAN CHAIN HOLD VIOLATIONS                                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                     â”‚
â”‚   SI â”€â”€â–º[SFF1]â”€â”€â”€â”€â”€â”€â–º[SFF2]                                        â”‚
â”‚                  â†‘                                                  â”‚
â”‚           Short path, fast!                                        â”‚
â”‚                                                                      â”‚
â”‚   If path too fast: Data shifts through multiple FFs per clock    â”‚
â”‚   Fix: Add delay buffers or increase cell spacing                 â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   2. CLOCK DOMAIN CROSSING                                         â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚   Different clock domains need separate scan chains:               â”‚
â”‚                                                                      â”‚
â”‚   CLK_A domain: SI_A â”€â”€â–º[FF]â”€â”€â–º[FF]â”€â”€â–º[FF]â”€â”€â–º SO_A                â”‚
â”‚                                                                      â”‚
â”‚   CLK_B domain: SI_B â”€â”€â–º[FF]â”€â”€â–º[FF]â”€â”€â–º[FF]â”€â”€â–º SO_B                â”‚
â”‚                                                                      â”‚
â”‚   Never mix clock domains in same chain!                           â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   3. POWER DURING SCAN                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚   Scan shift: All FFs toggle (worst-case switching)               â”‚
â”‚   Capture: May cause excessive activity                            â”‚
â”‚                                                                      â”‚
â”‚   Mitigation:                                                       â”‚
â”‚   â€¢ Shift at lower frequency                                       â”‚
â”‚   â€¢ Low-power scan patterns (minimize transitions)                 â”‚
â”‚   â€¢ Stagger chain activations                                      â”‚
â”‚                                                                      â”‚
â”‚                                                                      â”‚
â”‚   4. AT-SPEED TESTING                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
â”‚   Shift: Can be slower (functional correctness only)              â”‚
â”‚   Capture: Must be at-speed (test path delays)                     â”‚
â”‚                                                                      â”‚
â”‚   Launch-capture methods:                                           â”‚
â”‚   â€¢ Launch-off-shift (LOS): Last shift clock launches            â”‚
â”‚   â€¢ Launch-off-capture (LOC): Functional clock launches           â”‚
â”‚                                                                      â”‚
â”‚   LOS timing:                                                       â”‚
â”‚   SE   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘                                              â”‚
â”‚   CLK  â”Œâ”â”Œâ”â”Œâ”â”Œâ”â”Œâ”â”Œâ”â”Œâ”â”Œâ”                                            â”‚
â”‚                  â†‘  â†‘                                              â”‚
â”‚              Launch Capture                                        â”‚
â”‚                 (at-speed gap)                                     â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Summary Table

| Aspect | Description | Typical Value |
|--------|-------------|---------------|
| Scan FF overhead | Area increase | 15-25% |
| Test time | N FFs, P patterns | P Ã— (N+1) clocks |
| Chain count | For test time reduction | 64-1024 chains |
| Compression | Data reduction | 10-100Ã— |
| At-speed test | Delay fault detection | Launch-capture |

---

## â“ Quick Revision Questions

1. **Draw a mux-D scan flip-flop and explain its operation in scan vs normal mode.**

2. **What are the three phases of scan testing? Explain each briefly.**

3. **Why are multiple scan chains preferred over a single long chain?**

4. **What is test compression and why is it necessary?**

5. **What causes hold violations in scan chains and how are they fixed?**

6. **Explain the difference between launch-off-shift and launch-off-capture testing.**

---

## ğŸ”— Navigation

| Previous | Up | Next |
|----------|-------|------|
| â† [Design for Testability](01-design-for-testability.md) | [Unit 9 Home](README.md) | [Built-In Self-Test â†’](03-built-in-self-test.md) |

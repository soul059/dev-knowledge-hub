# Chapter 9.3: 80486 Processor

## ğŸ“š Chapter Overview

This chapter covers the Intel 80486 (i486) processor, which integrated cache, floating-point unit, and enhanced pipelining on a single chip, marking a major step toward modern CPU design.

---

## ğŸ¯ Learning Objectives

After completing this chapter, you will be able to:
- Understand integrated cache and FPU design
- Explain 486 pipelining architecture
- Describe cache coherency protocols
- Compare 80486 improvements over 80386
- Understand power management features

---

## 1. 80486 Architecture Overview

### 1.1 Basic Specifications

```
80486 PROCESSOR SPECIFICATIONS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                â”‚
â”‚   Year Introduced:     1989                                    â”‚
â”‚   Transistor Count:    1.2 Million                             â”‚
â”‚   Process Technology:  1.0 Âµm â†’ 0.6 Âµm                         â”‚
â”‚   Clock Speed:         25, 33, 50, 100 MHz                     â”‚
â”‚                                                                â”‚
â”‚   Data Bus Width:      32 bits                                 â”‚
â”‚   Address Bus Width:   32 bits                                 â”‚
â”‚   Physical Memory:     4 GB                                    â”‚
â”‚   Virtual Memory:      64 TB                                   â”‚
â”‚                                                                â”‚
â”‚   On-chip Cache:       8 KB unified (L1)                       â”‚
â”‚   On-chip FPU:         Yes (486DX only)                        â”‚
â”‚   Pipeline Stages:     5 stages                                â”‚
â”‚   Package:             168-pin PGA                             â”‚
â”‚                                                                â”‚
â”‚   Variants:                                                    â”‚
â”‚   - 486DX:   Full features, integrated FPU                     â”‚
â”‚   - 486SX:   No FPU (cost-reduced)                             â”‚
â”‚   - 486DX2:  Clock doubler (2Ã— internal)                       â”‚
â”‚   - 486DX4:  Clock tripler (3Ã— internal)                       â”‚
â”‚   - 486SL:   Low power for laptops                             â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MAJOR IMPROVEMENTS OVER 80386:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ Integrated 8 KB L1 cache (on-chip)
âœ“ Integrated FPU (floating-point unit)
âœ“ 5-stage instruction pipeline
âœ“ 1 clock per instruction for simple ops (vs 2+ on 386)
âœ“ Burst mode memory access
âœ“ Enhanced power management (SL series)
âœ“ RISC-like execution for common instructions
âœ“ ~2Ã— performance per MHz vs 386
```

### 1.2 Block Diagram

```
80486 INTERNAL ARCHITECTURE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              80486 CPU                                   â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      Bus Interface Unit                            â”‚ â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚  â”‚   â”‚Address Bufferâ”‚  â”‚Data Buffer   â”‚  â”‚ Burst Bus Controller    â”‚â”‚ â”‚
â”‚  â”‚   â”‚  (32-bit)    â”‚  â”‚  (32-bit)    â”‚  â”‚   (4 transfers/burst)   â”‚â”‚ â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â–²                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     8 KB UNIFIED CACHE                             â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚   â”‚  4-way Set Associative  â”‚  16-byte Line Size  â”‚ Write-thru  â”‚ â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â–²                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         PIPELINE                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚  â”‚
â”‚  â”‚  â”‚ FETCH  â”‚â†’â”‚DECODE 1â”‚â†’â”‚DECODE 2â”‚â†’â”‚EXECUTE â”‚â†’â”‚WRITE   â”‚           â”‚  â”‚
â”‚  â”‚  â”‚  (PF)  â”‚ â”‚  (D1)  â”‚ â”‚  (D2)  â”‚ â”‚  (EX)  â”‚ â”‚ BACK   â”‚           â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Control Unit       â”‚  â”‚Integer Unit   â”‚  â”‚ Segment Unit        â”‚   â”‚
â”‚  â”‚  - Microcode         â”‚  â”‚               â”‚  â”‚ - Segment Regs      â”‚   â”‚
â”‚  â”‚  - Control Logic     â”‚  â”‚ - 32-bit ALU  â”‚  â”‚ - Descriptor Cache  â”‚   â”‚
â”‚  â”‚                      â”‚  â”‚ - Barrel Shiftâ”‚  â”‚                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              FLOATING POINT UNIT (FPU) - Integrated               â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
â”‚  â”‚   â”‚ 8 Ã— 80-bit   â”‚  â”‚ Adder/Subtr  â”‚  â”‚ Multiplier/Divider      â”‚â”‚  â”‚
â”‚  â”‚   â”‚ FP Registers â”‚  â”‚              â”‚  â”‚                         â”‚â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      Paging Unit with TLB                          â”‚â”‚
â”‚  â”‚   TLB: 32 entries for code, 64 entries for data                    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Integrated Cache

### 2.1 Cache Organization

```
80486 ON-CHIP CACHE (L1)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SPECIFICATIONS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Size:           8 KB
Type:           Unified (instructions + data)
Associativity:  4-way set associative
Line Size:      16 bytes
Sets:           128 sets
Write Policy:   Write-through
Replacement:    Pseudo-LRU

ORGANIZATION:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         8 KB CACHE                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      128 Sets                                   â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚Set 0 â”‚ Way0 â”‚ Way1 â”‚ Way2 â”‚ Way3 â”‚                      â”‚  â”‚â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚â”‚
â”‚  â”‚  â”‚Set 1 â”‚ Way0 â”‚ Way1 â”‚ Way2 â”‚ Way3 â”‚                      â”‚  â”‚â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚â”‚
â”‚  â”‚  â”‚ ...  â”‚ ...  â”‚ ...  â”‚ ...  â”‚ ...  â”‚                      â”‚  â”‚â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚â”‚
â”‚  â”‚  â”‚Set127â”‚ Way0 â”‚ Way1 â”‚ Way2 â”‚ Way3 â”‚                      â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                     â”‚
â”‚  Each Way = 1 Valid bit + 21 Tag bits + 16 bytes Data              â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ADDRESS BREAKDOWN (32-bit):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Bit 31          11 10       4 3          0
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    TAG (21)     â”‚ SET (7)  â”‚ OFFSET (4) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TAG:    Identifies which memory block
SET:    Selects 1 of 128 sets
OFFSET: Selects byte within 16-byte line
```

### 2.2 Cache Control

```
CACHE CONTROL BITS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CR0 BITS FOR CACHE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Bit 30: CD (Cache Disable)
    0 = Cache enabled
    1 = Cache disabled (no new fills)

Bit 29: NW (Not Write-through)
    0 = Write-through enabled
    1 = Write-through disabled

PTE/PDE BITS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Bit 4: PCD (Page Cache Disable)
    0 = Page can be cached
    1 = Page is not cached (for MMIO)

Bit 3: PWT (Page Write-Through)
    0 = Write-back allowed (486 is always WT)
    1 = Force write-through

NEW CACHE INSTRUCTIONS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

INVD    ; Invalidate cache (flush without writeback)
        ; DANGER: Discards modified data!

WBINVD  ; Write-back and Invalidate
        ; Safely flushes cache to memory
        
INVLPG  ; Invalidate single TLB entry
        ; Used after page table change
```

### 2.3 Burst Mode

```
BURST MODE MEMORY ACCESS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

PURPOSE:
â”€â”€â”€â”€â”€â”€â”€
Fill 16-byte cache line in 4 transfers
First access: Normal timing
Next 3: Single clock each

BURST TIMING:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Normal (non-burst):
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚ 2   â”‚ 2   â”‚ 2   â”‚ 2   â”‚  = 8 clocks for 16 bytes
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

Burst mode:
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
â”‚ 2   â”‚ 1 â”‚ 1 â”‚ 1 â”‚  = 5 clocks for 16 bytes (2-1-1-1)
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜

BURST ORDER (for 16-byte line):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

If first address ends in:
00 â†’ 00, 04, 08, 0C  (sequential)
04 â†’ 04, 00, 0C, 08  (interleaved)
08 â†’ 08, 0C, 00, 04  (interleaved)
0C â†’ 0C, 08, 04, 00  (interleaved)

This order allows early restart if needed byte arrives early.
```

---

## 3. Instruction Pipeline

### 3.1 5-Stage Pipeline

```
80486 PIPELINE STAGES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        5-STAGE PIPELINE                            â”‚
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚
â”‚  â”‚  FETCH   â”‚ PF - Prefetch                                       â”‚
â”‚  â”‚  (PF)    â”‚ â€¢ Fetch instruction from cache                      â”‚
â”‚  â”‚          â”‚ â€¢ Up to 16 bytes per fetch                          â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                                     â”‚
â”‚       â”‚                                                            â”‚
â”‚       â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚
â”‚  â”‚ DECODE 1 â”‚ D1 - Instruction Decode                             â”‚
â”‚  â”‚  (D1)    â”‚ â€¢ Decode opcode and prefixes                        â”‚
â”‚  â”‚          â”‚ â€¢ Determine instruction length                       â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                                     â”‚
â”‚       â”‚                                                            â”‚
â”‚       â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚
â”‚  â”‚ DECODE 2 â”‚ D2 - Address Generation                             â”‚
â”‚  â”‚  (D2)    â”‚ â€¢ Calculate effective address                       â”‚
â”‚  â”‚          â”‚ â€¢ Read operands from registers                       â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                                     â”‚
â”‚       â”‚                                                            â”‚
â”‚       â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚
â”‚  â”‚ EXECUTE  â”‚ EX - Execute                                        â”‚
â”‚  â”‚  (EX)    â”‚ â€¢ ALU operation                                     â”‚
â”‚  â”‚          â”‚ â€¢ Memory access (cache)                              â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                                     â”‚
â”‚       â”‚                                                            â”‚
â”‚       â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚
â”‚  â”‚  WRITE   â”‚ WB - Write Back                                     â”‚
â”‚  â”‚  BACK    â”‚ â€¢ Write results to registers                        â”‚
â”‚  â”‚          â”‚ â€¢ Update flags                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                     â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PIPELINE IN ACTION:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Clock: â”‚  1  â”‚  2  â”‚  3  â”‚  4  â”‚  5  â”‚  6  â”‚  7  â”‚  8  â”‚  9  â”‚
â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”¿â”â”â”â”â”â”¿â”â”â”â”â”â”¿â”â”â”â”â”â”¿â”â”â”â”â”â”¿â”â”â”â”â”â”¿â”â”â”â”â”â”¿â”â”â”â”â”â”¿â”â”â”â”â”â”¤
Inst 1 â”‚ PF  â”‚ D1  â”‚ D2  â”‚ EX  â”‚ WB  â”‚     â”‚     â”‚     â”‚     â”‚
Inst 2 â”‚     â”‚ PF  â”‚ D1  â”‚ D2  â”‚ EX  â”‚ WB  â”‚     â”‚     â”‚     â”‚
Inst 3 â”‚     â”‚     â”‚ PF  â”‚ D1  â”‚ D2  â”‚ EX  â”‚ WB  â”‚     â”‚     â”‚
Inst 4 â”‚     â”‚     â”‚     â”‚ PF  â”‚ D1  â”‚ D2  â”‚ EX  â”‚ WB  â”‚     â”‚
Inst 5 â”‚     â”‚     â”‚     â”‚     â”‚ PF  â”‚ D1  â”‚ D2  â”‚ EX  â”‚ WB  â”‚

After pipeline fills, 1 instruction completes per clock!
(For simple instructions like MOV, ADD, etc.)
```

### 3.2 Single-Cycle Instructions

```
SINGLE-CYCLE EXECUTION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

The 486 executes many common instructions in 1 clock 
(after pipeline is full):

REGISTER OPERATIONS (1 clock):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
MOV reg, reg         ; Register to register
ADD reg, reg         ; Add registers
SUB reg, reg         ; Subtract registers
AND reg, reg         ; Logical AND
OR  reg, reg         ; Logical OR
XOR reg, reg         ; Logical XOR
INC reg              ; Increment
DEC reg              ; Decrement
PUSH reg             ; Push register (memory cached)
POP reg              ; Pop register (memory cached)

COMPARE WITH 386:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Instruction   â”‚ 80386  â”‚ 80486
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€
MOV reg, reg  â”‚   2    â”‚   1
ADD reg, reg  â”‚   2    â”‚   1
PUSH reg      â”‚   2    â”‚   1
NOP           â”‚   3    â”‚   1
LEA           â”‚   2    â”‚   1
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€

Result: ~2Ã— performance per MHz!
```

---

## 4. Integrated FPU

### 4.1 FPU Architecture

```
80486 FLOATING POINT UNIT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SPECIFICATIONS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Fully integrated (not separate chip like 387)
â€¢ 8 Ã— 80-bit registers (same as 387)
â€¢ IEEE 754 compliant
â€¢ ~3Ã— faster than 387 at same clock

FPU REGISTER STACK:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

         79       64 63                          0
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   ST(0)â”‚ Sign/Exp  â”‚        Mantissa (64 bits)    â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   ST(1)â”‚           â”‚                              â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   ST(2)â”‚           â”‚                              â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   ST(3)â”‚           â”‚                              â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   ST(4)â”‚           â”‚                              â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   ST(5)â”‚           â”‚                              â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   ST(6)â”‚           â”‚                              â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   ST(7)â”‚           â”‚                              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           15 bits          64 bits = 80 bits total

FPU CONTROL/STATUS REGISTERS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Control Word (CW): Precision, rounding, exceptions
â€¢ Status Word (SW): Condition codes, exceptions, TOP
â€¢ Tag Word (TW): Valid/Zero/Special/Empty for each register
```

### 4.2 FPU Performance

```
FPU INSTRUCTION TIMING (Clock Cycles)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Instruction     â”‚ 80387  â”‚ 80486
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€
FADD            â”‚ 23-34  â”‚  8-20
FSUB            â”‚ 23-34  â”‚  8-20
FMUL            â”‚ 29-57  â”‚ 16
FDIV            â”‚ 88-91  â”‚ 73
FSQRT           â”‚ 122-129â”‚ 83-87
FSIN            â”‚ 257-354â”‚ 193-279
FCOS            â”‚ 257-354â”‚ 193-279
FLD (load)      â”‚ 14     â”‚  3
FST (store)     â”‚ 44-50  â”‚  7
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€

Significant improvement due to:
â€¢ No bus overhead (integrated)
â€¢ Direct cache access
â€¢ Pipelined execution
```

---

## 5. New Features

### 5.1 Alignment Check

```
ALIGNMENT CHECK EXCEPTION (#AC)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

PURPOSE:
â”€â”€â”€â”€â”€â”€â”€
Detect unaligned memory accesses
(For debugging and performance optimization)

ENABLING:
â”€â”€â”€â”€â”€â”€â”€â”€
1. Set AC flag in EFLAGS (bit 18)
2. Set AM flag in CR0 (bit 18)
3. Must be at Ring 3 (user mode)

EFLAGS:
â”€â”€â”€â”€â”€â”€â”€
Bit 18 17 16 15 14 13 12 11 10 9  8  7  6  5  4  3  2  1  0
    â”Œâ”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”
    â”‚ACâ”‚VMâ”‚RFâ”‚  â”‚NTâ”‚IOâ”‚IOâ”‚OFâ”‚DFâ”‚IFâ”‚TFâ”‚SFâ”‚ZFâ”‚  â”‚AFâ”‚  â”‚PFâ”‚  â”‚CFâ”‚
    â””â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜

ALIGNMENT REQUIREMENTS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Word (16-bit):  Must be on 2-byte boundary
Dword (32-bit): Must be on 4-byte boundary
Qword (64-bit): Must be on 8-byte boundary

Note: 486 handles unaligned access in hardware,
but with performance penalty.
```

### 5.2 Power Management

```
486SL POWER MANAGEMENT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SYSTEM MANAGEMENT MODE (SMM) - introduced in 486SL:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â€¢ Separate operating mode for power management
â€¢ Transparent to OS and applications
â€¢ Accessed via SMI# (System Management Interrupt)
â€¢ Uses separate address space (SMRAM)

SMM ENTRY:
â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. SMI# pin asserted
2. CPU saves state to SMRAM
3. Enters SMM (new mode)
4. Executes SMM handler
5. RSM instruction returns to previous mode

USES:
â”€â”€â”€â”€
â€¢ Power management (suspend/resume)
â€¢ Hardware emulation
â€¢ Security functions
â€¢ Thermal management

POWER STATES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚    RUNNING      â”‚ â—„â”€â”€â”€ Normal operation                      â”‚
â”‚  â”‚    (Full Power) â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚           â”‚ STOP CLOCK                                           â”‚
â”‚           â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚   STOP GRANT    â”‚ â—„â”€â”€â”€ Clock stopped, state preserved        â”‚
â”‚  â”‚   (Low Power)   â”‚       Wake on interrupt                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚           â”‚ SMI#                                                 â”‚
â”‚           â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚   SUSPEND       â”‚ â—„â”€â”€â”€ Minimum power, RAM refresh only       â”‚
â”‚  â”‚   (Very Low)    â”‚       Full state in SMRAM                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Clock Multiplication

### 6.1 DX2 and DX4 Variants

```
CLOCK MULTIPLIED PROCESSORS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

486DX2 (1992):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Internal clock = 2 Ã— External clock
â€¢ 486DX2-50: 25 MHz bus, 50 MHz internal
â€¢ 486DX2-66: 33 MHz bus, 66 MHz internal

486DX4 (1994):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Internal clock = 3 Ã— External clock  
â€¢ 486DX4-75:  25 MHz bus, 75 MHz internal
â€¢ 486DX4-100: 33 MHz bus, 100 MHz internal

WHY CLOCK MULTIPLY?
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Problem: Memory and motherboard can't keep up with CPU speed

Solution: Run CPU core faster, but interface at slower bus speed

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      486DX2-66                          â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚   â”‚              CPU CORE @ 66 MHz                  â”‚  â”‚  â”‚
â”‚  â”‚   â”‚                                                 â”‚  â”‚  â”‚
â”‚  â”‚   â”‚  Cache, Pipeline, ALU, FPU all at 66 MHz       â”‚  â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                           â”‚                             â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚   â”‚          Clock Multiplier (Ã·2)                  â”‚  â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                           â”‚                             â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚   â”‚          Bus Interface @ 33 MHz                 â”‚  â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                 â”‚
â”‚                              â–¼                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚           External Bus @ 33 MHz                          â”‚â”‚
â”‚   â”‚           (Memory, I/O, etc.)                            â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cache hit: Full internal speed (66 MHz)
Cache miss: Wait for slower bus
```

---

## 7. New Instructions

```
80486 NEW INSTRUCTIONS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CACHE CONTROL:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
INVD          ; Invalidate cache (no writeback)
              ; Discards all cached data - use with caution!

WBINVD        ; Write-back and Invalidate cache
              ; Safely flushes cache to memory first

INVLPG m      ; Invalidate TLB entry for page
              ; Used after modifying page tables

BYTE SWAP:
â”€â”€â”€â”€â”€â”€â”€â”€â”€
BSWAP reg32   ; Byte swap (for endian conversion)
              ; Reverses byte order in 32-bit register
              
              ; Before: EAX = 12345678h
              ; BSWAP EAX
              ; After:  EAX = 78563412h

ATOMIC OPERATIONS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
XADD r/m, reg ; Exchange and Add (atomic)
              ; temp = dest
              ; dest = dest + src
              ; src = temp

CMPXCHG r/m, reg  ; Compare and Exchange (atomic)
                  ; if (acc == dest)
                  ;     ZF = 1, dest = src
                  ; else
                  ;     ZF = 0, acc = dest

EXAMPLE - Atomic Increment:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
; Atomically increment memory location
lock xadd [counter], eax    ; EAX = old value, [counter] = new value
```

---

## ğŸ“‹ Summary Table

| Feature | 80386 | 80486 |
|---------|-------|-------|
| Transistors | 275K | 1.2M |
| Clock Speed | 16-40 MHz | 25-100 MHz |
| On-chip Cache | None | 8 KB L1 |
| On-chip FPU | None | Yes (DX) |
| Pipeline | 2-stage | 5-stage |
| MOV reg,reg | 2 clocks | 1 clock |
| Burst Mode | No | Yes |
| SMM | No | Yes (SL) |
| Clock Multiply | No | DX2, DX4 |
| BSWAP, CMPXCHG | No | Yes |

---

## â“ Quick Revision Questions

1. **What is the main advantage of integrated cache?**
   <details>
   <summary>Show Answer</summary>
   On-chip L1 cache eliminates external bus access for cache hits, providing single-cycle access. This dramatically reduces memory latency and enables the pipeline to run at full speed for most instructions.
   </details>

2. **How does burst mode improve performance?**
   <details>
   <summary>Show Answer</summary>
   Burst mode fills a 16-byte cache line in 5 clocks (2-1-1-1 timing) instead of 8 clocks for 4 separate accesses. It exploits the fact that consecutive addresses from the same row in DRAM are faster to access.
   </details>

3. **What is the purpose of CMPXCHG instruction?**
   <details>
   <summary>Show Answer</summary>
   CMPXCHG (Compare and Exchange) enables lock-free atomic operations. If accumulator equals destination, it stores the source in destination; otherwise loads destination into accumulator. Used for implementing spinlocks, semaphores, and lock-free data structures.
   </details>

4. **Why was clock multiplication introduced?**
   <details>
   <summary>Show Answer</summary>
   Memory and motherboard components couldn't keep up with CPU speeds. Clock multiplication allows the CPU core to run faster (e.g., 66 MHz) while interfacing with slower external components at the bus speed (33 MHz). Cache hits benefit from full internal speed.
   </details>

5. **What is System Management Mode (SMM)?**
   <details>
   <summary>Show Answer</summary>
   SMM is a special operating mode for power management and system control. It's entered via SMI# interrupt, is transparent to OS, uses separate SMRAM, and is used for suspend/resume, thermal management, and hardware emulation.
   </details>

6. **How does the 486 pipeline differ from 386?**
   <details>
   <summary>Show Answer</summary>
   486 has 5 stages (PF, D1, D2, EX, WB) vs 2 in 386. This enables single-clock execution for common instructions and better instruction overlap. Combined with integrated cache and FPU, the 486 achieves ~2Ã— performance per MHz.
   </details>

---

## ğŸ§­ Navigation

| Previous | Up | Next |
|----------|-----|------|
| [9.2 80386 Processor](02-80386-processor.md) | [Unit 9 Index](README.md) | [9.4 Pentium Architecture](04-pentium-architecture.md) |

---

*[â† Previous: 80386 Processor](02-80386-processor.md) | [Next: Pentium Architecture â†’](04-pentium-architecture.md)*

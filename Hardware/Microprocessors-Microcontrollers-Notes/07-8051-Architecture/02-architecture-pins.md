# Chapter 7.2: 8051 Architecture and Pin Diagram

## ğŸ“š Chapter Overview

This chapter provides a detailed explanation of the 8051 internal architecture and 40-pin configuration. Understanding the pin functions and internal organization is crucial for interfacing the 8051 with external circuits and utilizing its full capabilities.

---

## ğŸ¯ Learning Objectives

After completing this chapter, you will be able to:
- Understand the complete internal architecture of 8051
- Explain the function of each pin in the 40-pin package
- Identify alternate functions of I/O ports
- Understand oscillator and timing requirements

---

## 1. 8051 Pin Diagram

### 1.1 40-Pin DIP Package

```
                        8051/8052 PIN CONFIGURATION
                        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
                     P1.0 â”€â”€â”¤ 1    40â”œâ”€â”€ VCC (+5V)
                     P1.1 â”€â”€â”¤ 2    39â”œâ”€â”€ P0.0 (AD0)
                     P1.2 â”€â”€â”¤ 3    38â”œâ”€â”€ P0.1 (AD1)
                     P1.3 â”€â”€â”¤ 4    37â”œâ”€â”€ P0.2 (AD2)
                     P1.4 â”€â”€â”¤ 5    36â”œâ”€â”€ P0.3 (AD3)
                     P1.5 â”€â”€â”¤ 6    35â”œâ”€â”€ P0.4 (AD4)
                     P1.6 â”€â”€â”¤ 7    34â”œâ”€â”€ P0.5 (AD5)
                     P1.7 â”€â”€â”¤ 8    33â”œâ”€â”€ P0.6 (AD6)
                     RST  â”€â”€â”¤ 9    32â”œâ”€â”€ P0.7 (AD7)
               (RXD) P3.0 â”€â”€â”¤10    31â”œâ”€â”€ EAÌ…/VPP
               (TXD) P3.1 â”€â”€â”¤11    30â”œâ”€â”€ ALE/PROGÌ…
              (INT0Ì…) P3.2 â”€â”€â”¤12    29â”œâ”€â”€ PÌ…SÌ…EÌ…NÌ…
              (INT1Ì…) P3.3 â”€â”€â”¤13    28â”œâ”€â”€ P2.7 (A15)
                (T0) P3.4 â”€â”€â”¤14    27â”œâ”€â”€ P2.6 (A14)
                (T1) P3.5 â”€â”€â”¤15    26â”œâ”€â”€ P2.5 (A13)
               (WRÌ…) P3.6 â”€â”€â”¤16    25â”œâ”€â”€ P2.4 (A12)
               (RDÌ…) P3.7 â”€â”€â”¤17    24â”œâ”€â”€ P2.3 (A11)
                   XTAL2 â”€â”€â”¤18    23â”œâ”€â”€ P2.2 (A10)
                   XTAL1 â”€â”€â”¤19    22â”œâ”€â”€ P2.1 (A9)
                     GND â”€â”€â”¤20    21â”œâ”€â”€ P2.0 (A8)
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Pin Groups

```
PIN GROUPS
â”â”â”â”â”â”â”â”â”â”

Power Supply:
  â€¢ Pin 40: VCC (+5V power supply)
  â€¢ Pin 20: GND (Ground, 0V)

Crystal Oscillator:
  â€¢ Pin 18: XTAL2 (Output from oscillator)
  â€¢ Pin 19: XTAL1 (Input to oscillator)

Control Signals:
  â€¢ Pin 9:  RST (Reset)
  â€¢ Pin 29: PSENÌ… (Program Store Enable)
  â€¢ Pin 30: ALE/PROGÌ… (Address Latch Enable)
  â€¢ Pin 31: EAÌ…/VPP (External Access)

I/O Ports (32 pins):
  â€¢ Pins 1-8:   Port 1 (P1.0 - P1.7)
  â€¢ Pins 10-17: Port 3 (P3.0 - P3.7)
  â€¢ Pins 21-28: Port 2 (P2.0 - P2.7)
  â€¢ Pins 32-39: Port 0 (P0.0 - P0.7)
```

---

## 2. Pin Descriptions

### 2.1 Power Supply Pins

```
POWER SUPPLY
â”â”â”â”â”â”â”â”â”â”â”â”

VCC (Pin 40):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Supply voltage: +5V Â± 10% (4.5V to 5.5V)                â”‚
â”‚ â€¢ Typical current: 20-25 mA (active mode)                  â”‚
â”‚ â€¢ Idle mode: ~6 mA                                         â”‚
â”‚ â€¢ Power down: ~50 ÂµA                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

GND (Pin 20):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Ground reference (0V)                                    â”‚
â”‚ â€¢ Must be connected to power supply ground                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

POWER SUPPLY CONNECTION:
           VCC
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    +5V        â”‚
    â”‚               â”‚
    â”‚    8051       â”‚
    â”‚               â”‚
    â”‚    GND        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
           GND
```

### 2.2 Oscillator Pins

```
CRYSTAL OSCILLATOR CONNECTION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

XTAL1 (Pin 19):
â€¢ Input to the on-chip oscillator amplifier
â€¢ Can be driven by external clock source

XTAL2 (Pin 18):
â€¢ Output from the on-chip oscillator amplifier
â€¢ Left open if external clock used

Using Crystal:                      Using External Clock:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                          External
     â”‚ XTAL   â”‚                          Clock â”€â”€â”¬â”€â–º XTAL1
     â”‚ 11.0592â”‚                                  â”‚
     â”‚  MHz   â”‚                              â”Œâ”€â”€â”€â”´â”€â”€â”€â”
     â””â”€â”€â”¬â”€â”€â”¬â”€â”€â”˜                              â”‚       â”‚
        â”‚  â”‚                                 â”‚ 8051  â”‚
    C1â”€â”€â”¤  â”œâ”€â”€C2                             â”‚       â”‚
    30pFâ”‚  â”‚30pF                             â””â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚  â”‚                                     â”‚
  XTAL1â”€â”˜  â””â”€XTAL2                         XTAL2 â”€NCâ”€ (Not Connected)
        â”‚  â”‚
        â–¼  â–¼
        GND GND

COMMON CRYSTAL VALUES:
â€¢ 11.0592 MHz - Standard, exact baud rates
â€¢ 12 MHz      - 1 Âµs machine cycle
â€¢ 6 MHz       - Low speed applications
â€¢ 24 MHz      - Fast variants
```

### 2.3 Reset Pin

```
RESET (RST) - Pin 9
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Function:
â€¢ Active HIGH reset input
â€¢ Resets the 8051 when held HIGH for 2+ machine cycles
â€¢ Minimum HIGH time: 24 oscillator periods

Reset Actions:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ On RESET, the following registers are initialized:         â”‚
â”‚                                                             â”‚
â”‚  Register â”‚ Value after RESET                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚
â”‚  PC       â”‚ 0000H (program starts here)                    â”‚
â”‚  ACC      â”‚ 00H                                            â”‚
â”‚  B        â”‚ 00H                                            â”‚
â”‚  PSW      â”‚ 00H                                            â”‚
â”‚  SP       â”‚ 07H                                            â”‚
â”‚  DPTR     â”‚ 0000H                                          â”‚
â”‚  P0-P3    â”‚ FFH (all 1s)                                   â”‚
â”‚  IP       â”‚ 0XX00000B                                      â”‚
â”‚  IE       â”‚ 0X000000B                                      â”‚
â”‚  TMOD     â”‚ 00H                                            â”‚
â”‚  TCON     â”‚ 00H                                            â”‚
â”‚  TH0,TL0  â”‚ 00H                                            â”‚
â”‚  TH1,TL1  â”‚ 00H                                            â”‚
â”‚  SCON     â”‚ 00H                                            â”‚
â”‚  SBUF     â”‚ XXH (indeterminate)                            â”‚
â”‚  PCON     â”‚ 0XXX0000B                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

POWER-ON RESET CIRCUIT:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

      VCC (+5V)
        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”
        â”‚      â”‚
        R    â”€â”€â”´â”€â”€ RST (Pin 9)
       10K     â”‚
        â”‚      C
        â”‚     10ÂµF
        â”‚      â”‚
       GND    GND

Calculation:
â€¢ Time constant Ï„ = RC = 10K Ã— 10ÂµF = 100ms
â€¢ Reset pulse width â‰ˆ 0.7 Ã— Ï„ â‰ˆ 70ms (enough!)
```

### 2.4 Control Signals

```
CONTROL SIGNALS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

EAÌ…/VPP (Pin 31) - External Access:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EAÌ… = 1 (VCC): Execute from internal ROM first              â”‚
â”‚              If PC > 0FFFH, fetches from external ROM      â”‚
â”‚                                                             â”‚
â”‚ EAÌ… = 0 (GND): Execute ONLY from external ROM               â”‚
â”‚              Internal ROM disabled (for 8031/8032)          â”‚
â”‚                                                             â”‚
â”‚ VPP: Programming voltage for EPROM versions                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ALE/PROGÌ… (Pin 30) - Address Latch Enable:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ALE Function:                                               â”‚
â”‚ â€¢ Outputs pulse to latch lower address (A0-A7)             â”‚
â”‚ â€¢ Frequency = 1/6 of oscillator (1.8432 MHz @ 11.0592 MHz) â”‚
â”‚ â€¢ Can be used as clock source for external circuits        â”‚
â”‚                                                             â”‚
â”‚ PROGÌ… Function:                                              â”‚
â”‚ â€¢ Programming pulse input for EPROM/Flash programming      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PÌ…SÌ…EÌ…NÌ… (Pin 29) - Program Store Enable:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Active LOW output                                        â”‚
â”‚ â€¢ Read strobe for external code memory                     â”‚
â”‚ â€¢ Pulses LOW during external ROM fetch                     â”‚
â”‚ â€¢ Connected to OEÌ… of external EPROM                        â”‚
â”‚ â€¢ Does NOT pulse during internal ROM execution             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TIMING DIAGRAM:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Machine Cycle (1 Î¼s @ 12 MHz)
â”œâ”€â”€â”€ S1 â”€â”€â”€â”¼â”€â”€â”€ S2 â”€â”€â”€â”¼â”€â”€â”€ S3 â”€â”€â”€â”¼â”€â”€â”€ S4 â”€â”€â”€â”¼â”€â”€â”€ S5 â”€â”€â”€â”¼â”€â”€â”€ S6 â”€â”€â”€â”¤

ALE    â”€â”   â”Œâ”€â”€â”€â”           â”Œâ”€â”€â”€â”           â”Œâ”€â”€â”€â”           â”Œâ”€â”€â”€
        â””â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PÌ…SÌ…EÌ…NÌ…  â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            â””â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”˜

P0    â”€<A0-A7>â”€<D0-D7>â”€<A0-A7>â”€<D0-D7>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                   (Address) (Data)
```

---

## 3. I/O Ports

### 3.1 Port 0 (P0.0 - P0.7) - Pins 32-39

```
PORT 0 STRUCTURE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Internal Structure (One bit):
                        VCC
                         â”‚
                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                    â”‚  P-FET  â”‚
        D â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ (Open)  â”œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€ P0.x (Pin)
        Q â”€â”€â”€â”€â”€â”    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
               â”‚                      â”‚
               â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
        Latch â”€â”¼â”€â”€â”€â”€â”¤  N-FET  â”œâ”€â”€â”€â”€â”€â”€â”€â”¤
               â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
               â”‚                      â”‚
               â””â”€â”€â”€â”€â”€â”€â”€ Read â—„â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Features:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Open-drain outputs (no internal pull-up)                 â”‚
â”‚ â€¢ Requires external pull-up resistors for output use       â”‚
â”‚ â€¢ True bidirectional port                                  â”‚
â”‚ â€¢ Dual function: I/O or Address/Data bus                   â”‚
â”‚                                                             â”‚
â”‚ As I/O Port:                                               â”‚
â”‚   - Needs 10K pull-up resistors                           â”‚
â”‚   - 8 quasi-bidirectional lines                           â”‚
â”‚                                                             â”‚
â”‚ As Address/Data Bus:                                       â”‚
â”‚   - AD0-AD7 (multiplexed lower address and data)          â”‚
â”‚   - No pull-ups needed (internal FET provides drive)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

EXTERNAL MEMORY INTERFACE:
                                          External
    8051                                    EPROM
  â”Œâ”€â”€â”€â”€â”€â”€â”                               â”Œâ”€â”€â”€â”€â”€â”€â”
  â”‚      â”‚ P0.0-P0.7 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ D0-D7â”‚
  â”‚      â”‚     â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”      â”‚      â”‚
  â”‚ ALE  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ 74373â”œâ”€â”€â”€â”€â”€â–ºâ”‚ A0-A7â”‚
  â”‚      â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Latchâ”‚      â”‚      â”‚
  â”‚ PÌ…SÌ…EÌ…NÌ… â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  OEÌ…  â”‚
  â”‚      â”‚ P2.0-P2.7 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚A8-A15â”‚
  â””â”€â”€â”€â”€â”€â”€â”˜                               â””â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Port 1 (P1.0 - P1.7) - Pins 1-8

```
PORT 1 STRUCTURE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Internal Structure (One bit):
                        VCC
                         â”‚
                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                    â”‚ Internalâ”‚
                    â”‚ Pull-up â”‚ (Connected when output = 1)
        D â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  30K    â”œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€ P1.x (Pin)
        Q â”€â”€â”€â”€â”€â”    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
               â”‚                      â”‚
               â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
        Latch â”€â”¼â”€â”€â”€â”€â”¤  N-FET  â”œâ”€â”€â”€â”€â”€â”€â”€â”¤
               â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
               â”‚                      â”‚
               â””â”€â”€â”€â”€â”€â”€â”€ Read â—„â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Features:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Quasi-bidirectional port with internal pull-ups          â”‚
â”‚ â€¢ Can sink 1.6 mA per pin                                  â”‚
â”‚ â€¢ Can source ~60 ÂµA per pin (weak pull-up)                 â”‚
â”‚ â€¢ No alternate functions in standard 8051                  â”‚
â”‚ â€¢ Pure general-purpose I/O port                            â”‚
â”‚                                                             â”‚
â”‚ 8052 Alternate Functions:                                  â”‚
â”‚ â€¢ P1.0 = T2   (Timer 2 external clock input)              â”‚
â”‚ â€¢ P1.1 = T2EX (Timer 2 capture/reload trigger)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Port 2 (P2.0 - P2.7) - Pins 21-28

```
PORT 2 STRUCTURE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Features:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Quasi-bidirectional port with internal pull-ups          â”‚
â”‚ â€¢ Similar structure to Port 1                              â”‚
â”‚                                                             â”‚
â”‚ Dual Function:                                             â”‚
â”‚ â€¢ As I/O: General purpose 8-bit port                       â”‚
â”‚ â€¢ As Address Bus: A8-A15 (upper address byte)             â”‚
â”‚                                                             â”‚
â”‚ During external memory access:                             â”‚
â”‚ â€¢ Outputs upper 8 bits of 16-bit address                  â”‚
â”‚ â€¢ Returns to I/O function after access                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ADDRESS BITS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  P2.7  P2.6  P2.5  P2.4  P2.3  P2.2  P2.1  P2.0
  A15   A14   A13   A12   A11   A10   A9    A8

  (Pin 28)(27) (26)  (25)  (24)  (23)  (22) (21)
```

### 3.4 Port 3 (P3.0 - P3.7) - Pins 10-17

```
PORT 3 STRUCTURE AND ALTERNATE FUNCTIONS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Features:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Quasi-bidirectional port with internal pull-ups          â”‚
â”‚ â€¢ Most versatile port with many alternate functions        â”‚
â”‚ â€¢ Each pin can be I/O or special function                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Pin Alternate Functions:
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pin  â”‚ Port â”‚ Alternate Function                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  10  â”‚ P3.0 â”‚ RXD  - Serial input (Receive Data)             â”‚
â”‚  11  â”‚ P3.1 â”‚ TXD  - Serial output (Transmit Data)           â”‚
â”‚  12  â”‚ P3.2 â”‚ INT0Ì… - External Interrupt 0 (active low)       â”‚
â”‚  13  â”‚ P3.3 â”‚ INT1Ì… - External Interrupt 1 (active low)       â”‚
â”‚  14  â”‚ P3.4 â”‚ T0   - Timer 0 external clock input            â”‚
â”‚  15  â”‚ P3.5 â”‚ T1   - Timer 1 external clock input            â”‚
â”‚  16  â”‚ P3.6 â”‚ WRÌ…   - External data memory Write strobe       â”‚
â”‚  17  â”‚ P3.7 â”‚ RDÌ…   - External data memory Read strobe        â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ALTERNATE FUNCTION DIAGRAM:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    P3.0 â”€â”€â”€ RXD  â”€â”€â”€ Serial Data In
    P3.1 â”€â”€â”€ TXD  â”€â”€â”€ Serial Data Out
    P3.2 â”€â”€â”€ INT0Ì… â”€â”€â”€ External Interrupt 0
    P3.3 â”€â”€â”€ INT1Ì… â”€â”€â”€ External Interrupt 1
    P3.4 â”€â”€â”€ T0   â”€â”€â”€ Timer/Counter 0 Input
    P3.5 â”€â”€â”€ T1   â”€â”€â”€ Timer/Counter 1 Input
    P3.6 â”€â”€â”€ WRÌ…   â”€â”€â”€ Write to External RAM
    P3.7 â”€â”€â”€ RDÌ…   â”€â”€â”€ Read from External RAM
```

---

## 4. Internal Architecture Details

### 4.1 Detailed Block Diagram

```
                    8051 DETAILED INTERNAL ARCHITECTURE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                     CONTROL UNIT                        â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
         â”‚  â”‚  Instruction Decoder  â”‚  Timing & Control Logic    â”‚â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                           â”‚                           â”‚
         â–¼                           â–¼                           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ALU   â”‚               â”‚  PROGRAM   â”‚              â”‚   MEMORY   â”‚
    â”‚         â”‚               â”‚  COUNTER   â”‚              â”‚            â”‚
    â”‚ 8-bit   â”‚               â”‚  (16-bit)  â”‚              â”‚ 4KB ROM    â”‚
    â”‚         â”‚               â”‚            â”‚              â”‚ (0000-0FFF)â”‚
    â”‚ + - AND â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚            â”‚
    â”‚ OR XOR  â”‚                     â”‚                     â”‚ 128B RAM   â”‚
    â”‚ RLC RRC â”‚                     â–¼                     â”‚ (00-7F)    â”‚
    â”‚         â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚            â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜               â”‚ INSTRUCTIONâ”‚              â”‚ SFRs       â”‚
         â”‚                    â”‚  REGISTER  â”‚              â”‚ (80-FF)    â”‚
         â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                      â”‚
         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚    â”‚                                                 â”‚
         â–¼    â–¼                                                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
    â”‚   REGISTER BANK    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                    â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  â”‚ ACC (Accumulator)â”‚
    â”‚  â”‚ B Register       â”‚
    â”‚  â”‚ PSW (Flags)      â”‚
    â”‚  â”‚ SP (Stack Ptr)   â”‚
    â”‚  â”‚ DPTR (DPH:DPL)   â”‚
    â”‚  â”‚ R0-R7 (Banks)    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                      I/O PORTS                              â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
    â”‚  â”‚ Port 0  â”‚ â”‚ Port 1  â”‚ â”‚ Port 2  â”‚ â”‚ Port 3  â”‚           â”‚
    â”‚  â”‚(AD0-AD7)â”‚ â”‚(General)â”‚ â”‚(A8-A15) â”‚ â”‚(Special)â”‚           â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                      PERIPHERALS                            â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚  â”‚  Timer 0     â”‚ â”‚  Timer 1     â”‚ â”‚    Serial Port       â”‚â”‚
    â”‚  â”‚  (16-bit)    â”‚ â”‚  (16-bit)    â”‚ â”‚    (Full Duplex)     â”‚â”‚
    â”‚  â”‚  TH0, TL0    â”‚ â”‚  TH1, TL1    â”‚ â”‚    SBUF, SCON        â”‚â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â”‚                                                             â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚              Interrupt Controller                     â”‚  â”‚
    â”‚  â”‚  INT0, INT1, Timer 0, Timer 1, Serial                â”‚  â”‚
    â”‚  â”‚  IE, IP Registers                                     â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 CPU Core Components

```
CPU CORE COMPONENTS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. ALU (Arithmetic Logic Unit):
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Operations:                                                 â”‚
   â”‚ â€¢ Arithmetic: ADD, ADDC, SUBB, MUL, DIV, INC, DEC         â”‚
   â”‚ â€¢ Logical: ANL, ORL, XRL, CLR, CPL                        â”‚
   â”‚ â€¢ Rotate: RL, RLC, RR, RRC, SWAP                          â”‚
   â”‚ â€¢ Boolean: Bit operations on bit-addressable RAM          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. Boolean Processor:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â€¢ Single-bit ALU                                           â”‚
   â”‚ â€¢ Operates on C (Carry) flag                               â”‚
   â”‚ â€¢ Instructions: SETB, CLR, CPL, ANL C, ORL C, MOV C       â”‚
   â”‚ â€¢ Enables efficient I/O control                            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. Instruction Decoder:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â€¢ Decodes opcodes fetched from memory                      â”‚
   â”‚ â€¢ Generates control signals for ALU and data paths         â”‚
   â”‚ â€¢ Handles 1, 2, and 3 byte instructions                    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. Timing and Control:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â€¢ Machine cycle = 12 oscillator periods                    â”‚
   â”‚ â€¢ Most instructions: 1-2 machine cycles                    â”‚
   â”‚ â€¢ MUL, DIV: 4 machine cycles                               â”‚
   â”‚ â€¢ At 12 MHz: 1 machine cycle = 1 Âµs                        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Timing and Oscillator

### 5.1 Machine Cycle

```
MACHINE CYCLE TIMING
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Oscillator Period: T(osc) = 1/f(osc)
Machine Cycle: 12 Ã— T(osc)
State: 2 Ã— T(osc) (6 states per machine cycle)

At 12 MHz Crystal:
â€¢ T(osc) = 1/12MHz = 83.33 ns
â€¢ Machine Cycle = 12 Ã— 83.33 ns = 1 Âµs
â€¢ State = 2 Ã— 83.33 ns = 166.67 ns

MACHINE CYCLE BREAKDOWN:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

One Machine Cycle = 12 Oscillator Periods = 6 States
                                    
â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Machine Cycle (1 Âµs @ 12 MHz) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
â”‚                                                         â”‚
â”‚   S1   â”‚   S2   â”‚   S3   â”‚   S4   â”‚   S5   â”‚   S6   â”‚
â”‚ P1â”‚ P2 â”‚ P1â”‚ P2 â”‚ P1â”‚ P2 â”‚ P1â”‚ P2 â”‚ P1â”‚ P2 â”‚ P1â”‚ P2 â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”¤
â”‚ 1 â”‚ 2  â”‚ 3 â”‚ 4  â”‚ 5 â”‚ 6  â”‚ 7 â”‚ 8  â”‚ 9 â”‚ 10 â”‚ 11â”‚ 12 â”‚
                   Oscillator Periods

State Functions:
â€¢ S1-S2: Opcode fetch (ALE + PSEN)
â€¢ S3-S4: Operand fetch or dummy
â€¢ S5-S6: Execution

INSTRUCTION TIMING:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Machine Cycles  â”‚ Instruction Examples                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       1        â”‚ MOV A,Rn / ADD A,Rn / CLR A          â”‚
â”‚       2        â”‚ MOV A,direct / MOVX / LJMP           â”‚
â”‚       4        â”‚ MUL AB / DIV AB                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Common Crystal Frequencies

```
CRYSTAL SELECTION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Crystal   â”‚ Machine Cycle â”‚ Application                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 11.0592 MHzâ”‚   1.085 Âµs    â”‚ Standard - Exact baud rates       â”‚
â”‚ 12.000 MHz â”‚   1.000 Âµs    â”‚ Easy timing calculations          â”‚
â”‚ 6.000 MHz  â”‚   2.000 Âµs    â”‚ Low power applications            â”‚
â”‚ 24.000 MHz â”‚   0.500 Âµs    â”‚ Higher speed (enhanced 8051)      â”‚
â”‚ 33.000 MHz â”‚   0.364 Âµs    â”‚ Fast variants (DS89C4xx)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Why 11.0592 MHz?
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
For standard baud rates like 9600, 19200, 115200:
Timer reload value becomes an exact integer.

Example for 9600 baud:
â€¢ Crystal = 11.0592 MHz
â€¢ Timer reload = 256 - (11059200)/(12 Ã— 32 Ã— 9600) = 256 - 3 = 253 = FDH

With 12 MHz:
â€¢ Timer reload = 256 - (12000000)/(12 Ã— 32 Ã— 9600) = 252.6 (not exact!)
```

---

## ğŸ“‹ Summary Table

| Pin Category | Pins | Function |
|-------------|------|----------|
| Power | 20, 40 | GND, VCC (+5V) |
| Oscillator | 18, 19 | XTAL2, XTAL1 |
| Reset | 9 | RST (Active HIGH) |
| Control | 29, 30, 31 | PSEN, ALE, EA |
| Port 0 | 32-39 | AD0-AD7 (I/O + Bus) |
| Port 1 | 1-8 | General I/O |
| Port 2 | 21-28 | A8-A15 (I/O + Address) |
| Port 3 | 10-17 | I/O + Special Functions |

---

## â“ Quick Revision Questions

1. **What is the function of EAÌ… pin?**
   <details>
   <summary>Show Answer</summary>
   EAÌ… (External Access) pin determines program memory source. When EAÌ…=1 (VCC), CPU executes from internal ROM first; if PC exceeds ROM size, it fetches from external ROM. When EAÌ…=0 (GND), CPU executes only from external ROM (used with 8031/8032 which have no internal ROM).
   </details>

2. **Why does Port 0 need external pull-up resistors?**
   <details>
   <summary>Show Answer</summary>
   Port 0 has open-drain outputs with no internal pull-ups (unlike Ports 1, 2, 3). The upper FET is only connected during bus operations. For general I/O use, external 10K pull-up resistors are required to achieve logic HIGH output.
   </details>

3. **List the alternate functions of Port 3.**
   <details>
   <summary>Show Answer</summary>
   P3.0=RXD, P3.1=TXD, P3.2=INT0Ì…, P3.3=INT1Ì…, P3.4=T0, P3.5=T1, P3.6=WRÌ…, P3.7=RDÌ…. These support serial communication, external interrupts, timer inputs, and external RAM access.
   </details>

4. **What is the function of ALE signal?**
   <details>
   <summary>Show Answer</summary>
   ALE (Address Latch Enable) is used to demultiplex the lower address (A0-A7) from the data bus (D0-D7) on Port 0 during external memory access. An external latch (74373) captures the address when ALE goes HIGH to LOW.
   </details>

5. **Calculate the machine cycle time for 11.0592 MHz crystal.**
   <details>
   <summary>Show Answer</summary>
   Machine Cycle = 12 Ã— Oscillator Period = 12 / 11.0592 MHz = 12 / 11,059,200 = 1.085 Âµs (approximately 1.085 microseconds per instruction cycle).
   </details>

6. **What values do registers have after RESET?**
   <details>
   <summary>Show Answer</summary>
   PC=0000H (execution starts here), ACC=00H, B=00H, PSW=00H, SP=07H, DPTR=0000H, All Ports=FFH (all pins HIGH), TMOD=00H, TCON=00H, Timer registers=00H, SCON=00H.
   </details>

---

## ğŸ§­ Navigation

| Previous | Up | Next |
|----------|-----|------|
| [7.1 Microcontroller Basics](01-microcontroller-basics.md) | [Unit 7 Index](README.md) | [7.3 Memory Organization](03-memory-organization.md) |

---

*[â† Previous: Microcontroller Basics](01-microcontroller-basics.md) | [Next: Memory Organization â†’](03-memory-organization.md)*

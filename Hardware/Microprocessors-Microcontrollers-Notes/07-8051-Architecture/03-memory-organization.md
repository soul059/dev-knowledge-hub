# Chapter 7.3: 8051 Memory Organization

## ğŸ“š Chapter Overview

This chapter covers the comprehensive memory architecture of the 8051 microcontroller, including program memory, data memory, Special Function Registers (SFRs), and bit-addressable memory areas. Understanding memory organization is essential for efficient programming.

---

## ğŸ¯ Learning Objectives

After completing this chapter, you will be able to:
- Understand the Harvard architecture memory model
- Explain the organization of internal RAM
- Identify Special Function Registers and their functions
- Understand bit-addressable memory locations
- Interface external memory with 8051

---

## 1. Memory Architecture Overview

### 1.1 Harvard Architecture

```
8051 MEMORY ARCHITECTURE (Harvard)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Unlike von Neumann architecture (single memory for code+data),
8051 uses Harvard architecture with SEPARATE memory spaces:

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                        8051 CPU                             â”‚
    â”‚                                                              â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚  â”‚  CODE MEMORY     â”‚       â”‚     DATA MEMORY              â”‚â”‚
    â”‚  â”‚  (Program)       â”‚       â”‚     (Variables)              â”‚â”‚
    â”‚  â”‚                  â”‚       â”‚                              â”‚â”‚
    â”‚  â”‚  Instructions    â”‚       â”‚  Internal RAM  External RAM  â”‚â”‚
    â”‚  â”‚  are fetched     â”‚       â”‚  (128/256 B)   (up to 64KB)  â”‚â”‚
    â”‚  â”‚  from here       â”‚       â”‚                              â”‚â”‚
    â”‚  â”‚                  â”‚       â”‚                              â”‚â”‚
    â”‚  â”‚  â—„â”€â”€ MOVC â”€â”€â”€â”€â–º  â”‚       â”‚  â—„â”€â”€ MOV â”€â”€â”€â”€â–º â—„â”€â”€ MOVX â”€â”€â”€â–ºâ”‚â”‚
    â”‚  â”‚                  â”‚       â”‚                              â”‚â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â”‚         â”‚                              â”‚                     â”‚
    â”‚         â–¼                              â–¼                     â”‚
    â”‚    Read-Only                    Read-Write                  â”‚
    â”‚    (ROM/Flash)                  (RAM)                       â”‚
    â”‚                                                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MEMORY ACCESS INSTRUCTIONS:
â€¢ MOVC  - Move Code (read from program memory)
â€¢ MOV   - Move (internal RAM operations)
â€¢ MOVX  - Move External (external RAM operations)
```

### 1.2 Memory Map Summary

```
8051 COMPLETE MEMORY MAP
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

PROGRAM MEMORY (CODE):              DATA MEMORY:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•              â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    FFFFH â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” FFFFH
          â”‚           â”‚                 â”‚           â”‚
          â”‚ External  â”‚                 â”‚ External  â”‚
          â”‚  64KB     â”‚                 â”‚   64KB    â”‚
          â”‚  EPROM    â”‚                 â”‚   RAM     â”‚
          â”‚           â”‚                 â”‚ (MOVX)    â”‚
          â”‚           â”‚                 â”‚           â”‚
    1000H â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 0000H
          â”‚           â”‚
    0FFFH â”‚ Internal  â”‚                 FFH â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   4KB     â”‚                     â”‚ SFRs      â”‚ (Direct only)
          â”‚   ROM     â”‚                 80H â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    0000H â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚ Upper 128Bâ”‚ (8052 only)
                                            â”‚ (Indirect)â”‚
                                        7FH â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                            â”‚ General   â”‚
                                            â”‚ Purpose   â”‚
                                            â”‚ RAM       â”‚
                                        30H â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                            â”‚ Bit       â”‚
                                            â”‚ Addressableâ”‚
                                        20H â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                            â”‚ Register  â”‚
                                            â”‚ Banks 0-3 â”‚
                                        00H â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Program Memory (Code Memory)

### 2.1 Internal vs External ROM

```
PROGRAM MEMORY ORGANIZATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Internal ROM (4KB for 8051, 8KB for 8052):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Address Range: 0000H - 0FFFH (8051) or 0000H - 1FFFH (8052)   â”‚
â”‚                                                                 â”‚
â”‚ Accessed when:                                                 â”‚
â”‚ â€¢ EAÌ… = 1 (HIGH) AND                                            â”‚
â”‚ â€¢ PC < ROM size                                                â”‚
â”‚                                                                 â”‚
â”‚ Contains:                                                      â”‚
â”‚ â€¢ Reset vector (0000H)                                         â”‚
â”‚ â€¢ Interrupt vectors                                            â”‚
â”‚ â€¢ Main program code                                            â”‚
â”‚ â€¢ Look-up tables                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

External ROM (up to 64KB):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Address Range: 0000H - FFFFH (if EAÌ…=0) or beyond internal ROM  â”‚
â”‚                                                                 â”‚
â”‚ Accessed when:                                                 â”‚
â”‚ â€¢ EAÌ… = 0 (always external) OR                                  â”‚
â”‚ â€¢ PC > internal ROM size                                       â”‚
â”‚                                                                 â”‚
â”‚ External ROM Signals:                                          â”‚
â”‚ â€¢ Port 0: AD0-AD7 (multiplexed address/data)                  â”‚
â”‚ â€¢ Port 2: A8-A15 (upper address)                              â”‚
â”‚ â€¢ ALE: Address latch strobe                                   â”‚
â”‚ â€¢ PÌ…SÌ…EÌ…NÌ…: Read strobe for external ROM                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Interrupt Vector Table

```
INTERRUPT VECTOR LOCATIONS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

    0000H â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  Reset Vector            â”‚ â—„â”€â”€ Power-on / RST
          â”‚  (LJMP to main program)  â”‚
    0003H â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
          â”‚  External Int 0 (IE0)    â”‚ â—„â”€â”€ INT0Ì… interrupt
          â”‚                          â”‚
    000BH â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
          â”‚  Timer 0 (TF0)           â”‚ â—„â”€â”€ Timer 0 overflow
          â”‚                          â”‚
    0013H â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
          â”‚  External Int 1 (IE1)    â”‚ â—„â”€â”€ INT1Ì… interrupt
          â”‚                          â”‚
    001BH â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
          â”‚  Timer 1 (TF1)           â”‚ â—„â”€â”€ Timer 1 overflow
          â”‚                          â”‚
    0023H â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
          â”‚  Serial Port (RI/TI)     â”‚ â—„â”€â”€ Serial interrupt
          â”‚                          â”‚
    002BH â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ (8052 only)
          â”‚  Timer 2 (TF2/EXF2)      â”‚ â—„â”€â”€ Timer 2 interrupt
          â”‚                          â”‚
    0030H â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
          â”‚                          â”‚
          â”‚  User Program Code       â”‚
          â”‚  (Main program starts    â”‚
          â”‚   here or after vectors) â”‚
          â”‚                          â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Note: Each vector has only 8 bytes of space,
      typically containing LJMP to actual ISR.
```

---

## 3. Internal Data Memory (RAM)

### 3.1 RAM Organization

```
INTERNAL RAM ORGANIZATION (128/256 Bytes)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

8051: 128 Bytes (00H - 7FH)
8052: 256 Bytes (00H - FFH, upper 128 indirect only)

    FFH â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                              â”‚
        â”‚   UPPER 128 BYTES            â”‚ â—„â”€â”€ 8052 only
        â”‚   (Indirect addressing only) â”‚     @R0, @R1
        â”‚   Can only use @R0 or @R1    â”‚
        â”‚                              â”‚
    80H â”œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”¤ â—„â”€â”€ SFRs also at 80H-FFH
        â”‚                              â”‚     (Direct addressing only)
        â”‚                              â”‚
    7FH â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚                              â”‚
        â”‚   GENERAL PURPOSE RAM        â”‚ â—„â”€â”€ 80 bytes
        â”‚   (30H - 7FH)                â”‚     Free for user
        â”‚                              â”‚
        â”‚   Stack typically grows here â”‚
        â”‚   (SP starts at 07H)         â”‚
        â”‚                              â”‚
    30H â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚                              â”‚
        â”‚   BIT-ADDRESSABLE RAM        â”‚ â—„â”€â”€ 16 bytes = 128 bits
        â”‚   (20H - 2FH)                â”‚     Bits: 00H - 7FH
        â”‚                              â”‚
        â”‚   Each byte: 8 directly      â”‚
        â”‚   addressable bits           â”‚
        â”‚                              â”‚
    20H â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚                              â”‚
        â”‚   REGISTER BANKS 0-3         â”‚ â—„â”€â”€ 32 bytes
        â”‚   (00H - 1FH)                â”‚     Each bank: R0-R7
        â”‚                              â”‚
        â”‚   Bank 0: 00H - 07H          â”‚
        â”‚   Bank 1: 08H - 0FH          â”‚
        â”‚   Bank 2: 10H - 17H          â”‚
        â”‚   Bank 3: 18H - 1FH          â”‚
        â”‚                              â”‚
    00H â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Register Banks

```
REGISTER BANKS (00H - 1FH)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Four register banks, selected by PSW bits RS1:RS0

PSW Bits    Bank    Address Range
â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
RS1=0 RS0=0  0      00H - 07H (Default after reset)
RS1=0 RS0=1  1      08H - 0FH
RS1=1 RS0=0  2      10H - 17H
RS1=1 RS0=1  3      18H - 1FH

REGISTER BANK LAYOUT:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Address  Bank 0  Bank 1  Bank 2  Bank 3
â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€
 00H      R0       -       -       -
 01H      R1       -       -       -
 02H      R2       -       -       -
 03H      R3       -       -       -
 04H      R4       -       -       -
 05H      R5       -       -       -
 06H      R6       -       -       -
 07H      R7       -       -       -
 08H       -      R0       -       -
 09H       -      R1       -       -
  :        :       :       :       :
 18H       -       -       -      R0
  :        :       :       :       :
 1FH       -       -       -      R7

BANK SWITCHING EXAMPLE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    MOV PSW, #00H    ; Select Bank 0 (RS1=0, RS0=0)
    MOV R0, #55H     ; R0 of Bank 0 = 55H (address 00H)
    
    SETB RS0         ; Select Bank 1 (RS1=0, RS0=1)
    MOV R0, #AAH     ; R0 of Bank 1 = AAH (address 08H)
    
    SETB RS1         ; Select Bank 3 (RS1=1, RS0=1)
    MOV R0, #0FFH    ; R0 of Bank 3 = FFH (address 18H)
```

### 3.3 Bit-Addressable RAM

```
BIT-ADDRESSABLE RAM (20H - 2FH)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

16 bytes Ã— 8 bits = 128 individually addressable bits

BYTE ADDRESS â†’ BIT ADDRESSES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Byte    Bit 7  Bit 6  Bit 5  Bit 4  Bit 3  Bit 2  Bit 1  Bit 0
â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€
 20H     07     06     05     04     03     02     01     00
 21H     0F     0E     0D     0C     0B     0A     09     08
 22H     17     16     15     14     13     12     11     10
 23H     1F     1E     1D     1C     1B     1A     19     18
 24H     27     26     25     24     23     22     21     20
 25H     2F     2E     2D     2C     2B     2A     29     28
 26H     37     36     35     34     33     32     31     30
 27H     3F     3E     3D     3C     3B     3A     39     38
 28H     47     46     45     44     43     42     41     40
 29H     4F     4E     4D     4C     4B     4A     49     48
 2AH     57     56     55     54     53     52     51     50
 2BH     5F     5E     5D     5C     5B     5A     59     58
 2CH     67     66     65     64     63     62     61     60
 2DH     6F     6E     6D     6C     6B     6A     69     68
 2EH     77     76     75     74     73     72     71     70
 2FH     7F     7E     7D     7C     7B     7A     79     78

BIT ADDRESSING EXAMPLES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    SETB 00H         ; Set bit 0 of byte 20H
    CLR  07H         ; Clear bit 7 of byte 20H
    MOV  C, 25H      ; Copy bit 25H to Carry flag
    
    ; Same as:
    SETB 20H.0       ; Alternative notation
    CLR  20H.7
    MOV  C, 24H.5

FORMULA:
    Bit Address = (Byte Address - 20H) Ã— 8 + Bit Position
    
    Example: Bit 5 of byte 23H
    Bit Address = (23H - 20H) Ã— 8 + 5 = 3 Ã— 8 + 5 = 29 = 1DH
```

---

## 4. Special Function Registers (SFRs)

### 4.1 SFR Map

```
SPECIAL FUNCTION REGISTERS (80H - FFH)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SFRs are ONLY accessible via DIRECT addressing (not @R0/@R1)

SFR MAP (8051):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        0     1     2     3     4     5     6     7
      â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€
 F8H â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚ FFH
     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 F0H â”‚  B  â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚ F7H
     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 E8H â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚ EFH
     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 E0H â”‚ ACC â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚ E7H
     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 D8H â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚ DFH
     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 D0H â”‚ PSW â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚ D7H
     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 C8H â”‚T2CONâ”‚     â”‚RCAP2Lâ”‚RCAP2Hâ”‚ TL2 â”‚ TH2 â”‚     â”‚     â”‚ CFH (8052)
     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 C0H â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚ C7H
     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 B8H â”‚ IP  â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚ BFH
     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 B0H â”‚ P3  â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚ B7H
     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 A8H â”‚ IE  â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚ AFH
     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 A0H â”‚ P2  â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚ A7H
     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 98H â”‚SCON â”‚SBUF â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚ 9FH
     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 90H â”‚ P1  â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚ 97H
     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 88H â”‚TCON â”‚TMOD â”‚ TL0 â”‚ TL1 â”‚ TH0 â”‚ TH1 â”‚     â”‚     â”‚ 8FH
     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 80H â”‚ P0  â”‚ SP  â”‚ DPL â”‚ DPH â”‚     â”‚     â”‚     â”‚PCON â”‚ 87H
     â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

â˜… = Bit-addressable SFRs (addresses divisible by 8)
```

### 4.2 SFR Descriptions

```
IMPORTANT SFRs
â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Register â”‚ Addressâ”‚ Description                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ACC      â”‚  E0H   â”‚ Accumulator - Main working register         â”‚
â”‚ B        â”‚  F0H   â”‚ B Register - Used in MUL/DIV                â”‚
â”‚ PSW      â”‚  D0H   â”‚ Program Status Word - Flags                 â”‚
â”‚ SP       â”‚  81H   â”‚ Stack Pointer - Points to stack top         â”‚
â”‚ DPL      â”‚  82H   â”‚ Data Pointer Low byte                       â”‚
â”‚ DPH      â”‚  83H   â”‚ Data Pointer High byte                      â”‚
â”‚ P0       â”‚  80H   â”‚ Port 0 Latch                                â”‚
â”‚ P1       â”‚  90H   â”‚ Port 1 Latch                                â”‚
â”‚ P2       â”‚  A0H   â”‚ Port 2 Latch                                â”‚
â”‚ P3       â”‚  B0H   â”‚ Port 3 Latch                                â”‚
â”‚ PCON     â”‚  87H   â”‚ Power Control - Idle/Power Down modes       â”‚
â”‚ TCON     â”‚  88H   â”‚ Timer Control                               â”‚
â”‚ TMOD     â”‚  89H   â”‚ Timer Mode                                  â”‚
â”‚ TL0      â”‚  8AH   â”‚ Timer 0 Low byte                            â”‚
â”‚ TL1      â”‚  8BH   â”‚ Timer 1 Low byte                            â”‚
â”‚ TH0      â”‚  8CH   â”‚ Timer 0 High byte                           â”‚
â”‚ TH1      â”‚  8DH   â”‚ Timer 1 High byte                           â”‚
â”‚ SCON     â”‚  98H   â”‚ Serial Control                              â”‚
â”‚ SBUF     â”‚  99H   â”‚ Serial Buffer (TX and RX)                   â”‚
â”‚ IE       â”‚  A8H   â”‚ Interrupt Enable                            â”‚
â”‚ IP       â”‚  B8H   â”‚ Interrupt Priority                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 Bit-Addressable SFRs

```
BIT-ADDRESSABLE SFRs (Address ends in 0 or 8)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SFRs at addresses divisible by 8 have individually addressable bits:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SFR    â”‚ Bit 7   Bit 6   Bit 5   Bit 4   Bit 3   Bit 2   Bit 1   Bit 0 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ P0     â”‚ P0.7    P0.6    P0.5    P0.4    P0.3    P0.2    P0.1    P0.0  â”‚
â”‚ (80H)  â”‚ 87H     86H     85H     84H     83H     82H     81H     80H   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TCON   â”‚ TF1     TR1     TF0     TR0     IE1     IT1     IE0     IT0   â”‚
â”‚ (88H)  â”‚ 8FH     8EH     8DH     8CH     8BH     8AH     89H     88H   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ P1     â”‚ P1.7    P1.6    P1.5    P1.4    P1.3    P1.2    P1.1    P1.0  â”‚
â”‚ (90H)  â”‚ 97H     96H     95H     94H     93H     92H     91H     90H   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SCON   â”‚ SM0     SM1     SM2     REN     TB8     RB8     TI      RI    â”‚
â”‚ (98H)  â”‚ 9FH     9EH     9DH     9CH     9BH     9AH     99H     98H   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ P2     â”‚ P2.7    P2.6    P2.5    P2.4    P2.3    P2.2    P2.1    P2.0  â”‚
â”‚ (A0H)  â”‚ A7H     A6H     A5H     A4H     A3H     A2H     A1H     A0H   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ IE     â”‚ EA      -       ET2     ES      ET1     EX1     ET0     EX0   â”‚
â”‚ (A8H)  â”‚ AFH     AEH     ADH     ACH     ABH     AAH     A9H     A8H   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ P3     â”‚ P3.7    P3.6    P3.5    P3.4    P3.3    P3.2    P3.1    P3.0  â”‚
â”‚ (B0H)  â”‚ B7H     B6H     B5H     B4H     B3H     B2H     B1H     B0H   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ IP     â”‚ -       -       PT2     PS      PT1     PX1     PT0     PX0   â”‚
â”‚ (B8H)  â”‚ -       -       BDH     BCH     BBH     BAH     B9H     B8H   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PSW    â”‚ CY      AC      F0      RS1     RS0     OV      -       P     â”‚
â”‚ (D0H)  â”‚ D7H     D6H     D5H     D4H     D3H     D2H     D1H     D0H   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ACC    â”‚ ACC.7   ACC.6   ACC.5   ACC.4   ACC.3   ACC.2   ACC.1   ACC.0 â”‚
â”‚ (E0H)  â”‚ E7H     E6H     E5H     E4H     E3H     E2H     E1H     E0H   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ B      â”‚ B.7     B.6     B.5     B.4     B.3     B.2     B.1     B.0   â”‚
â”‚ (F0H)  â”‚ F7H     F6H     F5H     F4H     F3H     F2H     F1H     F0H   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. External Memory

### 5.1 External ROM Interface

```
EXTERNAL PROGRAM MEMORY (ROM/EPROM)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Connection Diagram:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

     8051                                 27256 EPROM (32KB)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚       â”‚                             â”‚                â”‚
   â”‚  P0.0 â”œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ D0             â”‚
   â”‚  P0.1 â”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ D1             â”‚
   â”‚  P0.2 â”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ D2             â”‚
   â”‚  P0.3 â”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ D3             â”‚
   â”‚  P0.4 â”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ D4             â”‚
   â”‚  P0.5 â”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ D5             â”‚
   â”‚  P0.6 â”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ D6             â”‚
   â”‚  P0.7 â”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ D7             â”‚
   â”‚       â”‚  â”‚                          â”‚                â”‚
   â”‚       â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚                â”‚
   â”‚  ALE  â”œâ”€â”€â”¼â”€â”€â”€â–ºâ”‚  74373  â”‚           â”‚                â”‚
   â”‚       â”‚  â”‚    â”‚  Latch  â”‚           â”‚                â”‚
   â”‚       â”‚  â””â”€â”€â”€â–ºâ”‚ D    Q  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ A0             â”‚
   â”‚       â”‚       â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ A1-A7          â”‚
   â”‚       â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚                â”‚
   â”‚       â”‚                             â”‚                â”‚
   â”‚  P2.0 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ A8             â”‚
   â”‚  P2.1 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ A9             â”‚
   â”‚  P2.2 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ A10            â”‚
   â”‚  P2.3 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ A11            â”‚
   â”‚  P2.4 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ A12            â”‚
   â”‚  P2.5 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ A13            â”‚
   â”‚  P2.6 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ A14            â”‚
   â”‚       â”‚                             â”‚                â”‚
   â”‚  PÌ…SÌ…EÌ…NÌ… â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ OÌ…EÌ…             â”‚
   â”‚       â”‚                    GND â”€â”€â”€â”€â–ºâ”‚ CÌ…EÌ…             â”‚
   â”‚       â”‚                    VCC â”€â”€â”€â”€â–ºâ”‚ VCC            â”‚
   â”‚  EAÌ…   â”œâ”€â”€â”€â”€â”€â”€ GND (Use external)    â”‚ GND            â”‚
   â”‚       â”‚                             â”‚                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”˜                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 External RAM Interface

```
EXTERNAL DATA MEMORY (RAM)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Connection Diagram:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

     8051                                 6264 SRAM (8KB)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚       â”‚                             â”‚                â”‚
   â”‚  P0.0 â”œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ D0             â”‚
   â”‚   :   â”‚  â”‚                          â”‚ :              â”‚
   â”‚  P0.7 â”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ D7             â”‚
   â”‚       â”‚  â”‚                          â”‚                â”‚
   â”‚       â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚                â”‚
   â”‚  ALE  â”œâ”€â”€â”¼â”€â”€â”€â–ºâ”‚  74373  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ A0-A7          â”‚
   â”‚       â”‚  â””â”€â”€â”€â–ºâ”‚  Latch  â”‚           â”‚                â”‚
   â”‚       â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚                â”‚
   â”‚       â”‚                             â”‚                â”‚
   â”‚  P2.0 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ A8             â”‚
   â”‚   :   â”‚                             â”‚ :              â”‚
   â”‚  P2.4 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ A12            â”‚
   â”‚       â”‚                             â”‚                â”‚
   â”‚  RÌ…DÌ…   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ OÌ…EÌ…             â”‚
   â”‚ (P3.7)â”‚                             â”‚                â”‚
   â”‚       â”‚                             â”‚                â”‚
   â”‚  WÌ…RÌ…   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ WÌ…EÌ…             â”‚
   â”‚ (P3.6)â”‚                    GND â”€â”€â”€â”€â–ºâ”‚ CÌ…SÌ…             â”‚
   â”‚       â”‚                             â”‚                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”˜                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ACCESSING EXTERNAL RAM:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ; Set DPTR to external RAM address
    MOV DPTR, #2000H
    
    ; Write to external RAM
    MOV A, #55H
    MOVX @DPTR, A      ; Write 55H to address 2000H
    
    ; Read from external RAM
    MOVX A, @DPTR      ; Read from address 2000H
    
    ; Using 8-bit addressing (256 bytes only)
    MOV R0, #40H
    MOVX @R0, A        ; Write to external address in R0
    MOVX A, @R0        ; Read from external address in R0
```

---

## 6. Stack Memory

```
STACK ORGANIZATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Stack Pointer (SP) at address 81H:
â€¢ Initialized to 07H after RESET
â€¢ Stack grows UPWARD (increasing addresses)
â€¢ PUSH increments SP, then stores
â€¢ POP reads, then decrements SP

STACK OPERATION:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Initial: SP = 07H

    PUSH ACC (ACC = 55H)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Before: SP = 07H â”‚
    â”‚ After:  SP = 08H â”‚
    â”‚ [08H] = 55H     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    PUSH B (B = AAH)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Before: SP = 08H â”‚
    â”‚ After:  SP = 09H â”‚
    â”‚ [09H] = AAH     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    POP B
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Before: SP = 09H â”‚
    â”‚ B = [09H] = AAH â”‚
    â”‚ After:  SP = 08H â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STACK LOCATION IN RAM:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    7FH â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚ â—„â”€â”€ Stack can grow here
        â”‚  General     â”‚
        â”‚  Purpose     â”‚
        â”‚  RAM         â”‚
    30H â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ Bit-addr RAM â”‚
    20H â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ Bank 3       â”‚ â—„â”€â”€ Be careful if using banks!
    18H â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ Bank 2       â”‚
    10H â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ Bank 1       â”‚
    08H â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â—„â”€â”€ SP=07H after reset
        â”‚ Bank 0       â”‚     First PUSH goes to 08H
    00H â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RECOMMENDED: Set SP to 30H or higher to avoid
             conflict with register banks.
             
    MOV SP, #30H    ; Safe stack location
```

---

## ğŸ“‹ Summary Table

| Memory Type | Address Range | Size | Access Method |
|-------------|---------------|------|---------------|
| Register Banks | 00H-1FH | 32 bytes | Direct, Indirect, Rn |
| Bit-Addressable | 20H-2FH | 16 bytes (128 bits) | Direct (byte or bit) |
| General RAM | 30H-7FH | 80 bytes | Direct, Indirect |
| SFRs | 80H-FFH | 128 bytes | Direct only |
| Upper RAM (8052) | 80H-FFH | 128 bytes | Indirect only |
| Internal ROM | 0000H-0FFFH | 4KB | MOVC |
| External ROM | 0000H-FFFFH | 64KB max | MOVC |
| External RAM | 0000H-FFFFH | 64KB max | MOVX |

---

## â“ Quick Revision Questions

1. **Why can't SFRs be accessed using indirect addressing?**
   <details>
   <summary>Show Answer</summary>
   The 8051 architecture maps SFRs and Upper 128 RAM to the same address range (80H-FFH). To distinguish between them, direct addressing accesses SFRs while indirect addressing (@R0, @R1) accesses Upper RAM. This allows both to coexist at the same addresses.
   </details>

2. **What is the range of bit-addressable RAM and how many bits are available?**
   <details>
   <summary>Show Answer</summary>
   Bit-addressable RAM spans addresses 20H to 2FH (16 bytes). Since each byte has 8 bits, there are 16 Ã— 8 = 128 individually addressable bits, numbered 00H to 7FH.
   </details>

3. **What is the initial value of SP after reset and where does the first PUSH go?**
   <details>
   <summary>Show Answer</summary>
   SP is initialized to 07H after reset. PUSH first increments SP then stores, so the first PUSHed value goes to address 08H. This means Bank 1 registers are overwritten unless SP is moved to a higher address.
   </details>

4. **What signals are used for external ROM vs external RAM access?**
   <details>
   <summary>Show Answer</summary>
   External ROM uses PÌ…SÌ…EÌ…NÌ… (Program Store Enable) as the read strobe. External RAM uses RDÌ… (P3.7) for read and WRÌ… (P3.6) for write. Both use ALE to latch the lower address from Port 0 and Port 2 for upper address.
   </details>

5. **Which SFRs are bit-addressable?**
   <details>
   <summary>Show Answer</summary>
   SFRs at addresses divisible by 8 are bit-addressable: P0(80H), TCON(88H), P1(90H), SCON(98H), P2(A0H), IE(A8H), P3(B0H), IP(B8H), PSW(D0H), ACC(E0H), B(F0H). Not all addresses divisible by 8 have SFRs defined.
   </details>

6. **What is the difference between MOVC and MOVX instructions?**
   <details>
   <summary>Show Answer</summary>
   MOVC (Move Code) reads from program memory (ROM) using @A+DPTR or @A+PC addressing. MOVX (Move External) accesses external data memory (RAM) using @DPTR or @Ri addressing. MOVC is read-only; MOVX allows both read and write.
   </details>

---

## ğŸ§­ Navigation

| Previous | Up | Next |
|----------|-----|------|
| [7.2 Architecture & Pins](02-architecture-pins.md) | [Unit 7 Index](README.md) | [7.4 Registers & PSW](04-registers-psw.md) |

---

*[â† Previous: Architecture & Pins](02-architecture-pins.md) | [Next: Registers & PSW â†’](04-registers-psw.md)*

# Chapter 6.3: 8255 Programmable Peripheral Interface (PPI)

## ğŸ“š Chapter Overview

The 8255 PPI is one of the most important and commonly used peripheral chips for interfacing I/O devices with microprocessors. This chapter covers its architecture, operating modes, programming, and practical applications.

---

## ğŸ¯ Learning Objectives

After completing this chapter, you will be able to:
- Understand 8255 architecture and pin functions
- Configure 8255 in different modes (0, 1, 2)
- Write control words for various configurations
- Program 8255 for practical applications
- Design interfaces using 8255

---

## 1. 8255 Introduction and Architecture

### 1.1 Features

```
8255 PPI Key Features:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ 24 I/O pins organized into 3 ports (8 bits each)
â€¢ 3 operating modes: Mode 0, Mode 1, Mode 2
â€¢ All modes software configurable
â€¢ Compatible with 8085, 8086 microprocessors
â€¢ TTL compatible
â€¢ Single +5V supply
â€¢ 40-pin DIP package
```

### 1.2 Block Diagram

```
                        8255 BLOCK DIAGRAM
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 8255 PPI                â”‚
                    â”‚                                         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚           â”‚   â”‚   â”‚      Group A Control            â”‚  â”‚
    â”‚   Data    â”‚   â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
    â”‚   Bus     â”‚â—„â”€â”€â”¼â”€â”€â”€â”¤  â”‚      Port A (PA0-PA7)   â”‚â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â–º Port A
    â”‚  Buffer   â”‚   â”‚   â”‚  â”‚        (8 bits)         â”‚    â”‚  â”‚    (8 bits)
    â”‚   D0-D7   â”‚   â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
    â”‚           â”‚   â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚  â”‚  Port C Upper (PC4-PC7) â”‚â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â–º PC4-PC7
         â–²          â”‚   â”‚  â”‚        (4 bits)         â”‚    â”‚  â”‚    (4 bits)
         â”‚          â”‚   â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜  â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”     â”‚                                        â”‚
    â”‚ Control â”‚     â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  Logic  â”‚â—„â”€â”€â”€â”€â”¤   â”‚      Group B Control            â”‚  â”‚
    â”‚         â”‚     â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
    â”‚ RD, WR  â”‚     â”‚   â”‚  â”‚      Port B (PB0-PB7)   â”‚â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â–º Port B
    â”‚ A0, A1  â”‚     â”‚   â”‚  â”‚        (8 bits)         â”‚    â”‚  â”‚    (8 bits)
    â”‚   CS    â”‚     â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
    â”‚  RESET  â”‚     â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚  â”‚  Port C Lower (PC0-PC3) â”‚â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â–º PC0-PC3
                    â”‚   â”‚  â”‚        (4 bits)         â”‚    â”‚  â”‚    (4 bits)
                    â”‚   â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜  â”‚
                    â”‚                                        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Port Groups:
    â€¢ Group A: Port A (8 bits) + Port C Upper (4 bits)
    â€¢ Group B: Port B (8 bits) + Port C Lower (4 bits)
```

### 1.3 Pin Diagram

```
                    8255 PIN DIAGRAM
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
           PA3 â”€â”€â”€â”¤ 1            40 â”œâ”€â”€â”€ PA4
           PA2 â”€â”€â”€â”¤ 2            39 â”œâ”€â”€â”€ PA5
           PA1 â”€â”€â”€â”¤ 3            38 â”œâ”€â”€â”€ PA6
           PA0 â”€â”€â”€â”¤ 4            37 â”œâ”€â”€â”€ PA7
           RDÌ„  â”€â”€â”€â”¤ 5            36 â”œâ”€â”€â”€ WRÌ„
           CÌ„SÌ„  â”€â”€â”€â”¤ 6            35 â”œâ”€â”€â”€ RESET
           GND â”€â”€â”€â”¤ 7            34 â”œâ”€â”€â”€ D0
           A1  â”€â”€â”€â”¤ 8            33 â”œâ”€â”€â”€ D1
           A0  â”€â”€â”€â”¤ 9            32 â”œâ”€â”€â”€ D2
           PC7 â”€â”€â”€â”¤ 10           31 â”œâ”€â”€â”€ D3
           PC6 â”€â”€â”€â”¤ 11           30 â”œâ”€â”€â”€ D4
           PC5 â”€â”€â”€â”¤ 12           29 â”œâ”€â”€â”€ D5
           PC4 â”€â”€â”€â”¤ 13           28 â”œâ”€â”€â”€ D6
           PC0 â”€â”€â”€â”¤ 14           27 â”œâ”€â”€â”€ D7
           PC1 â”€â”€â”€â”¤ 15           26 â”œâ”€â”€â”€ Vcc
           PC2 â”€â”€â”€â”¤ 16           25 â”œâ”€â”€â”€ PB7
           PC3 â”€â”€â”€â”¤ 17           24 â”œâ”€â”€â”€ PB6
           PB0 â”€â”€â”€â”¤ 18           23 â”œâ”€â”€â”€ PB5
           PB1 â”€â”€â”€â”¤ 19           22 â”œâ”€â”€â”€ PB4
           PB2 â”€â”€â”€â”¤ 20           21 â”œâ”€â”€â”€ PB3
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Pin Functions:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pin        â”‚ Function                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ D0-D7      â”‚ Bidirectional data bus                     â”‚
â”‚ PA0-PA7    â”‚ Port A (I/O pins)                          â”‚
â”‚ PB0-PB7    â”‚ Port B (I/O pins)                          â”‚
â”‚ PC0-PC7    â”‚ Port C (I/O or control pins)               â”‚
â”‚ A0, A1     â”‚ Port select (00=A, 01=B, 10=C, 11=Control) â”‚
â”‚ RDÌ„         â”‚ Read strobe (active low)                   â”‚
â”‚ WRÌ„         â”‚ Write strobe (active low)                  â”‚
â”‚ CÌ„SÌ„         â”‚ Chip select (active low)                   â”‚
â”‚ RESET      â”‚ Reset (active high)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.4 Port Selection

```
Address Selection using A0, A1:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  A1  â”‚  A0  â”‚  Selected Port/Register     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  0   â”‚  0   â”‚  Port A                     â”‚
â”‚  0   â”‚  1   â”‚  Port B                     â”‚
â”‚  1   â”‚  0   â”‚  Port C                     â”‚
â”‚  1   â”‚  1   â”‚  Control Register           â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Example Port Addresses (8255 at base 80H):
â€¢ Port A: 80H
â€¢ Port B: 81H
â€¢ Port C: 82H
â€¢ Control: 83H
```

---

## 2. Control Word Format

### 2.1 I/O Mode Control Word

```
CONTROL WORD FORMAT (D7 = 1)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  D7   D6   D5   D4   D3   D2   D1   D0
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚ 1  â”‚ M1Aâ”‚ M0Aâ”‚ PA â”‚ PCUâ”‚ M0Bâ”‚ PB â”‚ PCLâ”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
  â”‚    â””â”€â”€â”¬â”€â”€â”˜   â”‚    â”‚    â”‚    â”‚    â”‚
  â”‚       â”‚      â”‚    â”‚    â”‚    â”‚    â””â”€â”€â”€ Port C Lower
  â”‚       â”‚      â”‚    â”‚    â”‚    â”‚         0 = Output
  â”‚       â”‚      â”‚    â”‚    â”‚    â”‚         1 = Input
  â”‚       â”‚      â”‚    â”‚    â”‚    â”‚
  â”‚       â”‚      â”‚    â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€ Port B
  â”‚       â”‚      â”‚    â”‚    â”‚              0 = Output
  â”‚       â”‚      â”‚    â”‚    â”‚              1 = Input
  â”‚       â”‚      â”‚    â”‚    â”‚
  â”‚       â”‚      â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Mode for Group B
  â”‚       â”‚      â”‚    â”‚                   0 = Mode 0
  â”‚       â”‚      â”‚    â”‚                   1 = Mode 1
  â”‚       â”‚      â”‚    â”‚
  â”‚       â”‚      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Port C Upper
  â”‚       â”‚      â”‚                        0 = Output
  â”‚       â”‚      â”‚                        1 = Input
  â”‚       â”‚      â”‚
  â”‚       â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Port A
  â”‚       â”‚                               0 = Output
  â”‚       â”‚                               1 = Input
  â”‚       â”‚
  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Mode for Group A
  â”‚                                       00 = Mode 0
  â”‚                                       01 = Mode 1
  â”‚                                       1X = Mode 2
  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Mode Set Flag
                                          1 = I/O Mode
                                          0 = BSR Mode
```

### 2.2 Bit Set/Reset (BSR) Control Word

```
BSR MODE CONTROL WORD (D7 = 0)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  D7   D6   D5   D4   D3   D2   D1   D0
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚ 0  â”‚ X  â”‚ X  â”‚ X  â”‚ B2 â”‚ B1 â”‚ B0 â”‚S/R â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
  â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â”‚
  â”‚    Don't Care    Bit Select     â”‚
  â”‚                                 â”‚
  â”‚    B2 B1 B0  Bit Selected       â””â”€â”€â”€ Set/Reset
  â”‚     0  0  0   PC0                    0 = Reset
  â”‚     0  0  1   PC1                    1 = Set
  â”‚     0  1  0   PC2
  â”‚     0  1  1   PC3
  â”‚     1  0  0   PC4
  â”‚     1  0  1   PC5
  â”‚     1  1  0   PC6
  â”‚     1  1  1   PC7
  â”‚
  â””â”€â”€â”€ BSR Mode Flag (must be 0)

Example:
To SET PC5:   Control Word = 0000 1011 = 0BH
To RESET PC5: Control Word = 0000 1010 = 0AH
```

---

## 3. Operating Modes

### 3.1 Mode 0 - Simple I/O

```
MODE 0: Basic Input/Output
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Features:
â€¢ Simple input or output
â€¢ No handshaking
â€¢ Two 8-bit ports (A, B)
â€¢ Two 4-bit ports (C upper, C lower)
â€¢ Any combination of input/output

              Mode 0 Configuration
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                             â”‚
    â—„â”€â”€â”€â”€â”¤ Port A (8 bits)             â”‚  Can be Input or Output
         â”‚                             â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                             â”‚
    â—„â”€â”€â”€â”€â”¤ Port B (8 bits)             â”‚  Can be Input or Output
         â”‚                             â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                             â”‚
    â—„â”€â”€â”€â”€â”¤ Port C Upper (4 bits)       â”‚  Can be Input or Output
         â”‚                             â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                             â”‚
    â—„â”€â”€â”€â”€â”¤ Port C Lower (4 bits)       â”‚  Can be Input or Output
         â”‚                             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

16 Possible Configurations in Mode 0!
```

### 3.2 Mode 1 - Strobed I/O

```
MODE 1: Handshake I/O
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Features:
â€¢ Input or output with handshaking
â€¢ Port A or B used for data
â€¢ Port C bits used for control/status
â€¢ Supports interrupt-driven I/O

Mode 1 INPUT:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                                     â”‚
    Data â”€â”€â”€â”€â–ºâ”‚ Port A/B (8 bits) - DATA INPUT     â”‚
              â”‚                                     â”‚
              â”‚  Control Signals (from Port C):     â”‚
    STBÌ„  â”€â”€â”€â”€â–ºâ”‚  â€¢ STBÌ„ (Strobe): Latches input data â”‚
    IBF  â—„â”€â”€â”€â”€â”‚  â€¢ IBF (Input Buffer Full)         â”‚
    INTR â—„â”€â”€â”€â”€â”‚  â€¢ INTR (Interrupt Request)        â”‚
              â”‚                                     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Timing for Mode 1 Input:
                    
    STBÌ„  â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 â””â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
    Data â”€â”€â”€â”€â”€â”€â”€XXXXXXXXXXXXXXXXâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                    â”‚
    IBF  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”Œâ”€â”€â”€â”€â”€â”€â”€
                                       â””â”€â”€â”€â”€â”€â”€â”€
                                   (CPU reads)
    INTR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                                 â””â”€â”˜


Mode 1 OUTPUT:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                                     â”‚
    Data â—„â”€â”€â”€â”€â”‚ Port A/B (8 bits) - DATA OUTPUT    â”‚
              â”‚                                     â”‚
              â”‚  Control Signals (from Port C):     â”‚
    ACKÌ„  â”€â”€â”€â”€â–ºâ”‚  â€¢ ACKÌ„ (Acknowledge): Device ready  â”‚
    OBFÌ„  â—„â”€â”€â”€â”€â”‚  â€¢ OBFÌ„ (Output Buffer Full)        â”‚
    INTR â—„â”€â”€â”€â”€â”‚  â€¢ INTR (Interrupt Request)        â”‚
              â”‚                                     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Mode 2 - Bidirectional I/O

```
MODE 2: Bidirectional Bus
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Features:
â€¢ Port A only (bidirectional)
â€¢ Combined Mode 1 Input and Output
â€¢ Uses 5 bits of Port C for control
â€¢ Full handshaking in both directions

              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚        Mode 2 (Port A only)         â”‚
              â”‚                                     â”‚
   Data â—„â”€â”€â”€â”€â–ºâ”‚ Port A (8 bits) - BIDIRECTIONAL    â”‚
              â”‚                                     â”‚
              â”‚  Control Signals (Port C):          â”‚
    STBÌ„A â”€â”€â”€â”€â–ºâ”‚  â€¢ PC4: STBÌ„A (Input strobe)        â”‚
    IBFA â—„â”€â”€â”€â”€â”‚  â€¢ PC5: IBFA (Input buffer full)   â”‚
    ACKÌ„A â”€â”€â”€â”€â–ºâ”‚  â€¢ PC6: ACKÌ„A (Output acknowledge)  â”‚
    OBFÌ„A â—„â”€â”€â”€â”€â”‚  â€¢ PC7: OBFÌ„A (Output buffer full)  â”‚
    INTRAâ—„â”€â”€â”€â”€â”‚  â€¢ PC3: INTRA (Interrupt)          â”‚
              â”‚                                     â”‚
              â”‚  Port B: Can be Mode 0 or Mode 1    â”‚
              â”‚  PC0-PC2: Available for I/O or      â”‚
              â”‚           Port B handshake          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 Mode Summary

```
PORT USAGE IN DIFFERENT MODES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          â”‚    Mode 0    â”‚    Mode 1    â”‚    Mode 2    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Port A   â”‚ I/O (8 bits) â”‚ I/O (8 bits) â”‚ Bidirectionalâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Port B   â”‚ I/O (8 bits) â”‚ I/O (8 bits) â”‚ Mode 0 or 1  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Port C   â”‚ I/O (8 bits) â”‚ Handshake    â”‚ Handshake    â”‚
â”‚          â”‚ (2 Ã— 4 bits) â”‚ signals      â”‚ (5 bits)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Handshakeâ”‚     No       â”‚     Yes      â”‚     Yes      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚Interrupt â”‚     No       â”‚     Yes      â”‚     Yes      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Programming Examples

### 4.1 Mode 0 - LED Control

```asm
;------------------------------------------------
; MODE 0: Port A Output (LEDs), Port B Input (Switches)
; Control Word: 1000 0010 = 82H
;------------------------------------------------

PORTA   EQU 80H
PORTB   EQU 81H
PORTC   EQU 82H
CTRL    EQU 83H

        ; Initialize 8255
        MVI A, 82H      ; PA=Out, PB=In, PC=Out, Mode 0
        OUT CTRL
        
        ; Read switches, display on LEDs
LOOP:   IN  PORTB       ; Read switches
        OUT PORTA       ; Display on LEDs
        JMP LOOP

;------------------------------------------------
; Calculate Control Word:
; D7 = 1 (I/O mode)
; D6,D5 = 00 (Mode 0 for Group A)
; D4 = 0 (Port A = Output)
; D3 = 0 (Port C upper = Output)
; D2 = 0 (Mode 0 for Group B)
; D1 = 1 (Port B = Input)
; D0 = 0 (Port C lower = Output)
; Control Word = 1000 0010 = 82H
;------------------------------------------------
```

### 4.2 Mode 0 - 7-Segment Display

```asm
;------------------------------------------------
; Display digits 0-9 on 7-segment display
; Port A = Segment data, Port B = Digit select
;------------------------------------------------

PORTA   EQU 80H
PORTB   EQU 81H
CTRL    EQU 83H

; 7-Segment codes (Common Cathode)
; Segments: gfedcba
SEGTBL: DB 3FH  ; 0 = 0011 1111
        DB 06H  ; 1 = 0000 0110
        DB 5BH  ; 2 = 0101 1011
        DB 4FH  ; 3 = 0100 1111
        DB 66H  ; 4 = 0110 0110
        DB 6DH  ; 5 = 0110 1101
        DB 7DH  ; 6 = 0111 1101
        DB 07H  ; 7 = 0000 0111
        DB 7FH  ; 8 = 0111 1111
        DB 6FH  ; 9 = 0110 1111

START:  MVI A, 80H      ; All ports output
        OUT CTRL
        
        ; Display '5' on first digit
        MVI A, 6DH      ; Code for '5'
        OUT PORTA       ; Send to segments
        
        MVI A, 01H      ; Select digit 1
        OUT PORTB
        
        HLT
```

### 4.3 Mode 1 - Keyboard Interface

```asm
;------------------------------------------------
; Mode 1 Input: Keyboard with handshaking
; Port A = Input (keyboard data)
; PC4 = STBÌ„, PC5 = IBF, PC3 = INTRA
;------------------------------------------------

PORTA   EQU 80H
PORTC   EQU 82H
CTRL    EQU 83H

        ; Initialize 8255 in Mode 1 Input
        MVI A, 0B0H     ; 1011 0000
        OUT CTRL        ; Port A = Mode 1 Input
        
        ; Enable interrupt for Port A
        MVI A, 09H      ; BSR: Set PC4 (INTE A)
        OUT CTRL
        
        ; Main program
MAIN:   ; Do other processing
        ; ...
        JMP MAIN
        
        ; Interrupt Service Routine
ISR:    IN  PORTA       ; Read key data
        ; Process key...
        EI
        RET
```

### 4.4 BSR Mode - Individual Bit Control

```asm
;------------------------------------------------
; BSR Mode: Control individual Port C bits
; Example: Traffic light control
;------------------------------------------------

CTRL    EQU 83H

; PC0 = Red, PC1 = Yellow, PC2 = Green

        ; Set Red ON (PC0 = 1)
        MVI A, 01H      ; 0000 0001 (Set PC0)
        OUT CTRL
        
        ; After delay, Yellow ON
        CALL DELAY
        MVI A, 00H      ; Reset PC0 (Red OFF)
        OUT CTRL
        MVI A, 03H      ; Set PC1 (Yellow ON)
        OUT CTRL
        
        ; After delay, Green ON
        CALL DELAY
        MVI A, 02H      ; Reset PC1 (Yellow OFF)
        OUT CTRL
        MVI A, 05H      ; Set PC2 (Green ON)
        OUT CTRL
```

### 4.5 8086 Example

```asm
;------------------------------------------------
; 8086: 8255 Mode 0 - Read switches, control LEDs
;------------------------------------------------
.MODEL SMALL
.STACK 100H

.DATA
    PORTA EQU 0300H
    PORTB EQU 0301H
    PORTC EQU 0302H
    CTRL  EQU 0303H

.CODE
MAIN PROC
    MOV AX, @DATA
    MOV DS, AX
    
    ; Initialize 8255
    MOV DX, CTRL
    MOV AL, 82H         ; PA=Out, PB=In, Mode 0
    OUT DX, AL
    
    ; Read-display loop
READ_LOOP:
    MOV DX, PORTB
    IN AL, DX           ; Read switches
    
    MOV DX, PORTA
    OUT DX, AL          ; Display on LEDs
    
    ; Check for ESC key (optional)
    MOV AH, 01H
    INT 16H
    JZ READ_LOOP
    
    MOV AH, 4CH
    INT 21H
MAIN ENDP
END MAIN
```

---

## 5. Interfacing Circuit

### 5.1 8255 with 8085

```
8085 to 8255 Interface:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

     8085                           8255
    â”Œâ”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”
    â”‚     â”‚  AD0-AD7               â”‚     â”‚
    â”‚ AD0 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ D0  â”‚
    â”‚  .  â”‚             â”‚          â”‚  .  â”‚
    â”‚ AD7 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 74LS373  â”‚ D7  â”‚
    â”‚     â”‚             â”‚ (Latch)  â”‚     â”‚
    â”‚ ALE â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ G        â”‚     â”‚
    â”‚     â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
    â”‚     â”‚                        â”‚     â”‚
    â”‚ A8  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ A0  â”‚
    â”‚ A9  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ A1  â”‚
    â”‚     â”‚                        â”‚     â”‚
    â”‚ RDÌ„  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ RDÌ„  â”‚
    â”‚ WRÌ„  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ WRÌ„  â”‚
    â”‚     â”‚                        â”‚     â”‚
    â”‚     â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚     â”‚
    â”‚ A15 â”œâ”€â”€â”€â”€â”€â”¤         â”‚        â”‚     â”‚
    â”‚ A14 â”œâ”€â”€â”€â”€â”€â”¤ Address â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤ CÌ„SÌ„  â”‚
    â”‚ A13 â”œâ”€â”€â”€â”€â”€â”¤ Decoder â”‚        â”‚     â”‚
    â”‚IO/MÌ„ â”œâ”€â”€â”€â”€â”€â”¤         â”‚        â”‚     â”‚
    â”‚     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚     â”‚
    â”‚     â”‚                        â”‚     â”‚
    â”‚RESETâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤RESETâ”‚
    â”‚ OUT â”‚         â”‚              â”‚     â”‚
    â””â”€â”€â”€â”€â”€â”˜         â”‚              â””â”€â”€â”€â”€â”€â”˜
                    â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Inverter    â”‚
            â”‚   (Active     â”‚
            â”‚   High RESET) â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Port Addresses (example with A15-A13 = 100):
â€¢ Port A:   80H (1000 0000)
â€¢ Port B:   81H (1000 0001)
â€¢ Port C:   82H (1000 0010)
â€¢ Control:  83H (1000 0011)
```

---

## ğŸ“‹ Summary Table

| Feature | Mode 0 | Mode 1 | Mode 2 |
|---------|--------|--------|--------|
| Port A | 8-bit I/O | 8-bit with handshake | Bidirectional |
| Port B | 8-bit I/O | 8-bit with handshake | Mode 0/1 |
| Port C | 2Ã—4-bit I/O | Handshake signals | 5 handshake + 3 I/O |
| Handshaking | No | Yes | Yes (both directions) |
| Interrupt | No | Yes | Yes |
| Applications | Simple I/O | Printer, Keyboard | Memory interface |

---

## â“ Quick Revision Questions

1. **What is the control word to configure Port A as input, Port B as output, all in Mode 0?**
   <details>
   <summary>Show Answer</summary>
   Control Word = 1001 0000 = 90H.
   D7=1 (I/O mode), D6-D5=00 (Mode 0 for A), D4=1 (Port A input), D3=0 (PC upper output), D2=0 (Mode 0 for B), D1=0 (Port B output), D0=0 (PC lower output).
   </details>

2. **How do you set PC3 to 1 using BSR mode?**
   <details>
   <summary>Show Answer</summary>
   BSR control word = 0000 0111 = 07H.
   D7=0 (BSR mode), D6-D4=XXX (don't care), D3-D1=011 (select PC3), D0=1 (set).
   </details>

3. **What happens to 8255 ports after RESET?**
   <details>
   <summary>Show Answer</summary>
   After RESET, all ports are configured as Mode 0 Input. This ensures safe power-up where the 8255 won't drive any external lines that might conflict with connected devices.
   </details>

4. **In Mode 1, what does IBF signal indicate?**
   <details>
   <summary>Show Answer</summary>
   IBF (Input Buffer Full) goes HIGH when data has been latched into the input port (after STBÌ„ goes LOW). It indicates that valid data is available for the CPU to read. IBF goes LOW when the CPU reads the port.
   </details>

5. **Can Port A and Port B work in different modes simultaneously?**
   <details>
   <summary>Show Answer</summary>
   Yes! Group A (Port A + PC upper) and Group B (Port B + PC lower) can be configured independently. For example, Port A can be in Mode 2 while Port B is in Mode 0 or Mode 1.
   </details>

6. **What is the difference between Mode 0 and Mode 1 output?**
   <details>
   <summary>Show Answer</summary>
   Mode 0: Simple output with no handshaking. Data written stays on port until changed.
   Mode 1: Output with handshaking. OBFÌ„ goes LOW when data is written, ACKÌ„ from device clears OBFÌ„ and generates INTR for next byte. This ensures device has read the data before new data is written.
   </details>

---

## ğŸ§­ Navigation

| Previous | Up | Next |
|----------|-----|------|
| [6.2 I/O Interfacing](02-io-interfacing.md) | [Unit 6 Index](README.md) | [6.4 8253 Timer](04-8253-timer.md) |

---

*[â† Previous: I/O Interfacing](02-io-interfacing.md) | [Next: 8253 Timer â†’](04-8253-timer.md)*

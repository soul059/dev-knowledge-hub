# Chapter 6.2: Stack Organization

## ğŸ“‹ Chapter Overview

A stack is a storage structure that operates on a Last-In-First-Out (LIFO) basis. This chapter covers both register stacks and memory stacks, PUSH/POP operations, and stack applications in CPU design.

---

## ğŸ¯ Learning Objectives

- Understand LIFO stack operation principles
- Differentiate between register and memory stacks
- Learn PUSH and POP microoperations
- Study stack applications in subroutines and expressions

---

## 1. Stack Fundamentals

### ğŸ“Œ LIFO Principle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STACK CONCEPT (LIFO)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Last-In, First-Out: Like a stack of plates                           â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   PUSH C    PUSH D    POP       POP       PUSH E                 â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”    â”Œâ”€â”€â”€â”     â”Œâ”€â”€â”€â”     â”Œâ”€â”€â”€â”     â”Œâ”€â”€â”€â”                  â”‚ â”‚
â”‚   â”‚   â”‚   â”‚    â”‚ D â”‚â—„SP  â”‚   â”‚     â”‚   â”‚     â”‚ E â”‚â—„SP               â”‚ â”‚
â”‚   â”‚   â”‚ C â”‚â—„SP â”œâ”€â”€â”€â”¤     â”‚ C â”‚â—„SP  â”‚   â”‚     â”œâ”€â”€â”€â”¤                  â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”¤    â”‚ C â”‚     â”œâ”€â”€â”€â”¤     â”‚ B â”‚â—„SP  â”‚ B â”‚                  â”‚ â”‚
â”‚   â”‚   â”‚ B â”‚    â”œâ”€â”€â”€â”¤     â”‚ B â”‚     â”œâ”€â”€â”€â”¤     â”œâ”€â”€â”€â”¤                  â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”¤    â”‚ B â”‚     â”œâ”€â”€â”€â”¤     â”‚ A â”‚     â”‚ A â”‚                  â”‚ â”‚
â”‚   â”‚   â”‚ A â”‚    â”œâ”€â”€â”€â”¤     â”‚ A â”‚     â””â”€â”€â”€â”˜     â””â”€â”€â”€â”˜                  â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”˜    â”‚ A â”‚     â””â”€â”€â”€â”˜                                       â”‚ â”‚
â”‚   â”‚            â””â”€â”€â”€â”˜                 Returns:                        â”‚ â”‚
â”‚   â”‚                                  D then C                        â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   SP (Stack Pointer): Always points to the TOP of the stack     â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Key Properties:                                                        â”‚
â”‚   â€¢ PUSH: Add item to top, SP moves up                                  â”‚
â”‚   â€¢ POP: Remove item from top, SP moves down                            â”‚
â”‚   â€¢ Only the top element is accessible                                  â”‚
â”‚   â€¢ SP tracks the current top position                                  â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Register Stack

### ğŸ“Œ Register Stack Organization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REGISTER STACK (64 Ã— 16-bit)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Address    Stack Contents                                       â”‚ â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚      0       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                     â”‚ â”‚
â”‚   â”‚      1       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                     â”‚ â”‚
â”‚   â”‚      2       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                     â”‚ â”‚
â”‚   â”‚      3       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                     â”‚ â”‚
â”‚   â”‚      :              :                                             â”‚ â”‚
â”‚   â”‚              â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                     â”‚ â”‚
â”‚   â”‚    SP-1      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â† Previously pushed value         â”‚ â”‚
â”‚   â”‚    SP  â”€â”€â”€â”€â–º â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â† TOP (most recent)               â”‚ â”‚
â”‚   â”‚    SP+1      ________________                                     â”‚ â”‚
â”‚   â”‚              ________________                                     â”‚ â”‚
â”‚   â”‚      :              :                                             â”‚ â”‚
â”‚   â”‚     62       ________________                                     â”‚ â”‚
â”‚   â”‚     63       ________________                                     â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Control Registers:                                              â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚   â”‚   â”‚   SP    â”‚  6-bit Stack Pointer (0-63)                      â”‚ â”‚ â”‚
â”‚   â”‚   â”‚   FULL  â”‚  1-bit flag: 1 when stack is full (SP = 63)     â”‚ â”‚ â”‚
â”‚   â”‚   â”‚   EMPTY â”‚  1-bit flag: 1 when stack is empty (SP = 0)     â”‚ â”‚ â”‚
â”‚   â”‚   â”‚   DR    â”‚  16-bit Data Register (for push/pop data)       â”‚ â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Stack Pointer Behavior (grows upward):                                â”‚
â”‚   â€¢ Empty stack: SP = 0 (points to first location)                     â”‚
â”‚   â€¢ After first PUSH: SP = 0, then SP = 1                              â”‚
â”‚   â€¢ Full stack: SP = 63, FULL = 1                                      â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Œ PUSH and POP Operations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PUSH/POP MICROOPERATIONS                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   PUSH Operation:                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Condition: FULL' (stack not full)                              â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Microoperations:                                                â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚   â”‚   â”‚   SP â† SP + 1           ; Increment stack pointer          â”‚ â”‚ â”‚
â”‚   â”‚   â”‚   M[SP] â† DR            ; Write data to new top            â”‚ â”‚ â”‚
â”‚   â”‚   â”‚   If (SP = 63): FULL â† 1  ; Set full flag                  â”‚ â”‚ â”‚
â”‚   â”‚   â”‚   EMPTY â† 0             ; Stack definitely not empty       â”‚ â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Before PUSH      After PUSH (DR = 50)                          â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”                                       â”‚ â”‚
â”‚   â”‚   â”‚     â”‚          â”‚ 50  â”‚â—„â”€SP (new top)                        â”‚ â”‚
â”‚   â”‚   â”‚ 30  â”‚â—„â”€SP      â”œâ”€â”€â”€â”€â”€â”¤                                       â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”¤          â”‚ 30  â”‚                                       â”‚ â”‚
â”‚   â”‚   â”‚ 20  â”‚          â”œâ”€â”€â”€â”€â”€â”¤                                       â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”¤          â”‚ 20  â”‚                                       â”‚ â”‚
â”‚   â”‚   â”‚ 10  â”‚          â”œâ”€â”€â”€â”€â”€â”¤                                       â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”˜          â”‚ 10  â”‚                                       â”‚ â”‚
â”‚   â”‚                    â””â”€â”€â”€â”€â”€â”˜                                       â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   POP Operation:                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Condition: EMPTY' (stack not empty)                            â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Microoperations:                                                â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚   â”‚   â”‚   DR â† M[SP]            ; Read top of stack                â”‚ â”‚ â”‚
â”‚   â”‚   â”‚   SP â† SP - 1           ; Decrement stack pointer          â”‚ â”‚ â”‚
â”‚   â”‚   â”‚   If (SP = 0): EMPTY â† 1  ; Set empty flag                 â”‚ â”‚ â”‚
â”‚   â”‚   â”‚   FULL â† 0              ; Stack definitely not full        â”‚ â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Before POP       After POP (DR receives 50)                    â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”                                       â”‚ â”‚
â”‚   â”‚   â”‚ 50  â”‚â—„â”€SP      â”‚     â”‚                                       â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”¤          â”‚ 30  â”‚â—„â”€SP (new top)                        â”‚ â”‚
â”‚   â”‚   â”‚ 30  â”‚          â”œâ”€â”€â”€â”€â”€â”¤                                       â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”¤          â”‚ 20  â”‚                                       â”‚ â”‚
â”‚   â”‚   â”‚ 20  â”‚          â”œâ”€â”€â”€â”€â”€â”¤                                       â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”¤          â”‚ 10  â”‚                                       â”‚ â”‚
â”‚   â”‚   â”‚ 10  â”‚          â””â”€â”€â”€â”€â”€â”˜                                       â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”˜          DR = 50                                       â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Memory Stack

### ğŸ“Œ Memory Stack Organization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MEMORY STACK ORGANIZATION                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Stack implemented in main memory (more common in real systems)        â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Memory Map (Stack grows DOWNWARD):                             â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Address                     Content                            â”‚ â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚ â”‚
â”‚   â”‚   0000                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”‚
â”‚   â”‚                               â”‚      Program        â”‚            â”‚ â”‚
â”‚   â”‚                               â”‚      Code           â”‚            â”‚ â”‚
â”‚   â”‚                               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚ â”‚
â”‚   â”‚                               â”‚      Data           â”‚            â”‚ â”‚
â”‚   â”‚                               â”‚      Area           â”‚            â”‚ â”‚
â”‚   â”‚                               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚ â”‚
â”‚   â”‚                               â”‚                     â”‚            â”‚ â”‚
â”‚   â”‚                               â”‚      Heap           â”‚            â”‚ â”‚
â”‚   â”‚                               â”‚        â†“            â”‚            â”‚ â”‚
â”‚   â”‚                               â”‚   (grows down)      â”‚            â”‚ â”‚
â”‚   â”‚                               â”‚                     â”‚            â”‚ â”‚
â”‚   â”‚                               â”‚        â†‘            â”‚            â”‚ â”‚
â”‚   â”‚                               â”‚   (grows up)        â”‚            â”‚ â”‚
â”‚   â”‚   SP (e.g., 3000) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚      Stack          â”‚            â”‚ â”‚
â”‚   â”‚                               â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚ â”‚
â”‚   â”‚   SP+1 (3001)                 â”‚   â”‚ Second item     â”‚            â”‚ â”‚
â”‚   â”‚                               â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚ â”‚
â”‚   â”‚   SP+2 (3002)                 â”‚   â”‚ First item      â”‚            â”‚ â”‚
â”‚   â”‚                               â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚ â”‚
â”‚   â”‚   STACK_BOTTOM (e.g., 4000) â”€â–ºâ”‚   â”‚ (Stack limit)   â”‚            â”‚ â”‚
â”‚   â”‚   FFFF                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Notes:                                                         â”‚ â”‚
â”‚   â”‚   â€¢ Stack grows toward LOWER addresses (downward in diagram)     â”‚ â”‚
â”‚   â”‚   â€¢ SP points to TOP (most recently pushed item)                â”‚ â”‚
â”‚   â”‚   â€¢ PUSH: SP â† SP - 1, then M[SP] â† data                        â”‚ â”‚
â”‚   â”‚   â€¢ POP:  data â† M[SP], then SP â† SP + 1                        â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Œ Memory Stack PUSH/POP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MEMORY STACK OPERATIONS                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   PUSH (Stack grows downward):                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   SP â† SP - 1           ; Decrement SP first                    â”‚ â”‚
â”‚   â”‚   M[SP] â† Data          ; Then write data                        â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Or equivalently: M[--SP] â† Data                                â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Before          After PUSH X                                   â”‚ â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚ â”‚
â”‚   â”‚                   â”‚     X     â”‚â—„â”€ SP (decremented)              â”‚ â”‚
â”‚   â”‚   â”‚   Top   â”‚â—„â”€SP â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                 â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚   Top     â”‚                                 â”‚ â”‚
â”‚   â”‚   â”‚  ...    â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                 â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   ...     â”‚                                 â”‚ â”‚
â”‚   â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   POP (Stack grows downward):                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Data â† M[SP]          ; Read data first                        â”‚ â”‚
â”‚   â”‚   SP â† SP + 1           ; Then increment SP                      â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Or equivalently: Data â† M[SP++]                                â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Before          After POP (â†’ Data)                             â”‚ â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚ â”‚
â”‚   â”‚   â”‚   X     â”‚â—„â”€SP â”‚ (invalid)  â”‚                                â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â—„â”€ SP (incremented)             â”‚ â”‚
â”‚   â”‚   â”‚   Y     â”‚     â”‚     Y      â”‚                                â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                â”‚ â”‚
â”‚   â”‚   â”‚  ...    â”‚     â”‚    ...     â”‚                                â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚ â”‚
â”‚   â”‚                   Data = X                                       â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Stack Overflow/Underflow:                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   PUSH: Check if SP - 1 < STACK_LIMIT  (overflow)               â”‚ â”‚
â”‚   â”‚   POP:  Check if SP = STACK_BOTTOM     (underflow/empty)        â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Stack Comparison

### ğŸ“Œ Register Stack vs Memory Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REGISTER vs MEMORY STACK                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚   Aspect          â”‚ Register Stack    â”‚ Memory Stack           â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚   Location        â”‚ Inside CPU        â”‚ Main Memory            â”‚   â”‚
â”‚   â”‚   Speed           â”‚ Very fast         â”‚ Slower (memory access) â”‚   â”‚
â”‚   â”‚   Size            â”‚ Limited (32-64    â”‚ Large (limited by      â”‚   â”‚
â”‚   â”‚                   â”‚ words typical)    â”‚ available memory)      â”‚   â”‚
â”‚   â”‚   Cost            â”‚ Expensive         â”‚ Cheaper per bit        â”‚   â”‚
â”‚   â”‚   Growth Dir      â”‚ Usually upward    â”‚ Usually downward       â”‚   â”‚
â”‚   â”‚   SP Width        â”‚ Small (5-6 bits)  â”‚ Full address width     â”‚   â”‚
â”‚   â”‚   Full/Empty      â”‚ Hardware flags    â”‚ Compare with limits    â”‚   â”‚
â”‚   â”‚   Usage           â”‚ Temporary storage â”‚ Subroutines, locals    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚   Why Memory Stack Grows Downward?                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Historical convention:                                          â”‚ â”‚
â”‚   â”‚   â€¢ Code starts at low addresses                                 â”‚ â”‚
â”‚   â”‚   â€¢ Heap (dynamic data) grows upward                             â”‚ â”‚
â”‚   â”‚   â€¢ Stack placed at high end, grows down                         â”‚ â”‚
â”‚   â”‚   â€¢ They grow toward each other, maximizing space use            â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Low Address:                                                   â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚ â”‚
â”‚   â”‚   â”‚     Code         â”‚                                           â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                           â”‚ â”‚
â”‚   â”‚   â”‚     Static Data  â”‚                                           â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                           â”‚ â”‚
â”‚   â”‚   â”‚     Heap    â†“    â”‚  Grows downward                          â”‚ â”‚
â”‚   â”‚   â”‚                  â”‚                                           â”‚ â”‚
â”‚   â”‚   â”‚     Free Space   â”‚                                           â”‚ â”‚
â”‚   â”‚   â”‚                  â”‚                                           â”‚ â”‚
â”‚   â”‚   â”‚     Stack   â†‘    â”‚  Grows upward (toward lower addresses)   â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚ â”‚
â”‚   â”‚   High Address:                                                  â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Stack Applications

### ğŸ“Œ Subroutine Calls

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SUBROUTINE CALL/RETURN                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   CALL instruction:                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   CALL SUB    ; Call subroutine at address SUB                   â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Microoperations:                                                â”‚ â”‚
â”‚   â”‚   SP â† SP - 1           ; Make room on stack                     â”‚ â”‚
â”‚   â”‚   M[SP] â† PC            ; Save return address                    â”‚ â”‚
â”‚   â”‚   PC â† SUB              ; Jump to subroutine                     â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   RET (Return) instruction:                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   RET         ; Return from subroutine                           â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Microoperations:                                                â”‚ â”‚
â”‚   â”‚   PC â† M[SP]            ; Restore return address                 â”‚ â”‚
â”‚   â”‚   SP â† SP + 1           ; Pop from stack                         â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Nested Calls Example:                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Main:                                                          â”‚ â”‚
â”‚   â”‚   100: ...                                                       â”‚ â”‚
â”‚   â”‚   101: CALL A      ; Push 102, jump to A                        â”‚ â”‚
â”‚   â”‚   102: ...         â† Return here from A                         â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   A:                                                             â”‚ â”‚
â”‚   â”‚   200: ...                                                       â”‚ â”‚
â”‚   â”‚   201: CALL B      ; Push 202, jump to B                        â”‚ â”‚
â”‚   â”‚   202: ...         â† Return here from B                         â”‚ â”‚
â”‚   â”‚   203: RET         ; Pop 102, return to Main                    â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   B:                                                             â”‚ â”‚
â”‚   â”‚   300: ...                                                       â”‚ â”‚
â”‚   â”‚   301: RET         ; Pop 202, return to A                       â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Stack evolution:                                                â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚ â”‚
â”‚   â”‚   â”‚ At 101  â”‚ At 201  â”‚ At 301  â”‚ At 203  â”‚ At 102  â”‚           â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚ â”‚
â”‚   â”‚   â”‚         â”‚  202 â—„SPâ”‚         â”‚         â”‚         â”‚           â”‚ â”‚
â”‚   â”‚   â”‚  102 â—„SPâ”‚  102    â”‚  102 â—„SPâ”‚         â”‚         â”‚           â”‚ â”‚
â”‚   â”‚   â”‚         â”‚         â”‚         â”‚ (empty) â”‚ (empty) â”‚           â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Œ Expression Evaluation (Reverse Polish Notation)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STACK-BASED EXPRESSION EVALUATION                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Infix:   (A + B) * (C - D)                                            â”‚
â”‚   RPN:     A B + C D - *                                                â”‚
â”‚                                                                          â”‚
â”‚   Evaluation using stack (A=3, B=4, C=10, D=5):                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Token â”‚ Action              â”‚ Stack (top at right)             â”‚ â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚ â”‚
â”‚   â”‚     A   â”‚ PUSH 3              â”‚ [ 3 ]                            â”‚ â”‚
â”‚   â”‚     B   â”‚ PUSH 4              â”‚ [ 3, 4 ]                         â”‚ â”‚
â”‚   â”‚     +   â”‚ POP 4, POP 3        â”‚ [ ]                              â”‚ â”‚
â”‚   â”‚         â”‚ PUSH (3+4)=7        â”‚ [ 7 ]                            â”‚ â”‚
â”‚   â”‚     C   â”‚ PUSH 10             â”‚ [ 7, 10 ]                        â”‚ â”‚
â”‚   â”‚     D   â”‚ PUSH 5              â”‚ [ 7, 10, 5 ]                     â”‚ â”‚
â”‚   â”‚     -   â”‚ POP 5, POP 10       â”‚ [ 7 ]                            â”‚ â”‚
â”‚   â”‚         â”‚ PUSH (10-5)=5       â”‚ [ 7, 5 ]                         â”‚ â”‚
â”‚   â”‚     *   â”‚ POP 5, POP 7        â”‚ [ ]                              â”‚ â”‚
â”‚   â”‚         â”‚ PUSH (7*5)=35       â”‚ [ 35 ]                           â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Result = 35                                                    â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Stack Machine Instructions:                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   PUSH A    ; Push value of A onto stack                        â”‚ â”‚
â”‚   â”‚   PUSH B    ; Push value of B onto stack                        â”‚ â”‚
â”‚   â”‚   ADD       ; Pop two, push sum (zero-address!)                 â”‚ â”‚
â”‚   â”‚   PUSH C                                                         â”‚ â”‚
â”‚   â”‚   PUSH D                                                         â”‚ â”‚
â”‚   â”‚   SUB       ; Pop two, push difference                          â”‚ â”‚
â”‚   â”‚   MUL       ; Pop two, push product                             â”‚ â”‚
â”‚   â”‚   POP Z     ; Store result in Z                                 â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Note: ADD, SUB, MUL have NO address field (zero-address)     â”‚ â”‚
â”‚   â”‚         Operands are implicit (top two stack items)             â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Stack Frame (Activation Record)

### ğŸ“Œ Subroutine Stack Frame

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STACK FRAME STRUCTURE                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Stack frame: Memory area for a subroutine's local data               â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Low Address                                                     â”‚ â”‚
â”‚   â”‚        â”‚                                                          â”‚ â”‚
â”‚   â”‚        â–¼                                                          â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚ â”‚
â”‚   â”‚   â”‚ Local Variables      â”‚â—„â”€â”€ SP (Stack Pointer)                 â”‚ â”‚
â”‚   â”‚   â”‚ (temp1, temp2, ...)  â”‚                                       â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                       â”‚ â”‚
â”‚   â”‚   â”‚ Saved Registers      â”‚                                       â”‚ â”‚
â”‚   â”‚   â”‚ (R1, R2, ...)        â”‚                                       â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                       â”‚ â”‚
â”‚   â”‚   â”‚ Old Frame Pointer    â”‚â—„â”€â”€ FP (Frame Pointer / Base Pointer) â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                       â”‚ â”‚
â”‚   â”‚   â”‚ Return Address       â”‚                                       â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                       â”‚ â”‚
â”‚   â”‚   â”‚ Parameters           â”‚                                       â”‚ â”‚
â”‚   â”‚   â”‚ (arg1, arg2, ...)    â”‚                                       â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                       â”‚ â”‚
â”‚   â”‚   â”‚ Caller's Frame       â”‚                                       â”‚ â”‚
â”‚   â”‚   â”‚                      â”‚                                       â”‚ â”‚
â”‚   â”‚        â–¼                                                          â”‚ â”‚
â”‚   â”‚   High Address                                                    â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   FP provides stable reference point:                            â”‚ â”‚
â”‚   â”‚   â€¢ Parameters at FP+offset                                      â”‚ â”‚
â”‚   â”‚   â€¢ Local vars at FP-offset                                      â”‚ â”‚
â”‚   â”‚   â€¢ SP may change; FP stays fixed within subroutine             â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Function Prologue (entry):                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚   PUSH FP           ; Save old frame pointer                     â”‚ â”‚
â”‚   â”‚   MOV FP, SP        ; FP = current SP                            â”‚ â”‚
â”‚   â”‚   SUB SP, N         ; Allocate N bytes for locals               â”‚ â”‚
â”‚   â”‚   PUSH R1, R2, ...  ; Save registers to be used                 â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Function Epilogue (exit):                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚   POP R2, R1, ...   ; Restore registers                          â”‚ â”‚
â”‚   â”‚   MOV SP, FP        ; Deallocate locals                          â”‚ â”‚
â”‚   â”‚   POP FP            ; Restore old frame pointer                  â”‚ â”‚
â”‚   â”‚   RET               ; Return to caller                           â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Summary Table

| Concept | Register Stack | Memory Stack |
|---------|---------------|--------------|
| **Location** | Inside CPU (registers) | Main memory |
| **Speed** | Very fast | Slower |
| **Size** | Limited (32-64 words) | Large |
| **Growth** | Typically upward | Typically downward |
| **PUSH** | SP++, M[SP]â†data | SP--, M[SP]â†data |
| **POP** | dataâ†M[SP], SP-- | dataâ†M[SP], SP++ |
| **Overflow Check** | SP = MAX | SP < LIMIT |
| **Underflow Check** | SP = 0 or EMPTY flag | SP = BOTTOM |

---

## â“ Quick Revision Questions

1. **Q**: What does LIFO stand for and why is it important for stacks?
   
   **A**: Last-In, First-Out. The last item pushed is the first to be popped. This makes stacks ideal for tracking nested operations like subroutine calls, where the most recent call must return first.

2. **Q**: In a memory stack that grows downward, how is PUSH implemented?
   
   **A**: First decrement SP (SP â† SP - 1), then store data at SP (M[SP] â† data). The stack grows toward lower addresses.

3. **Q**: Why is a Frame Pointer (FP) used in addition to the Stack Pointer (SP)?
   
   **A**: FP provides a stable reference point within a stack frame. While SP changes as local values are pushed/popped, FP remains fixed, making it easier to access parameters and local variables at fixed offsets.

4. **Q**: How does a stack-based computer evaluate A B + C D - *?
   
   **A**: Push A, Push B, Pop both and push A+B, Push C, Push D, Pop both and push C-D, Pop both and push (A+B)*(C-D). Result is (A+B)*(C-D).

5. **Q**: What is a stack overflow and when does it occur?
   
   **A**: Stack overflow occurs when pushing onto a full stack. In memory stacks, it happens when SP would exceed the stack's allocated memory region (SP < STACK_LIMIT), potentially corrupting other data.

6. **Q**: Why is CALL instruction implemented using a stack rather than storing return address in a fixed location?
   
   **A**: Stacks support nested and recursive calls. Each call pushes its return address, and returns happen in reverse order (LIFO), ensuring each subroutine returns to its correct caller.

---

## ğŸ§­ Navigation

| Previous | Up | Next |
|----------|-----|------|
| [General Register Organization](01-general-register-organization.md) | [Unit 6 Home](README.md) | [Addressing Modes](03-addressing-modes.md) |

---

[â† Previous Chapter](01-general-register-organization.md) | [Course Home](../README.md) | [Next Chapter â†’](03-addressing-modes.md)

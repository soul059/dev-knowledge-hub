# Chapter 10.3: Direct Memory Access (DMA)

## ğŸ“‹ Chapter Overview

Direct Memory Access allows I/O devices to transfer data directly to/from memory without CPU intervention for each byte. This chapter covers DMA controller architecture, transfer modes, and bus arbitration.

---

## ğŸ¯ Learning Objectives

- Understand why DMA is needed
- Learn DMA controller architecture
- Master DMA transfer modes
- Analyze bus arbitration mechanisms

---

## 1. DMA Concept

### ğŸ“Œ Why DMA?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DMA MOTIVATION                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Problem with Interrupt-Driven I/O:                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   CPU must handle every byte transferred:                        â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   For 1 MB disk read at 100 MB/s:                               â”‚ â”‚
â”‚   â”‚   â€¢ Transfer time = 10 ms                                        â”‚ â”‚
â”‚   â”‚   â€¢ 1,000,000 bytes = 1,000,000 interrupts (1 per byte)!        â”‚ â”‚
â”‚   â”‚   â€¢ At 1000 cycles/interrupt = 1 billion cycles!                â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Interrupt overhead dominates CPU time                         â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   CPU:  â”‚ISRâ”‚ISRâ”‚ISRâ”‚ISRâ”‚ISRâ”‚ISRâ”‚ ... Ã— 1,000,000               â”‚ â”‚
â”‚   â”‚         â””â”¬â”€â”˜â””â”¬â”€â”˜â””â”¬â”€â”˜â””â”¬â”€â”˜â””â”¬â”€â”˜â””â”¬â”€â”˜                                â”‚ â”‚
â”‚   â”‚          1   2   3   4   5   6   bytes                          â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   DMA Solution:                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Transfer entire block with single CPU setup/interrupt:        â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   CPU: â”‚Setupâ”‚          Do Other Work            â”‚ISRâ”‚           â”‚ â”‚
â”‚   â”‚              â”‚                                   â”‚               â”‚ â”‚
â”‚   â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚ â”‚
â”‚   â”‚              DMA handles all 1,000,000 bytes                    â”‚ â”‚
â”‚   â”‚              (Only 2 CPU interventions!)                        â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   CPU overhead reduced by factor of 500,000!                    â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Œ DMA vs Programmed/Interrupt I/O

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    I/O DATA PATH COMPARISON                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Programmed/Interrupt I/O:                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚      Device â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º CPU â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Memory       â”‚ â”‚
â”‚   â”‚                   (1)              (2)                            â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Every byte goes through CPU registers                         â”‚ â”‚
â”‚   â”‚   Step 1: Device â†’ CPU register                                 â”‚ â”‚
â”‚   â”‚   Step 2: CPU register â†’ Memory                                 â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   CPU is bottleneck for all transfers                          â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   DMA I/O:                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚                        Setup & Interrupt                         â”‚ â”‚
â”‚   â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ â”‚
â”‚   â”‚                    â”‚                        â”‚                    â”‚ â”‚
â”‚   â”‚                    â–¼                        â”‚                    â”‚ â”‚
â”‚   â”‚      Device â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º DMA â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Memory    â”‚ â”‚
â”‚   â”‚                Controller                                        â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Data bypasses CPU entirely!                                   â”‚ â”‚
â”‚   â”‚   CPU only involved in setup and completion                     â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. DMA Controller Architecture

### ğŸ“Œ DMAC Block Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DMA CONTROLLER ARCHITECTURE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚                     System Bus                                   â”‚ â”‚
â”‚   â”‚   â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚ â”‚
â”‚   â”‚           â”‚             â”‚                                        â”‚ â”‚
â”‚   â”‚           â”‚             â”‚                                        â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚   â”‚   â”‚                DMA CONTROLLER                               â”‚ â”‚ â”‚
â”‚   â”‚   â”‚                                                             â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â”‚ Address Registerâ”‚    â”‚  Byte Count     â”‚                â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â”‚ (Start Address) â”‚    â”‚  Register       â”‚                â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â”‚    0x10000      â”‚    â”‚    0x1000       â”‚                â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ â”‚ â”‚
â”‚   â”‚   â”‚          â”‚ (increments)         â”‚ (decrements)             â”‚ â”‚ â”‚
â”‚   â”‚   â”‚          â”‚                      â”‚                          â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â”‚ Control Registerâ”‚    â”‚ Status Register â”‚                â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â”‚ â€¢ Direction     â”‚    â”‚ â€¢ Transfer Done â”‚                â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â”‚ â€¢ Mode          â”‚    â”‚ â€¢ Error         â”‚                â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â”‚ â€¢ Enable        â”‚    â”‚ â€¢ Channel Activeâ”‚                â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ â”‚ â”‚
â”‚   â”‚   â”‚                                                             â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â”‚               DMA Control Logic                      â”‚   â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â”‚  â€¢ Bus Request/Grant                                 â”‚   â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â”‚  â€¢ Address Generation                                â”‚   â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â”‚  â€¢ Read/Write Control                                â”‚   â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â”‚  â€¢ Transfer Complete Detection                       â”‚   â”‚ â”‚ â”‚
â”‚   â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚
â”‚   â”‚   â”‚                                                             â”‚ â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚   â”‚           â”‚                        â”‚                              â”‚ â”‚
â”‚   â”‚           â–¼                        â–¼                              â”‚ â”‚
â”‚   â”‚       Bus Request              DRQ (Device                        â”‚ â”‚
â”‚   â”‚       to CPU                   Ready)                             â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Key Registers:                                                        â”‚
â”‚   â€¢ Address Register: Current memory address for transfer              â”‚
â”‚   â€¢ Byte Count: Number of bytes remaining                              â”‚
â”‚   â€¢ Control: Direction (read/write), transfer mode, enable            â”‚
â”‚   â€¢ Status: Done, error, channel busy                                  â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Œ Multi-Channel DMA

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MULTI-CHANNEL DMAC                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚   â”‚   â”‚                  4-CHANNEL DMAC                             â”‚â”‚ â”‚
â”‚   â”‚   â”‚                                                             â”‚â”‚ â”‚
â”‚   â”‚   â”‚   Channel 0      Channel 1      Channel 2      Channel 3   â”‚â”‚ â”‚
â”‚   â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚ â”‚
â”‚   â”‚   â”‚  â”‚Addr Reg â”‚    â”‚Addr Reg â”‚    â”‚Addr Reg â”‚    â”‚Addr Reg â”‚ â”‚â”‚ â”‚
â”‚   â”‚   â”‚  â”‚Count Regâ”‚    â”‚Count Regâ”‚    â”‚Count Regâ”‚    â”‚Count Regâ”‚ â”‚â”‚ â”‚
â”‚   â”‚   â”‚  â”‚Control  â”‚    â”‚Control  â”‚    â”‚Control  â”‚    â”‚Control  â”‚ â”‚â”‚ â”‚
â”‚   â”‚   â”‚  â”‚Status   â”‚    â”‚Status   â”‚    â”‚Status   â”‚    â”‚Status   â”‚ â”‚â”‚ â”‚
â”‚   â”‚   â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚â”‚ â”‚
â”‚   â”‚   â”‚       â”‚              â”‚              â”‚              â”‚       â”‚â”‚ â”‚
â”‚   â”‚   â”‚       â”‚              â”‚              â”‚              â”‚       â”‚â”‚ â”‚
â”‚   â”‚   â”‚  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â” â”‚â”‚ â”‚
â”‚   â”‚   â”‚  â”‚              Priority / Arbitration                   â”‚ â”‚â”‚ â”‚
â”‚   â”‚   â”‚  â”‚  (Fixed Priority or Round-Robin)                     â”‚ â”‚â”‚ â”‚
â”‚   â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚ â”‚
â”‚   â”‚   â”‚                         â”‚                                  â”‚â”‚ â”‚
â”‚   â”‚   â”‚                         â–¼                                  â”‚â”‚ â”‚
â”‚   â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚ â”‚
â”‚   â”‚   â”‚  â”‚              Shared Bus Control Logic                 â”‚ â”‚â”‚ â”‚
â”‚   â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚ â”‚
â”‚   â”‚   â”‚                         â”‚                                  â”‚â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚   â”‚                             â”‚                                    â”‚ â”‚
â”‚   â”‚                             â–¼                                    â”‚ â”‚
â”‚   â”‚                        System Bus                               â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Typical Assignments:                                          â”‚ â”‚
â”‚   â”‚   â€¢ Channel 0: Floppy disk                                      â”‚ â”‚
â”‚   â”‚   â€¢ Channel 1: Sound card                                       â”‚ â”‚
â”‚   â”‚   â€¢ Channel 2: Cascade/refresh                                  â”‚ â”‚
â”‚   â”‚   â€¢ Channel 3: Hard disk                                        â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. DMA Transfer Modes

### ğŸ“Œ Burst Mode

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BURST MODE (BLOCK TRANSFER)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   DMA takes complete control of bus until entire block transferred     â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Timeline:                                                      â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Bus     â”‚         DMA Owns Bus                    â”‚  CPU      â”‚ â”‚
â”‚   â”‚   Owner   â”‚     (entire block transfer)             â”‚  resumes  â”‚ â”‚
â”‚   â”‚           â”‚                                         â”‚           â”‚ â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚   â”‚   CPU     â”‚                DMA                      â”‚   CPU     â”‚ â”‚
â”‚   â”‚           â–²                                         â–²           â”‚ â”‚
â”‚   â”‚           â”‚                                         â”‚           â”‚ â”‚
â”‚   â”‚       BR/BG                                     Done/Release    â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”‚
â”‚   â”‚   â”‚ B1 â”‚ B2 â”‚ B3 â”‚ B4 â”‚ B5 â”‚ ... â”‚ Bn-1 â”‚ Bn â”‚           â”‚     â”‚ â”‚
â”‚   â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚     â”‚ â”‚
â”‚   â”‚   â”‚       Continuous block transfer            â”‚           â”‚     â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Characteristics:                                               â”‚ â”‚
â”‚   â”‚   âœ“ Fastest transfer rate (no bus release overhead)             â”‚ â”‚
â”‚   â”‚   âœ“ Best for high-speed sequential transfers                   â”‚ â”‚
â”‚   â”‚   âœ— CPU blocked for entire transfer duration                   â”‚ â”‚
â”‚   â”‚   âœ— May cause latency for other devices                        â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Use: Disk I/O, large memory copies                            â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Œ Cycle Stealing Mode

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CYCLE STEALING MODE                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   DMA "steals" one bus cycle at a time, then returns bus to CPU        â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Timeline:                                                      â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Bus     â”‚     CPU/DMA alternating per word                    â”‚ â”‚
â”‚   â”‚   Owner   â”‚                                                      â”‚ â”‚
â”‚   â”‚           â”‚                                                      â”‚ â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚   â”‚           â”‚ D â”‚ C â”‚ D â”‚ C â”‚ D â”‚ C â”‚ D â”‚ C â”‚ D â”‚ C â”‚ D â”‚        â”‚ â”‚
â”‚   â”‚           â”‚ M â”‚ P â”‚ M â”‚ P â”‚ M â”‚ P â”‚ M â”‚ P â”‚ M â”‚ P â”‚ M â”‚        â”‚ â”‚
â”‚   â”‚           â”‚ A â”‚ U â”‚ A â”‚ U â”‚ A â”‚ U â”‚ A â”‚ U â”‚ A â”‚ U â”‚ A â”‚        â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚   â”‚   â”‚ B1 â”‚   â”‚ B2 â”‚   â”‚ B3 â”‚   â”‚ B4 â”‚   â”‚ B5 â”‚   â”‚           â”‚   â”‚ â”‚
â”‚   â”‚   â”‚    â”‚CPUâ”‚    â”‚CPUâ”‚    â”‚CPUâ”‚    â”‚CPUâ”‚    â”‚CPUâ”‚           â”‚   â”‚ â”‚
â”‚   â”‚   â”‚    â”‚   â”‚    â”‚   â”‚    â”‚   â”‚    â”‚   â”‚    â”‚   â”‚           â”‚   â”‚ â”‚
â”‚   â”‚   â”‚    â”‚wk â”‚    â”‚wk â”‚    â”‚wk â”‚    â”‚wk â”‚    â”‚wk â”‚           â”‚   â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Characteristics:                                               â”‚ â”‚
â”‚   â”‚   âœ“ CPU can continue working (with slowdown)                   â”‚ â”‚
â”‚   â”‚   âœ“ Lower latency for CPU operations                           â”‚ â”‚
â”‚   â”‚   âœ— Slower transfer than burst mode                            â”‚ â”‚
â”‚   â”‚   âœ— Bus arbitration overhead per word                          â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   CPU slowdown â‰ˆ 50% during active transfer                    â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Use: Background transfers, audio streaming                    â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Œ Transparent Mode

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TRANSPARENT MODE                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   DMA uses bus only when CPU doesn't need it                           â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Timeline:                                                      â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   CPU      â”‚ Fetch â”‚Executeâ”‚ Fetch â”‚Executeâ”‚ Fetch â”‚Executeâ”‚    â”‚ â”‚
â”‚   â”‚   Activity â”‚       â”‚       â”‚       â”‚       â”‚       â”‚       â”‚    â”‚ â”‚
â”‚   â”‚            â–¼       â–¼       â–¼       â–¼       â–¼       â–¼       â–¼    â”‚ â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€ â”‚ â”‚
â”‚   â”‚            â”‚  DMA  â”‚       â”‚  DMA  â”‚       â”‚  DMA  â”‚       â”‚    â”‚ â”‚
â”‚   â”‚            â”‚       â”‚       â”‚       â”‚       â”‚       â”‚       â”‚    â”‚ â”‚
â”‚   â”‚                â–²               â–²               â–²                â”‚ â”‚
â”‚   â”‚           Bus idle        Bus idle        Bus idle              â”‚ â”‚
â”‚   â”‚           (CPU in         (CPU in         (CPU in               â”‚ â”‚
â”‚   â”‚           execute         execute         execute               â”‚ â”‚
â”‚   â”‚           phase)          phase)          phase)                â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   DMA controller monitors bus and transfers during idle cycles  â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Characteristics:                                               â”‚ â”‚
â”‚   â”‚   âœ“ No CPU slowdown (transfers during idle)                    â”‚ â”‚
â”‚   â”‚   âœ“ Best CPU utilization                                       â”‚ â”‚
â”‚   â”‚   âœ— Slowest transfer rate                                      â”‚ â”‚
â”‚   â”‚   âœ— Complex hardware (must detect idle cycles)                 â”‚ â”‚
â”‚   â”‚   âœ— Transfer time unpredictable                                â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Use: Non-time-critical background operations                  â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Bus Arbitration

### ğŸ“Œ Centralized Arbitration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BUS ARBITRATION METHODS                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Problem: Multiple devices (CPU, DMA, other masters) want bus         â”‚
â”‚   Solution: Arbitration decides who gets bus access                    â”‚
â”‚                                                                          â”‚
â”‚   Centralized - Daisy Chain:                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   CPU (Arbiter)                                                  â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚ â”‚
â”‚   â”‚   â”‚        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Bus Request (OR of all)     â”‚ â”‚
â”‚   â”‚   â”‚        â”‚                                                     â”‚ â”‚
â”‚   â”‚   â”‚        â”‚â”€â”€â”€â”€â”€â”€â” Bus Grant                                   â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                                              â”‚ â”‚
â”‚   â”‚                   â–¼                                              â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”‚
â”‚   â”‚   â”‚ Dev 0  â”‚â”€â”€â–ºâ”‚ Dev 1  â”‚â”€â”€â–ºâ”‚ Dev 2  â”‚â”€â”€â–ºâ”‚ Dev 3  â”‚            â”‚ â”‚
â”‚   â”‚   â”‚(High P)â”‚   â”‚        â”‚   â”‚        â”‚   â”‚(Low P) â”‚            â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   If Dev 0 needs bus: blocks grant, takes bus                   â”‚ â”‚
â”‚   â”‚   If Dev 0 doesn't: passes grant to Dev 1                       â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   âœ“ Simple, low wire count                                      â”‚ â”‚
â”‚   â”‚   âœ— Fixed priority (starvation possible)                        â”‚ â”‚
â”‚   â”‚   âœ— Slow grant propagation                                      â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Centralized - Parallel (Independent Requests):                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  BR0â”€â”€â–ºâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â—„â”€â”€BG0  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚
â”‚   â”‚   â”‚ Dev 0  â”‚        â”‚                  â”‚        â”‚        â”‚      â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  BR1â”€â”€â–ºâ”‚   Bus Arbiter    â”‚â—„â”€â”€BG1  â”‚ Dev 1  â”‚      â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ (Priority Logic) â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚
â”‚   â”‚   â”‚ Dev 2  â”‚  BR2â”€â”€â–ºâ”‚                  â”‚â—„â”€â”€BG2  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  BR3â”€â”€â–ºâ”‚                  â”‚â—„â”€â”€BG3  â”‚ Dev 3  â”‚      â”‚ â”‚
â”‚   â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Each device has dedicated request/grant lines                 â”‚ â”‚
â”‚   â”‚   Arbiter selects based on programmable priority               â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   âœ“ Fast (parallel decision)                                   â”‚ â”‚
â”‚   â”‚   âœ“ Programmable priority                                      â”‚ â”‚
â”‚   â”‚   âœ— More wires (2n for n devices)                              â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Œ Bus Request/Grant Handshake

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BUS REQUEST/GRANT TIMING                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   CPU                         DMA Controller                     â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Bus Request (BR) â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (1) Request bus            â”‚ â”‚
â”‚   â”‚              â”‚                                                    â”‚ â”‚
â”‚   â”‚              â–¼                                                    â”‚ â”‚
â”‚   â”‚   (2) CPU finishes                                               â”‚ â”‚
â”‚   â”‚   current bus cycle                                              â”‚ â”‚
â”‚   â”‚              â”‚                                                    â”‚ â”‚
â”‚   â”‚              â–¼                                                    â”‚ â”‚
â”‚   â”‚   Bus Grant (BG)  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º (3) Receive grant           â”‚ â”‚
â”‚   â”‚              â”‚                              â”‚                     â”‚ â”‚
â”‚   â”‚              â–¼                              â–¼                     â”‚ â”‚
â”‚   â”‚   (4) CPU tristates                 (5) DMA takes control        â”‚ â”‚
â”‚   â”‚   its bus drivers                   of bus, starts transfer      â”‚ â”‚
â”‚   â”‚              â”‚                              â”‚                     â”‚ â”‚
â”‚   â”‚              â–¼                              â–¼                     â”‚ â”‚
â”‚   â”‚   (6) CPU waits...             (7) DMA does transfer(s)         â”‚ â”‚
â”‚   â”‚              â”‚                              â”‚                     â”‚ â”‚
â”‚   â”‚              â–¼                              â–¼                     â”‚ â”‚
â”‚   â”‚   BR deasserted â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (8) DMA releases bus          â”‚ â”‚
â”‚   â”‚              â”‚                                                    â”‚ â”‚
â”‚   â”‚              â–¼                                                    â”‚ â”‚
â”‚   â”‚   (9) BG deasserted                                              â”‚ â”‚
â”‚   â”‚   (10) CPU resumes                                               â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Timing Diagram:                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   BR  â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚ â”‚
â”‚   â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   BG  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚ â”‚
â”‚   â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Bus Owner:  CPU  â”‚        DMA (transfers)       â”‚    CPU       â”‚ â”‚
â”‚   â”‚                    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. DMA Transfer Process

### ğŸ“Œ Complete DMA Operation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DMA TRANSFER SEQUENCE                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Phase 1: Setup (by CPU)                                        â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â”‚   1. CPU writes to DMA registers:                      â”‚   â”‚ â”‚
â”‚   â”‚   â”‚      â€¢ Starting memory address                         â”‚   â”‚ â”‚
â”‚   â”‚   â”‚      â€¢ Byte count (number of bytes to transfer)        â”‚   â”‚ â”‚
â”‚   â”‚   â”‚      â€¢ Direction (read from device / write to device)  â”‚   â”‚ â”‚
â”‚   â”‚   â”‚      â€¢ Transfer mode (burst/cycle stealing)            â”‚   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â”‚   2. CPU enables DMA channel                           â”‚   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â”‚   3. CPU continues other work                          â”‚   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚   â”‚                          â”‚                                       â”‚ â”‚
â”‚   â”‚                          â–¼                                       â”‚ â”‚
â”‚   â”‚   Phase 2: Transfer (by DMA)                                    â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â”‚   4. Device signals DRQ (Data Request) when ready      â”‚   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â”‚   5. DMA requests bus (BR signal)                      â”‚   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â”‚   6. CPU grants bus (BG signal)                        â”‚   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â”‚   7. DMA performs transfer:                            â”‚   â”‚ â”‚
â”‚   â”‚   â”‚      â€¢ Places address on address bus                   â”‚   â”‚ â”‚
â”‚   â”‚   â”‚      â€¢ Generates read/write signals                    â”‚   â”‚ â”‚
â”‚   â”‚   â”‚      â€¢ Data flows between device and memory            â”‚   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â”‚   8. After each transfer:                              â”‚   â”‚ â”‚
â”‚   â”‚   â”‚      â€¢ Address register incremented                    â”‚   â”‚ â”‚
â”‚   â”‚   â”‚      â€¢ Byte count decremented                          â”‚   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â”‚   9. Repeat until byte count = 0                       â”‚   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚   â”‚                          â”‚                                       â”‚ â”‚
â”‚   â”‚                          â–¼                                       â”‚ â”‚
â”‚   â”‚   Phase 3: Completion                                           â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â”‚   10. DMA releases bus                                 â”‚   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â”‚   11. DMA sets "Transfer Complete" flag                â”‚   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â”‚   12. DMA generates interrupt to CPU                   â”‚   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â”‚   13. CPU ISR handles completion:                      â”‚   â”‚ â”‚
â”‚   â”‚   â”‚       â€¢ Check for errors                               â”‚   â”‚ â”‚
â”‚   â”‚   â”‚       â€¢ Process transferred data                       â”‚   â”‚ â”‚
â”‚   â”‚   â”‚       â€¢ Start next transfer if needed                  â”‚   â”‚ â”‚
â”‚   â”‚   â”‚                                                         â”‚   â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. DMA Configurations

### ğŸ“Œ Fly-By vs Memory-to-Memory

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DMA CONFIGURATIONS                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Fly-By (Single Address) DMA:                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   DMA provides memory address only                               â”‚ â”‚
â”‚   â”‚   Device implicitly connected to data bus                       â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚ â”‚
â”‚   â”‚           â”‚   DMA   â”‚â”€â”€â”€â”€â”€â”€â–º Address Bus â”€â”€â”€â”€â”€â”€â”                â”‚ â”‚
â”‚   â”‚           â”‚         â”‚                          â”‚                â”‚ â”‚
â”‚   â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â–¼                â”‚ â”‚
â”‚   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚ â”‚
â”‚   â”‚                                          â”‚  Memory  â”‚           â”‚ â”‚
â”‚   â”‚                                          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜           â”‚ â”‚
â”‚   â”‚                                                â”‚                â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚                â”‚ â”‚
â”‚   â”‚   â”‚  Device  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          Data Bus (direct)                       â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   One bus cycle per transfer                                    â”‚ â”‚
â”‚   â”‚   Fast, but device must be on system bus                       â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Memory-to-Memory (Dual Address) DMA:                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   DMA has two address registers (source and destination)        â”‚ â”‚
â”‚   â”‚   Can copy between any two memory locations                     â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”‚
â”‚   â”‚   â”‚                        DMA                             â”‚     â”‚ â”‚
â”‚   â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚     â”‚ â”‚
â”‚   â”‚   â”‚   â”‚Source Addr â”‚              â”‚ Dest Addr  â”‚          â”‚     â”‚ â”‚
â”‚   â”‚   â”‚   â”‚  0x1000    â”‚              â”‚  0x2000    â”‚          â”‚     â”‚ â”‚
â”‚   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â”‚     â”‚ â”‚
â”‚   â”‚   â”‚          â”‚                           â”‚                â”‚     â”‚ â”‚
â”‚   â”‚   â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                â”‚     â”‚ â”‚
â”‚   â”‚   â”‚          â”‚  â”‚   Temp Register     â”‚  â”‚                â”‚     â”‚ â”‚
â”‚   â”‚   â”‚          â”‚  â”‚   (holds 1 word)    â”‚  â”‚                â”‚     â”‚ â”‚
â”‚   â”‚   â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                â”‚     â”‚ â”‚
â”‚   â”‚   â”‚          â”‚                           â”‚                â”‚     â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚
â”‚   â”‚              â–¼                           â–¼                       â”‚ â”‚
â”‚   â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚ â”‚
â”‚   â”‚        â”‚  Source  â”‚               â”‚   Dest   â”‚                  â”‚ â”‚
â”‚   â”‚        â”‚  Memory  â”‚               â”‚  Memory  â”‚                  â”‚ â”‚
â”‚   â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Cycle 1: Read from source â†’ temp register                    â”‚ â”‚
â”‚   â”‚   Cycle 2: Write from temp register â†’ destination              â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Two bus cycles per word (slower)                              â”‚ â”‚
â”‚   â”‚   Useful for memory copies without CPU                         â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Summary Table

| DMA Mode | Bus Usage | CPU Impact | Speed | Use Case |
|----------|-----------|------------|-------|----------|
| Burst | Continuous | Blocked during transfer | Fastest | Disk I/O, large blocks |
| Cycle Stealing | Alternating | ~50% slowdown | Medium | Audio, video streaming |
| Transparent | CPU idle only | None | Slowest | Low-priority background |

| Aspect | Programmed I/O | Interrupt I/O | DMA |
|--------|----------------|---------------|-----|
| CPU overhead/byte | High | Medium | Very Low |
| Hardware complexity | Simple | Medium | Complex |
| Transfer rate | CPU-limited | ISR-limited | Bus speed |
| Setup overhead | Low | Low | Higher |
| Best for | Simple, slow devices | Moderate data rates | High-speed bulk |

---

## â“ Quick Revision Questions

1. **Q**: Why is DMA more efficient than interrupt-driven I/O for large transfers?
   
   **A**: DMA transfers data directly between device and memory without CPU intervention for each byte. CPU only handles setup and completion interrupt, eliminating thousands of context switches.

2. **Q**: What registers does a DMA controller typically contain?
   
   **A**: Address register (current memory address), byte count register (remaining bytes), control register (direction, mode, enable), and status register (done, error, busy).

3. **Q**: What is cycle stealing mode?
   
   **A**: DMA transfers one word at a time, releasing bus between each word so CPU can continue working. Provides balance between transfer speed and CPU availability.

4. **Q**: How does bus arbitration work in daisy chain configuration?
   
   **A**: Bus grant signal passes through devices in series. Device needing bus blocks grant from propagating, taking control. Devices closer to arbiter have higher priority.

5. **Q**: What is the difference between fly-by and memory-to-memory DMA?
   
   **A**: Fly-by uses single address (DMA addresses memory, device directly on data bus, one cycle/transfer). Memory-to-memory has two addresses and temp register (reads source, writes destination, two cycles/word).

6. **Q**: What happens when DMA transfer completes?
   
   **A**: DMA releases bus, sets transfer complete flag in status register, and generates interrupt. CPU ISR checks for errors, processes data, and may initiate next transfer.

---

## ğŸ§­ Navigation

| Previous | Up | Next |
|----------|-----|------|
| [I/O Techniques](02-io-techniques.md) | [Unit 10 Home](README.md) | [I/O Processors](04-io-processors.md) |

---

[â† Previous Chapter](02-io-techniques.md) | [Course Home](../README.md) | [Next Chapter â†’](04-io-processors.md)

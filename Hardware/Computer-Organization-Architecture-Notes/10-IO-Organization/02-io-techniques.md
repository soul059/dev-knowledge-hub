# Chapter 10.2: I/O Techniques

## ğŸ“‹ Chapter Overview

This chapter explores the fundamental techniques for data transfer between CPU and I/O devices: programmed I/O, interrupt-driven I/O, and polling. Understanding these techniques is essential for designing efficient I/O systems.

---

## ğŸ¯ Learning Objectives

- Understand programmed I/O operation
- Master interrupt-driven I/O concepts
- Compare polling vs interrupts
- Analyze CPU overhead in different I/O methods

---

## 1. Programmed I/O

### ğŸ“Œ Basic Concept

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PROGRAMMED I/O                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Definition: CPU directly controls I/O operations through software    â”‚
â”‚   CPU initiates, monitors, and completes all I/O transfers            â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   CPU Polling Loop for Input:                                    â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚ â”‚
â”‚   â”‚   â”‚   START         â”‚                                            â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚ â”‚
â”‚   â”‚            â”‚                                                      â”‚ â”‚
â”‚   â”‚            â–¼                                                      â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚ â”‚
â”‚   â”‚   â”‚ Read Status     â”‚                                            â”‚ â”‚
â”‚   â”‚   â”‚ Register        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚                      â”‚ â”‚
â”‚   â”‚            â”‚                              â”‚                      â”‚ â”‚
â”‚   â”‚            â–¼                              â”‚                      â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    No              â”‚                      â”‚ â”‚
â”‚   â”‚   â”‚  Data Ready?    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚ â”‚
â”‚   â”‚            â”‚ Yes                                                  â”‚ â”‚
â”‚   â”‚            â–¼                                                      â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚ â”‚
â”‚   â”‚   â”‚ Read Data       â”‚                                            â”‚ â”‚
â”‚   â”‚   â”‚ Register        â”‚                                            â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚ â”‚
â”‚   â”‚            â”‚                                                      â”‚ â”‚
â”‚   â”‚            â–¼                                                      â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    No                                      â”‚ â”‚
â”‚   â”‚   â”‚  More Data?     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚                                â”‚ â”‚
â”‚   â”‚            â”‚ Yes                â”‚                                â”‚ â”‚
â”‚   â”‚            â–¼                    â–¼                                â”‚ â”‚
â”‚   â”‚       (loop back)         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ â”‚
â”‚   â”‚                           â”‚   DONE          â”‚                    â”‚ â”‚
â”‚   â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Pseudocode:                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚   while (count > 0) {                                            â”‚ â”‚
â”‚   â”‚       while ((STATUS_REG & READY_BIT) == 0)  // Busy wait       â”‚ â”‚
â”‚   â”‚           ;  // Do nothing, just keep checking                  â”‚ â”‚
â”‚   â”‚       DATA_REG = *buffer++;                   // Write data     â”‚ â”‚
â”‚   â”‚       count--;                                                   â”‚ â”‚
â”‚   â”‚   }                                                              â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Œ CPU Overhead Analysis

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PROGRAMMED I/O OVERHEAD                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Example: Keyboard Input at 10 characters/second                       â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Time between characters = 1/10 = 100 ms = 100,000 Î¼s          â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   If CPU runs at 1 GHz (1 ns per cycle):                        â”‚ â”‚
â”‚   â”‚   â€¢ 100,000 Î¼s = 100,000,000 ns                                 â”‚ â”‚
â”‚   â”‚   â€¢ CPU can execute 100 million cycles between characters!      â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   But with busy-wait polling:                                   â”‚ â”‚
â”‚   â”‚   â€¢ CPU spends most cycles checking status                      â”‚ â”‚
â”‚   â”‚   â€¢ Wasted cycles = (100M - useful work) â‰ˆ most of 100M        â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Timeline:                                                      â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚   â”‚   â”‚ Poll â”‚ Poll â”‚ Poll â”‚ ... â”‚ Poll â”‚ Poll â”‚ Read â”‚        â”‚   â”‚ â”‚
â”‚   â”‚   â”‚ â”€â”€â–º  â”‚ â”€â”€â–º  â”‚ â”€â”€â–º  â”‚     â”‚ â”€â”€â–º  â”‚ â”€â”€â–º  â”‚ Data â”‚        â”‚   â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Wasted Time â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€ Useful â”€â”˜         â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Characteristics:                                                      â”‚
â”‚   âœ“ Simple to implement                                                â”‚
â”‚   âœ“ No special hardware needed                                         â”‚
â”‚   âœ“ Low latency when device is ready                                  â”‚
â”‚   âœ— Wastes CPU time (busy waiting)                                    â”‚
â”‚   âœ— CPU cannot do other work while waiting                            â”‚
â”‚   âœ— Poor utilization for slow devices                                 â”‚
â”‚                                                                          â”‚
â”‚   Best for: Fast devices, simple embedded systems                      â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Interrupt-Driven I/O

### ğŸ“Œ Interrupt Concept

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INTERRUPT-DRIVEN I/O                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Key Idea: Device notifies CPU when ready (no polling needed)         â”‚
â”‚   CPU can do useful work while waiting for I/O                         â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Without Interrupts:                                            â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚   â”‚   â”‚ CPU: Pollâ”‚Pollâ”‚Pollâ”‚Pollâ”‚Pollâ”‚Pollâ”‚Pollâ”‚Readâ”‚Processâ”‚...  â”‚ â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€ Wasted â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   With Interrupts:                                               â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚   â”‚   â”‚ CPU: Useful Work A â”‚ Useful Work B â”‚INTâ”‚ISRâ”‚ Useful Work C â”‚ â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚   â”‚                                          â–²                        â”‚ â”‚
â”‚   â”‚                           Device signals: "Data ready!"          â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Interrupt Timeline:                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   User         â”‚ IRQ â”‚      ISR        â”‚        User Program      â”‚ â”‚
â”‚   â”‚   Program      â”‚     â”‚   (Handler)     â”‚         Resumed          â”‚ â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚   â”‚                â”‚     â”‚                 â”‚                          â”‚ â”‚
â”‚   â”‚   1. Running   â”‚  3  â”‚ 4. Save context â”‚ 7. Return from           â”‚ â”‚
â”‚   â”‚                â”‚     â”‚ 5. Handle I/O   â”‚    interrupt             â”‚ â”‚
â”‚   â”‚   2. Device    â”‚     â”‚ 6. Acknowledge  â”‚ 8. Restore context       â”‚ â”‚
â”‚   â”‚      ready     â”‚     â”‚    interrupt    â”‚ 9. Continue program      â”‚ â”‚
â”‚   â”‚                â”‚     â”‚                 â”‚                          â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Œ Interrupt Processing Steps

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INTERRUPT PROCESSING                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Hardware Steps:                                                â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚   â”‚   â”‚                                                             â”‚â”‚ â”‚
â”‚   â”‚   â”‚  1. Device asserts interrupt request (IRQ) line            â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â”‚                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â–¼                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚  2. CPU finishes current instruction                       â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â”‚                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â–¼                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚  3. CPU acknowledges interrupt (INTA)                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â”‚                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â–¼                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚  4. Device sends interrupt vector/ID                       â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â”‚                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â–¼                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚  5. CPU saves PC and status on stack                       â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â”‚                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â–¼                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚  6. CPU jumps to ISR via interrupt vector table            â”‚â”‚ â”‚
â”‚   â”‚   â”‚                                                             â”‚â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Software Steps (ISR):                                          â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚   â”‚   â”‚                                                             â”‚â”‚ â”‚
â”‚   â”‚   â”‚  7. Save additional registers                              â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â”‚                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â–¼                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚  8. Identify interrupt source (if shared)                  â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â”‚                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â–¼                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚  9. Service the interrupt (read/write data)                â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â”‚                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â–¼                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚ 10. Clear interrupt flag                                   â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â”‚                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â–¼                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚ 11. Restore registers                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â”‚                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚                      â–¼                                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚ 12. Return from interrupt (RETI/IRET)                      â”‚â”‚ â”‚
â”‚   â”‚   â”‚                                                             â”‚â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Œ Interrupt Vector Table

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INTERRUPT VECTOR TABLE                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Interrupt vector table maps interrupt numbers to handler addresses   â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Memory Layout:                                                 â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Address    â”‚ Vector â”‚ Handler Address  â”‚ Description           â”‚ â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚   â”‚   0x0000     â”‚   0    â”‚ 0x00001000       â”‚ Divide by Zero       â”‚ â”‚
â”‚   â”‚   0x0004     â”‚   1    â”‚ 0x00001200       â”‚ Debug                â”‚ â”‚
â”‚   â”‚   0x0008     â”‚   2    â”‚ 0x00001400       â”‚ NMI                  â”‚ â”‚
â”‚   â”‚   0x000C     â”‚   3    â”‚ 0x00001600       â”‚ Breakpoint           â”‚ â”‚
â”‚   â”‚   0x0010     â”‚   4    â”‚ 0x00001800       â”‚ Overflow             â”‚ â”‚
â”‚   â”‚   ...        â”‚   ...  â”‚ ...              â”‚ ...                  â”‚ â”‚
â”‚   â”‚   0x0020     â”‚   8    â”‚ 0x00002000       â”‚ Timer                â”‚ â”‚
â”‚   â”‚   0x0024     â”‚   9    â”‚ 0x00002200       â”‚ Keyboard             â”‚ â”‚
â”‚   â”‚   0x0028     â”‚  10    â”‚ 0x00002400       â”‚ Cascade (PIC2)       â”‚ â”‚
â”‚   â”‚   ...        â”‚   ...  â”‚ ...              â”‚ ...                  â”‚ â”‚
â”‚   â”‚   0x0080     â”‚  32    â”‚ User-defined     â”‚ System call          â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Jump to Handler:                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Interrupt occurs                                               â”‚ â”‚
â”‚   â”‚         â”‚                                                         â”‚ â”‚
â”‚   â”‚         â–¼                                                         â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚ â”‚
â”‚   â”‚   â”‚ Get vector # = 9â”‚  (e.g., keyboard)                         â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚ â”‚
â”‚   â”‚            â”‚                                                      â”‚ â”‚
â”‚   â”‚            â–¼                                                      â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚ â”‚
â”‚   â”‚   â”‚ Read IVT[9]     â”‚  IVT[9] = 0x0024                          â”‚ â”‚
â”‚   â”‚   â”‚ = 0x00002200    â”‚  Content: Address of keyboard handler     â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚ â”‚
â”‚   â”‚            â”‚                                                      â”‚ â”‚
â”‚   â”‚            â–¼                                                      â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚ â”‚
â”‚   â”‚   â”‚ Jump to         â”‚                                            â”‚ â”‚
â”‚   â”‚   â”‚ 0x00002200      â”‚â”€â”€â”€â–º Keyboard ISR                          â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Priority Interrupts

### ğŸ“Œ Interrupt Priority System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INTERRUPT PRIORITY                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Problem: Multiple devices may request interrupts simultaneously       â”‚
â”‚   Solution: Priority system determines which interrupt to service firstâ”‚
â”‚                                                                          â”‚
â”‚   Daisy Chain Priority:                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚
â”‚   â”‚   INTA   â”‚ Device â”‚   â”‚ Device â”‚   â”‚ Device â”‚   â”‚ Device â”‚      â”‚ â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â–ºâ”‚   0    â”‚â”€â”€â–ºâ”‚   1    â”‚â”€â”€â–ºâ”‚   2    â”‚â”€â”€â–ºâ”‚   3    â”‚      â”‚ â”‚
â”‚   â”‚          â”‚(High P)â”‚   â”‚        â”‚   â”‚        â”‚   â”‚(Low P) â”‚      â”‚ â”‚
â”‚   â”‚          â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â”‚ â”‚
â”‚   â”‚              â”‚            â”‚            â”‚            â”‚           â”‚ â”‚
â”‚   â”‚              â–¼            â–¼            â–¼            â–¼           â”‚ â”‚
â”‚   â”‚          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚ â”‚
â”‚   â”‚                          IRQ to CPU                             â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   If Device 0 is NOT requesting: passes INTA to Device 1       â”‚ â”‚
â”‚   â”‚   If Device 0 IS requesting: blocks INTA, responds to CPU      â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   âœ“ Simple hardware                                             â”‚ â”‚
â”‚   â”‚   âœ— Fixed priority                                              â”‚ â”‚
â”‚   â”‚   âœ— Slow propagation through chain                             â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Programmable Interrupt Controller (PIC):                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚          IR0â”€â”€â–ºâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚ â”‚
â”‚   â”‚          IR1â”€â”€â–ºâ”‚                      â”‚                          â”‚ â”‚
â”‚   â”‚          IR2â”€â”€â–ºâ”‚        PIC           â”‚       IRQ                â”‚ â”‚
â”‚   â”‚          IR3â”€â”€â–ºâ”‚   (Priority Logic)   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º CPU         â”‚ â”‚
â”‚   â”‚          IR4â”€â”€â–ºâ”‚   (Interrupt Mask)   â”‚                          â”‚ â”‚
â”‚   â”‚          IR5â”€â”€â–ºâ”‚   (Vector Generator) â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ INTA        â”‚ â”‚
â”‚   â”‚          IR6â”€â”€â–ºâ”‚                      â”‚                          â”‚ â”‚
â”‚   â”‚          IR7â”€â”€â–ºâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚ â”‚
â”‚   â”‚                         â–²                                        â”‚ â”‚
â”‚   â”‚                    Data Bus (programming)                        â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Features:                                                      â”‚ â”‚
â”‚   â”‚   â€¢ Programmable priorities (rotating, fixed)                   â”‚ â”‚
â”‚   â”‚   â€¢ Interrupt masking (enable/disable individual)               â”‚ â”‚
â”‚   â”‚   â€¢ Cascading (multiple PICs)                                   â”‚ â”‚
â”‚   â”‚   â€¢ Automatic vector generation                                 â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Œ Nested Interrupts

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NESTED INTERRUPTS                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Higher priority interrupt can preempt lower priority ISR             â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Priority:  Low (1)           Medium (2)          High (3)      â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Main â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€  â”‚ â”‚
â”‚   â”‚   Program  â”‚                                              â”‚      â”‚ â”‚
â”‚   â”‚            â–¼                                              â–²      â”‚ â”‚
â”‚   â”‚   ISR1 â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚
â”‚   â”‚            â”‚                                       â”‚             â”‚ â”‚
â”‚   â”‚            â–¼                                       â–²             â”‚ â”‚
â”‚   â”‚   ISR2 â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚ â”‚
â”‚   â”‚            â”‚                          â”‚                          â”‚ â”‚
â”‚   â”‚            â–¼                          â–²                          â”‚ â”‚
â”‚   â”‚   ISR3 â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Stack Frames:                                                  â”‚ â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚ â”‚
â”‚   â”‚   â”‚ ISR3 context      â”‚ â—„â”€â”€ SP during ISR3                      â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                          â”‚ â”‚
â”‚   â”‚   â”‚ ISR2 context      â”‚                                          â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                          â”‚ â”‚
â”‚   â”‚   â”‚ ISR1 context      â”‚                                          â”‚ â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                          â”‚ â”‚
â”‚   â”‚   â”‚ Main context      â”‚                                          â”‚ â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Rule: Only higher priority can interrupt lower priority       â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Polling vs Interrupts

### ğŸ“Œ Comparison

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    POLLING VS INTERRUPTS                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Polling:                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   for (;;) {                                                     â”‚ â”‚
â”‚   â”‚       if (device1_ready()) handle_device1();                    â”‚ â”‚
â”‚   â”‚       if (device2_ready()) handle_device2();                    â”‚ â”‚
â”‚   â”‚       if (device3_ready()) handle_device3();                    â”‚ â”‚
â”‚   â”‚       // ... check all devices in order                         â”‚ â”‚
â”‚   â”‚   }                                                              â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Time: â”€â”¬â”€Checkâ”€â”¬â”€Checkâ”€â”¬â”€Checkâ”€â”¬â”€Checkâ”€â”¬â”€Handleâ”€â”¬â”€Checkâ”€       â”‚ â”‚
â”‚   â”‚          â”‚  D1   â”‚  D2   â”‚  D3   â”‚  D1   â”‚  D1    â”‚  D2          â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Interrupts:                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   for (;;) {                                                     â”‚ â”‚
â”‚   â”‚       do_useful_work();    // No polling needed                 â”‚ â”‚
â”‚   â”‚   }                                                              â”‚ â”‚
â”‚   â”‚   // ISR automatically called when device ready                 â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Time: â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Useful Work â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€ISRâ”€â”¬â”€Workâ”€    â”‚ â”‚
â”‚   â”‚                                                 â”‚     â”‚          â”‚ â”‚
â”‚   â”‚                                              D1 signals ready   â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Comparison Table:                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Aspect           â”‚ Polling        â”‚ Interrupts                 â”‚ â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚   â”‚   CPU utilization  â”‚ Poor (busy)    â”‚ Good (productive)          â”‚ â”‚
â”‚   â”‚   Response time    â”‚ Variable       â”‚ Bounded                    â”‚ â”‚
â”‚   â”‚   Hardware         â”‚ Simple         â”‚ More complex               â”‚ â”‚
â”‚   â”‚   Programming      â”‚ Simple         â”‚ More complex               â”‚ â”‚
â”‚   â”‚   Overhead/event   â”‚ Low            â”‚ Higher (context switch)    â”‚ â”‚
â”‚   â”‚   Power            â”‚ Higher         â”‚ Lower (sleep possible)     â”‚ â”‚
â”‚   â”‚   Predictability   â”‚ Deterministic  â”‚ Less predictable           â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Œ When to Use Each Method

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHOOSING I/O METHOD                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Use Polling When:                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   â€¢ Device is very fast (data almost always ready)               â”‚ â”‚
â”‚   â”‚   â€¢ Simple microcontroller with limited interrupt support        â”‚ â”‚
â”‚   â”‚   â€¢ Tight real-time requirements (deterministic timing)          â”‚ â”‚
â”‚   â”‚   â€¢ Short polling loop (low overhead)                            â”‚ â”‚
â”‚   â”‚   â€¢ Single-tasking system                                        â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Example: High-speed ADC, SPI data transfer                    â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Use Interrupts When:                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   â€¢ Device is slow (keyboard, mouse)                            â”‚ â”‚
â”‚   â”‚   â€¢ Events are infrequent and unpredictable                     â”‚ â”‚
â”‚   â”‚   â€¢ CPU needs to do other work while waiting                    â”‚ â”‚
â”‚   â”‚   â€¢ Power consumption is important                               â”‚ â”‚
â”‚   â”‚   â€¢ Multi-tasking operating system                              â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Example: Network packets, disk completion, user input         â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Hybrid Approach (Interrupt + Polling):                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Use interrupt to wake up, then poll briefly                   â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   void network_isr() {                                          â”‚ â”‚
â”‚   â”‚       // Interrupt wakes us up                                  â”‚ â”‚
â”‚   â”‚       disable_interrupt();                                      â”‚ â”‚
â”‚   â”‚       while (packets_available()) {   // Poll briefly          â”‚ â”‚
â”‚   â”‚           process_packet();                                     â”‚ â”‚
â”‚   â”‚       }                                                          â”‚ â”‚
â”‚   â”‚       enable_interrupt();                                       â”‚ â”‚
â”‚   â”‚   }                                                              â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Common in network drivers (NAPI in Linux)                     â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Interrupt Latency

### ğŸ“Œ Measuring Interrupt Response

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INTERRUPT LATENCY                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Interrupt Latency = Time from interrupt signal to start of ISR       â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Components of Latency:                                         â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   IRQ  â”‚ Finish â”‚ Save â”‚ Vector â”‚ Jump â”‚  ISR                   â”‚ â”‚
â”‚   â”‚   â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”‚ â”‚
â”‚   â”‚        â”‚ Instr  â”‚ PC   â”‚ Lookup â”‚      â”‚  Starts                 â”‚ â”‚
â”‚   â”‚        â”‚        â”‚Statusâ”‚        â”‚      â”‚                         â”‚ â”‚
â”‚   â”‚   â—„â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¤                         â”‚ â”‚
â”‚   â”‚        t1       t2     t3       t4                               â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Total Latency = t1 + t2 + t3 + t4 + (pipeline flush)          â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Typical Values:                                                â”‚ â”‚
â”‚   â”‚   â€¢ t1 (complete instruction): 1-5 cycles                       â”‚ â”‚
â”‚   â”‚   â€¢ t2 (save state): 3-10 cycles                                â”‚ â”‚
â”‚   â”‚   â€¢ t3 (vector fetch): 2-4 cycles                               â”‚ â”‚
â”‚   â”‚   â€¢ t4 (jump): 2-5 cycles                                       â”‚ â”‚
â”‚   â”‚   â€¢ Pipeline flush: 5-15 cycles (on pipelined CPUs)             â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â”‚   Total: 10-40 cycles typical                                   â”‚ â”‚
â”‚   â”‚   At 1 GHz = 10-40 nanoseconds                                  â”‚ â”‚
â”‚   â”‚                                                                   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚   Factors Affecting Latency:                                           â”‚
â”‚   â€¢ Interrupt disabled periods (critical sections)                     â”‚
â”‚   â€¢ Higher priority interrupt in progress                              â”‚
â”‚   â€¢ Cache misses during vector fetch                                   â”‚
â”‚   â€¢ Memory access latency                                              â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Summary Table

| Technique | CPU Usage | Latency | Complexity | Best For |
|-----------|-----------|---------|------------|----------|
| Programmed I/O | Very High (busy wait) | Low when ready | Simple | Fast devices, simple systems |
| Polling | High | Variable | Simple | Multiple fast devices |
| Interrupt-Driven | Low | Bounded | Medium | Slow/unpredictable devices |
| Nested Interrupts | Low | Priority-based | Complex | Real-time systems |

| Component | Description |
|-----------|-------------|
| ISR | Interrupt Service Routine - handles interrupt |
| IVT | Interrupt Vector Table - maps vectors to ISR addresses |
| PIC | Programmable Interrupt Controller - manages priorities |
| IRQ | Interrupt Request line - device signals CPU |
| INTA | Interrupt Acknowledge - CPU responds to device |

---

## â“ Quick Revision Questions

1. **Q**: What is the main disadvantage of programmed I/O?
   
   **A**: CPU wastes time in busy-waiting loops while checking device status, unable to perform useful work. This is especially wasteful for slow devices.

2. **Q**: What happens when an interrupt occurs?
   
   **A**: CPU finishes current instruction, saves PC and status on stack, acknowledges interrupt, fetches handler address from IVT, and jumps to ISR. After ISR completes, context is restored and normal execution resumes.

3. **Q**: What is the purpose of an interrupt vector table?
   
   **A**: IVT is a table in memory that maps interrupt numbers to handler addresses. When interrupt n occurs, CPU reads address from IVT[n] and jumps to that ISR.

4. **Q**: How does daisy-chain priority work?
   
   **A**: Devices are connected in series. INTA signal passes through each device. A device requesting interrupt blocks INTA from propagating further, so devices closer to CPU have higher priority.

5. **Q**: When is polling preferred over interrupts?
   
   **A**: When device is very fast (data almost always ready), when deterministic timing is needed, in simple single-task systems, or when interrupt overhead exceeds polling overhead.

6. **Q**: What is interrupt latency and what affects it?
   
   **A**: Interrupt latency is time from interrupt signal to start of ISR. It's affected by: time to complete current instruction, state saving, vector lookup, pipeline flush, disabled interrupt periods, and higher priority interrupts.

---

## ğŸ§­ Navigation

| Previous | Up | Next |
|----------|-----|------|
| [I/O Interface](01-io-interface.md) | [Unit 10 Home](README.md) | [Direct Memory Access](03-dma.md) |

---

[â† Previous Chapter](01-io-interface.md) | [Course Home](../README.md) | [Next Chapter â†’](03-dma.md)

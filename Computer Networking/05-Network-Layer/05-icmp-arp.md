# Chapter 5.5: ICMP and ARP

[â† Back to Table of Contents](../README.md)

---

## ğŸ“š Chapter Overview

ICMP and ARP are essential supporting protocols that work alongside IP to ensure proper network communication. ICMP provides error reporting and diagnostics, while ARP resolves IP addresses to MAC addresses.

---

## ğŸ¯ Learning Objectives

- Understand ICMP's role in error reporting and diagnostics
- Learn common ICMP message types and their uses
- Master ARP operation for address resolution
- Explore practical applications: ping, traceroute

---

## 1. ICMP - Internet Control Message Protocol

### What is ICMP?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ICMP OVERVIEW                                    â”‚
â”‚                                                                     â”‚
â”‚    ICMP = Error reporting and diagnostic protocol                  â”‚
â”‚    "The network's way of saying something went wrong"              â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  KEY FACTS:                                                  â”‚ â”‚
â”‚    â”‚  â€¢ Network Layer protocol (but uses IP for delivery)        â”‚ â”‚
â”‚    â”‚  â€¢ IP Protocol Number: 1                                    â”‚ â”‚
â”‚    â”‚  â€¢ NOT used for data transfer                               â”‚ â”‚
â”‚    â”‚  â€¢ Provides feedback about problems                         â”‚ â”‚
â”‚    â”‚  â€¢ Used by diagnostic tools (ping, traceroute)              â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    ICMP MESSAGE ENCAPSULATION:                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚    â”‚  â”‚ Ethernet â”‚   IP Header    â”‚    ICMP Message        â”‚   â”‚ â”‚
â”‚    â”‚  â”‚ Header   â”‚  Protocol = 1  â”‚                         â”‚   â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  ICMP is encapsulated inside IP packets                     â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    WHEN ICMP IS GENERATED:                                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚  â€¢ Destination unreachable                                  â”‚ â”‚
â”‚    â”‚  â€¢ TTL expired (Time Exceeded)                              â”‚ â”‚
â”‚    â”‚  â€¢ Packet too large (fragmentation needed)                  â”‚ â”‚
â”‚    â”‚  â€¢ Network congestion (Source Quench - deprecated)          â”‚ â”‚
â”‚    â”‚  â€¢ Route changes (Redirect)                                 â”‚ â”‚
â”‚    â”‚  â€¢ Diagnostic queries (Echo Request/Reply)                  â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ICMP Message Format

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ICMP MESSAGE FORMAT                              â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚    0       8       16                      31                â”‚ â”‚
â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚ â”‚
â”‚    â”‚    â”‚ Type  â”‚ Code  â”‚      Checksum         â”‚                â”‚ â”‚
â”‚    â”‚    â”‚(8 bit)â”‚(8 bit)â”‚      (16 bits)        â”‚                â”‚ â”‚
â”‚    â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚ â”‚
â”‚    â”‚    â”‚                                       â”‚                â”‚ â”‚
â”‚    â”‚    â”‚     Rest of Header (32 bits)          â”‚                â”‚ â”‚
â”‚    â”‚    â”‚     (varies by message type)          â”‚                â”‚ â”‚
â”‚    â”‚    â”‚                                       â”‚                â”‚ â”‚
â”‚    â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚ â”‚
â”‚    â”‚    â”‚                                       â”‚                â”‚ â”‚
â”‚    â”‚    â”‚     Data Section (variable)           â”‚                â”‚ â”‚
â”‚    â”‚    â”‚     (often contains original packet)  â”‚                â”‚ â”‚
â”‚    â”‚    â”‚                                       â”‚                â”‚ â”‚
â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  TYPE: Indicates the message category                       â”‚ â”‚
â”‚    â”‚  CODE: Provides more specific information                   â”‚ â”‚
â”‚    â”‚  CHECKSUM: Error detection for ICMP message                 â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Common ICMP Message Types

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ICMP MESSAGE TYPES                               â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Type â”‚ Code â”‚ Description                                    â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  0   â”‚  0   â”‚ Echo Reply (ping response)                     â”‚  â”‚
â”‚  â”‚  3   â”‚  0   â”‚ Destination Unreachable: Network unreachable   â”‚  â”‚
â”‚  â”‚  3   â”‚  1   â”‚ Destination Unreachable: Host unreachable      â”‚  â”‚
â”‚  â”‚  3   â”‚  3   â”‚ Destination Unreachable: Port unreachable      â”‚  â”‚
â”‚  â”‚  3   â”‚  4   â”‚ Fragmentation needed but DF set                â”‚  â”‚
â”‚  â”‚  4   â”‚  0   â”‚ Source Quench (deprecated - congestion)        â”‚  â”‚
â”‚  â”‚  5   â”‚  0   â”‚ Redirect: Better route available               â”‚  â”‚
â”‚  â”‚  8   â”‚  0   â”‚ Echo Request (ping)                            â”‚  â”‚
â”‚  â”‚ 11   â”‚  0   â”‚ Time Exceeded: TTL expired in transit          â”‚  â”‚
â”‚  â”‚ 11   â”‚  1   â”‚ Time Exceeded: Fragment reassembly timeout     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚    DETAILED EXPLANATIONS:                                           â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  ECHO REQUEST/REPLY (Type 8/0):                             â”‚ â”‚
â”‚    â”‚  Used by ping to test reachability                          â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚ â”‚
â”‚    â”‚  â”‚ Host A  â”‚â”€â”€Echo Reqâ”€â”€â”€â†’â”‚ Host B  â”‚                       â”‚ â”‚
â”‚    â”‚  â”‚         â”‚â†â”€Echo Replyâ”€â”€â”‚         â”‚                       â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  DESTINATION UNREACHABLE (Type 3):                          â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚ â”‚
â”‚    â”‚  â”‚ Host A  â”‚â”€â”€â”€Packetâ”€â”€â”€â”€â†’â”‚ Router  â”‚â”€Xâ†’ [Unreachable]     â”‚ â”‚
â”‚    â”‚  â”‚         â”‚â†â”€Type 3 ICMPâ”€â”‚         â”‚                       â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  TIME EXCEEDED (Type 11):                                   â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     TTL=1    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚ â”‚
â”‚    â”‚  â”‚ Host A  â”‚â”€â”€â”€Packetâ”€â”€â”€â”€â†’â”‚ Router  â”‚  TTL=0, drop packet  â”‚ â”‚
â”‚    â”‚  â”‚         â”‚â†â”€Type 11 ICMPâ”‚         â”‚                       â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Ping and Traceroute

### Ping Operation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PING OPERATION                                   â”‚
â”‚                                                                     â”‚
â”‚    Ping uses ICMP Echo Request (Type 8) and Echo Reply (Type 0)   â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  ping 192.168.1.1                                           â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚   [Your PC]                               [Target Host]      â”‚ â”‚
â”‚    â”‚   192.168.1.100                           192.168.1.1        â”‚ â”‚
â”‚    â”‚       â”‚                                        â”‚             â”‚ â”‚
â”‚    â”‚       â”‚â”€â”€â”€â”€ ICMP Echo Request (Type 8) â”€â”€â”€â”€â”€â”€â”€â†’â”‚             â”‚ â”‚
â”‚    â”‚       â”‚     Seq=1, ID=1234                     â”‚             â”‚ â”‚
â”‚    â”‚       â”‚                                        â”‚             â”‚ â”‚
â”‚    â”‚       â”‚â†â”€â”€â”€ ICMP Echo Reply (Type 0) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚ â”‚
â”‚    â”‚       â”‚     Seq=1, ID=1234                     â”‚             â”‚ â”‚
â”‚    â”‚       â”‚                                        â”‚             â”‚ â”‚
â”‚    â”‚       â”‚â”€â”€â”€â”€ ICMP Echo Request (Type 8) â”€â”€â”€â”€â”€â”€â”€â†’â”‚             â”‚ â”‚
â”‚    â”‚       â”‚     Seq=2, ID=1234                     â”‚             â”‚ â”‚
â”‚    â”‚       â”‚                                        â”‚             â”‚ â”‚
â”‚    â”‚       â”‚â†â”€â”€â”€ ICMP Echo Reply (Type 0) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚ â”‚
â”‚    â”‚       â”‚     Seq=2, ID=1234                     â”‚             â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    PING OUTPUT EXAMPLE:                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚  C:\> ping 192.168.1.1                                      â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Pinging 192.168.1.1 with 32 bytes of data:                 â”‚ â”‚
â”‚    â”‚  Reply from 192.168.1.1: bytes=32 time=1ms TTL=64           â”‚ â”‚
â”‚    â”‚  Reply from 192.168.1.1: bytes=32 time=1ms TTL=64           â”‚ â”‚
â”‚    â”‚  Reply from 192.168.1.1: bytes=32 time=2ms TTL=64           â”‚ â”‚
â”‚    â”‚  Reply from 192.168.1.1: bytes=32 time=1ms TTL=64           â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Ping statistics for 192.168.1.1:                           â”‚ â”‚
â”‚    â”‚      Packets: Sent = 4, Received = 4, Lost = 0 (0% loss)    â”‚ â”‚
â”‚    â”‚  Approximate round trip times in milli-seconds:             â”‚ â”‚
â”‚    â”‚      Minimum = 1ms, Maximum = 2ms, Average = 1ms            â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    WHAT PING TELLS YOU:                                             â”‚
â”‚    âœ“ Host is reachable                                             â”‚
â”‚    âœ“ Round-trip time (latency)                                     â”‚
â”‚    âœ“ Packet loss percentage                                        â”‚
â”‚    âœ“ TTL (helps identify OS type)                                  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Traceroute Operation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TRACEROUTE OPERATION                             â”‚
â”‚                                                                     â”‚
â”‚    Traces the path to a destination using TTL manipulation        â”‚
â”‚    Uses ICMP Time Exceeded (Type 11) messages                     â”‚
â”‚                                                                     â”‚
â”‚    HOW IT WORKS:                                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  [Source]â”€â”€â”€[R1]â”€â”€â”€[R2]â”€â”€â”€[R3]â”€â”€â”€[Destination]              â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Step 1: Send packet with TTL=1                             â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  TTL=1   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚ â”‚
â”‚    â”‚  â”‚ Source â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚   R1   â”‚  TTL=0, dropped!            â”‚ â”‚
â”‚    â”‚  â”‚        â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚        â”‚  ICMP Time Exceeded         â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  (Reveals R1's IP)          â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Step 2: Send packet with TTL=2                             â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  TTL=2   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  TTL=1   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚ â”‚
â”‚    â”‚  â”‚ Source â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚   R1   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚   R2   â”‚         â”‚ â”‚
â”‚    â”‚  â”‚        â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚        â”‚          â”‚        â”‚         â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ â”‚
â”‚    â”‚            ICMP Time Exceeded    TTL=0, dropped!            â”‚ â”‚
â”‚    â”‚            (Reveals R2's IP)                                â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Step 3: Send packet with TTL=3                             â”‚ â”‚
â”‚    â”‚  ...continues until destination replies with Echo Reply    â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    TRACEROUTE OUTPUT EXAMPLE:                                       â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚  C:\> tracert google.com                                    â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Tracing route to google.com [142.250.185.46]               â”‚ â”‚
â”‚    â”‚  over a maximum of 30 hops:                                 â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚    1    1 ms    1 ms    1 ms  192.168.1.1                   â”‚ â”‚
â”‚    â”‚    2   12 ms   11 ms   10 ms  10.0.0.1                      â”‚ â”‚
â”‚    â”‚    3   15 ms   14 ms   14 ms  isp-router.example.com        â”‚ â”‚
â”‚    â”‚    4    *       *       *     Request timed out.            â”‚ â”‚
â”‚    â”‚    5   20 ms   19 ms   19 ms  core-router.example.com       â”‚ â”‚
â”‚    â”‚    6   25 ms   24 ms   25 ms  142.250.185.46                â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Trace complete.                                            â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    WHAT TRACEROUTE TELLS YOU:                                       â”‚
â”‚    âœ“ Path packets take to destination                              â”‚
â”‚    âœ“ Latency at each hop                                           â”‚
â”‚    âœ“ Where problems occur (packet loss, high latency)              â”‚
â”‚    âœ“ Number of hops to destination                                 â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ARP - Address Resolution Protocol

### Why ARP is Needed

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ARP - THE PROBLEM IT SOLVES                      â”‚
â”‚                                                                     â”‚
â”‚    THE PROBLEM:                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Application says: "Send data to 192.168.1.50"              â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  But Ethernet (Layer 2) only understands MAC addresses!     â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”‚
â”‚    â”‚  â”‚   Host A    â”‚     Ethernet LAN       â”‚   Host B    â”‚     â”‚ â”‚
â”‚    â”‚  â”‚             â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚             â”‚     â”‚ â”‚
â”‚    â”‚  â”‚IP: 192.168.1.10                      â”‚IP: 192.168.1.50   â”‚ â”‚
â”‚    â”‚  â”‚MAC: AA:AA:AAâ”‚                        â”‚MAC: BB:BB:BBâ”‚     â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  To send frame to Host B, Host A needs to know BB:BB:BB    â”‚ â”‚
â”‚    â”‚  But it only knows 192.168.1.50!                            â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  SOLUTION: ARP maps IP addresses to MAC addresses          â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    ARP KEY FACTS:                                                   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚  â€¢ Works only within the LOCAL network                      â”‚ â”‚
â”‚    â”‚  â€¢ Uses broadcast to find MAC addresses                     â”‚ â”‚
â”‚    â”‚  â€¢ Maintains ARP cache for efficiency                       â”‚ â”‚
â”‚    â”‚  â€¢ Operates between Layer 2 and Layer 3                     â”‚ â”‚
â”‚    â”‚  â€¢ Uses Ethertype 0x0806                                    â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ARP Operation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ARP OPERATION                                    â”‚
â”‚                                                                     â”‚
â”‚    Host A (192.168.1.10) wants to send to Host B (192.168.1.50)   â”‚
â”‚                                                                     â”‚
â”‚    STEP 1: Check ARP Cache                                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Host A checks its ARP cache:                               â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚ â”‚
â”‚    â”‚  â”‚        ARP CACHE (Host A)              â”‚                 â”‚ â”‚
â”‚    â”‚  â”‚ IP Address     â”‚ MAC Address   â”‚ Type  â”‚                 â”‚ â”‚
â”‚    â”‚  â”‚ 192.168.1.1    â”‚ CC:CC:CC...   â”‚Static â”‚                 â”‚ â”‚
â”‚    â”‚  â”‚ 192.168.1.20   â”‚ DD:DD:DD...   â”‚Dynamicâ”‚                 â”‚ â”‚
â”‚    â”‚  â”‚ 192.168.1.50   â”‚ ???           â”‚ ???   â”‚  â† NOT FOUND!  â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    STEP 2: Send ARP Request (Broadcast)                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚   [Host A]                                                   â”‚ â”‚
â”‚    â”‚      â”‚                                                       â”‚ â”‚
â”‚    â”‚      â”‚    ARP REQUEST (Broadcast)                           â”‚ â”‚
â”‚    â”‚      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚    â”‚      â”‚    â”‚ Dest MAC: FF:FF:FF:FF:FF:FF (Broadcast)â”‚        â”‚ â”‚
â”‚    â”‚      â”‚    â”‚ Src MAC:  AA:AA:AA:AA:AA:AA            â”‚        â”‚ â”‚
â”‚    â”‚      â”‚    â”‚ "Who has 192.168.1.50?"                â”‚        â”‚ â”‚
â”‚    â”‚      â”‚    â”‚ "Tell 192.168.1.10 (AA:AA...)"         â”‚        â”‚ â”‚
â”‚    â”‚      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚    â”‚      â†“                                                       â”‚ â”‚
â”‚    â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                  â”‚ â”‚
â”‚    â”‚      â†“              â†“              â†“                         â”‚ â”‚
â”‚    â”‚   [Host B]      [Host C]      [Host D]                      â”‚ â”‚
â”‚    â”‚   192.168.1.50  192.168.1.30  192.168.1.40                  â”‚ â”‚
â”‚    â”‚   "That's me!"  "Not me"      "Not me"                      â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    STEP 3: ARP Reply (Unicast)                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚   [Host B]                                                   â”‚ â”‚
â”‚    â”‚      â”‚                                                       â”‚ â”‚
â”‚    â”‚      â”‚    ARP REPLY (Unicast)                               â”‚ â”‚
â”‚    â”‚      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚    â”‚      â”‚    â”‚ Dest MAC: AA:AA:AA:AA:AA:AA            â”‚        â”‚ â”‚
â”‚    â”‚      â”‚    â”‚ Src MAC:  BB:BB:BB:BB:BB:BB            â”‚        â”‚ â”‚
â”‚    â”‚      â”‚    â”‚ "192.168.1.50 is at BB:BB:BB..."       â”‚        â”‚ â”‚
â”‚    â”‚      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚    â”‚      â†“                                                       â”‚ â”‚
â”‚    â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’[Host A]                     â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    STEP 4: Update ARP Cache and Send Data                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Host A updates its ARP cache:                              â”‚ â”‚
â”‚    â”‚  192.168.1.50 â†’ BB:BB:BB:BB:BB:BB                           â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Now Host A can send frames to Host B using MAC address!   â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ARP for Remote Hosts

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ARP FOR REMOTE DESTINATIONS                      â”‚
â”‚                                                                     â”‚
â”‚    When destination is on a DIFFERENT network                      â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  [Host A]                                      [Host B]      â”‚ â”‚
â”‚    â”‚  192.168.1.10/24                               10.0.0.50     â”‚ â”‚
â”‚    â”‚       â”‚                                             â”‚        â”‚ â”‚
â”‚    â”‚       â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚        â”‚ â”‚
â”‚    â”‚       â””â”€â”€â”€â”€â”€â”€â”‚   ROUTER    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚    â”‚              â”‚ 192.168.1.1 â”‚                                 â”‚ â”‚
â”‚    â”‚              â”‚   10.0.0.1  â”‚                                 â”‚ â”‚
â”‚    â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Host A wants to send to 10.0.0.50 (different network)      â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  PROCESS:                                                    â”‚ â”‚
â”‚    â”‚  1. A sees 10.0.0.50 is NOT on local network               â”‚ â”‚
â”‚    â”‚  2. A looks up its DEFAULT GATEWAY: 192.168.1.1             â”‚ â”‚
â”‚    â”‚  3. A sends ARP for ROUTER'S MAC (not destination)          â”‚ â”‚
â”‚    â”‚  4. A sends packet to router's MAC, with IP dest 10.0.0.50  â”‚ â”‚
â”‚    â”‚  5. Router forwards packet toward 10.0.0.50                 â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚    â”‚  â”‚ Ethernet Header:                                       â”‚ â”‚ â”‚
â”‚    â”‚  â”‚   Dest MAC: Router's MAC (not Host B's!)               â”‚ â”‚ â”‚
â”‚    â”‚  â”‚   Src MAC: Host A's MAC                                â”‚ â”‚ â”‚
â”‚    â”‚  â”‚                                                         â”‚ â”‚ â”‚
â”‚    â”‚  â”‚ IP Header:                                              â”‚ â”‚ â”‚
â”‚    â”‚  â”‚   Dest IP: 10.0.0.50 (Host B - unchanged)              â”‚ â”‚ â”‚
â”‚    â”‚  â”‚   Src IP: 192.168.1.10 (Host A - unchanged)            â”‚ â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  KEY CONCEPT:                                                â”‚ â”‚
â”‚    â”‚  MAC addresses change at each hop                           â”‚ â”‚
â”‚    â”‚  IP addresses stay the same end-to-end                      â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ARP Cache

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ARP CACHE                                        â”‚
â”‚                                                                     â”‚
â”‚    ARP cache stores recently resolved addresses                    â”‚
â”‚                                                                     â”‚
â”‚    VIEWING ARP CACHE:                                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚  Windows: arp -a                                            â”‚ â”‚
â”‚    â”‚  Linux:   arp -n  or  ip neigh                              â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  C:\> arp -a                                                â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Interface: 192.168.1.100 --- 0x5                           â”‚ â”‚
â”‚    â”‚    Internet Address    Physical Address    Type             â”‚ â”‚
â”‚    â”‚    192.168.1.1         00-1a-2b-3c-4d-5e   dynamic          â”‚ â”‚
â”‚    â”‚    192.168.1.50        00-11-22-33-44-55   dynamic          â”‚ â”‚
â”‚    â”‚    192.168.1.255       ff-ff-ff-ff-ff-ff   static           â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    ARP CACHE TYPES:                                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚  DYNAMIC: Learned through ARP                               â”‚ â”‚
â”‚    â”‚           Expires after timeout (usually 15-20 minutes)     â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  STATIC:  Manually configured                               â”‚ â”‚
â”‚    â”‚           Never expires, used for security                  â”‚ â”‚
â”‚    â”‚           Example: arp -s 192.168.1.1 00-1a-2b-3c-4d-5e    â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    ARP CACHE MANAGEMENT:                                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚  Clear entire cache:  arp -d *                              â”‚ â”‚
â”‚    â”‚  Delete specific:     arp -d 192.168.1.50                   â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Related Protocols

### Proxy ARP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PROXY ARP                                        â”‚
â”‚                                                                     â”‚
â”‚    Router answers ARP requests on behalf of other devices          â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚    Network A                      Network B                  â”‚ â”‚
â”‚    â”‚  192.168.1.0/24                 192.168.2.0/24              â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚   [Host A]                         [Host B]                  â”‚ â”‚
â”‚    â”‚  .1.10      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     .2.50                   â”‚ â”‚
â”‚    â”‚      â””â”€â”€â”€â”€â”€â”€â”‚     ROUTER      â”‚â”€â”€â”€â”€â”€â”€â”˜                      â”‚ â”‚
â”‚    â”‚             â”‚ .1.1      .2.1  â”‚                             â”‚ â”‚
â”‚    â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Host A ARPs for 192.168.2.50                               â”‚ â”‚
â”‚    â”‚  Router replies with ITS OWN MAC!                           â”‚ â”‚
â”‚    â”‚  "I can reach that, send it to me"                          â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  USE CASES:                                                  â”‚ â”‚
â”‚    â”‚  â€¢ Hosts without proper subnet masks                        â”‚ â”‚
â”‚    â”‚  â€¢ Network migration/transition                             â”‚ â”‚
â”‚    â”‚  â€¢ Usually disabled for security                            â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Gratuitous ARP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GRATUITOUS ARP                                   â”‚
â”‚                                                                     â”‚
â”‚    ARP for your OWN IP address (unsolicited announcement)         â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Device sends: "Who has 192.168.1.10?"                      â”‚ â”‚
â”‚    â”‚                 (That's MY IP address!)                      â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  PURPOSES:                                                   â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚    â”‚  â”‚ 1. Detect IP conflicts                                  â”‚â”‚ â”‚
â”‚    â”‚  â”‚    If someone replies, there's a duplicate!             â”‚â”‚ â”‚
â”‚    â”‚  â”‚                                                          â”‚â”‚ â”‚
â”‚    â”‚  â”‚ 2. Update other devices' ARP caches                     â”‚â”‚ â”‚
â”‚    â”‚  â”‚    After MAC change or failover                         â”‚â”‚ â”‚
â”‚    â”‚  â”‚                                                          â”‚â”‚ â”‚
â”‚    â”‚  â”‚ 3. Announce presence on network                         â”‚â”‚ â”‚
â”‚    â”‚  â”‚    After boot or interface up                           â”‚â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  SENT WHEN:                                                  â”‚ â”‚
â”‚    â”‚  â€¢ System boots up                                          â”‚ â”‚
â”‚    â”‚  â€¢ IP address is configured                                 â”‚ â”‚
â”‚    â”‚  â€¢ After HSRP/VRRP failover                                 â”‚ â”‚
â”‚    â”‚  â€¢ Virtual machine migration                                â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### RARP and Beyond

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ARP FAMILY                                       â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Protocol â”‚ Purpose                                          â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ARP      â”‚ IP â†’ MAC (most common)                           â”‚   â”‚
â”‚  â”‚ RARP     â”‚ MAC â†’ IP (obsolete, replaced by BOOTP/DHCP)      â”‚   â”‚
â”‚  â”‚ InARP    â”‚ MAC â†’ IP (used in Frame Relay)                   â”‚   â”‚
â”‚  â”‚ Proxy ARPâ”‚ Router answers for remote hosts                  â”‚   â”‚
â”‚  â”‚ GARP     â”‚ Announce own address, detect conflicts           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  IPv6 EQUIVALENT: NDP (Neighbor Discovery Protocol)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â€¢ Uses ICMPv6 instead of ARP                               â”‚   â”‚
â”‚  â”‚  â€¢ Neighbor Solicitation = ARP Request                      â”‚   â”‚
â”‚  â”‚  â€¢ Neighbor Advertisement = ARP Reply                       â”‚   â”‚
â”‚  â”‚  â€¢ More secure (can use encryption)                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Summary Table

| Protocol | Purpose | Layer | Message Type |
|----------|---------|-------|--------------|
| **ICMP** | Error reporting & diagnostics | Network (L3) | Echo, Dest Unreachable, Time Exceeded |
| **Ping** | Test reachability | Uses ICMP | Echo Request/Reply (Type 8/0) |
| **Traceroute** | Discover path | Uses ICMP | Time Exceeded (Type 11) |
| **ARP** | IP to MAC resolution | L2/L3 | Request (broadcast), Reply (unicast) |
| **RARP** | MAC to IP (obsolete) | L2/L3 | Replaced by DHCP |
| **NDP** | IPv6 neighbor discovery | L3 (ICMPv6) | Replaces ARP for IPv6 |

---

## â“ Quick Revision Questions

1. **Q:** What is the purpose of ICMP and why doesn't it carry user data?
   <details>
   <summary>Answer</summary>
   **Purpose**: ICMP (Internet Control Message Protocol) provides:
   - Error reporting (destination unreachable, TTL exceeded)
   - Network diagnostics (ping, traceroute)
   - Path MTU discovery
   
   **Why no user data**: ICMP is a control protocol, not a data transport protocol. It exists to help IP work correctly by reporting problems and providing diagnostic tools. User data is carried by TCP or UDP.
   </details>

2. **Q:** How does traceroute work?
   <details>
   <summary>Answer</summary>
   Traceroute exploits the **TTL (Time-To-Live)** field:
   
   1. Sends packet with TTL=1
   2. First router decrements to 0, drops packet, sends ICMP Time Exceeded
   3. Records router's IP address
   4. Sends packet with TTL=2
   5. Second router responds with Time Exceeded
   6. Continues until destination is reached (ICMP Echo Reply)
   
   Each hop is discovered by incrementing TTL and receiving Time Exceeded messages.
   </details>

3. **Q:** Why is ARP necessary?
   <details>
   <summary>Answer</summary>
   **The Problem**: 
   - Applications use IP addresses (Layer 3)
   - Ethernet uses MAC addresses (Layer 2)
   - Frames can't be delivered without destination MAC
   
   **The Solution**: ARP resolves IP addresses to MAC addresses
   - Broadcasts "Who has IP X?"
   - Device with that IP responds with its MAC
   - Sender caches the mapping
   
   Without ARP, hosts couldn't communicate on Ethernet!
   </details>

4. **Q:** What happens when ARP needs to resolve an address on a remote network?
   <details>
   <summary>Answer</summary>
   When the destination is on a **different network**:
   
   1. Host recognizes destination is not local (different subnet)
   2. Host ARPs for the **default gateway's MAC** (not the remote host)
   3. Host sends packet to router's MAC address
   4. IP header still contains remote destination IP
   5. Router receives frame, looks at IP destination
   6. Router forwards toward destination, repeating the process
   
   **Key Point**: MAC addresses change at each hop; IP addresses remain constant.
   </details>

5. **Q:** What is the difference between ICMP Type 8 and Type 0?
   <details>
   <summary>Answer</summary>
   **Type 8 = Echo Request**
   - Sent by the source (ping command)
   - "Are you there?"
   
   **Type 0 = Echo Reply**
   - Sent by the destination in response
   - "Yes, I'm here!"
   
   Together they form the **ping** operation:
   ```
   Source â†’ Echo Request (Type 8) â†’ Destination
   Source â† Echo Reply (Type 0) â† Destination
   ```
   
   If no reply, destination may be unreachable or blocking ICMP.
   </details>

6. **Q:** What is Gratuitous ARP and when is it used?
   <details>
   <summary>Answer</summary>
   **Gratuitous ARP**: An ARP request for your OWN IP address.
   
   **Format**: "Who has [my IP]? Tell [my IP]"
   
   **Uses**:
   1. **Detect IP conflicts**: If someone replies, there's a duplicate IP
   2. **Update ARP caches**: Forces all devices to update their cache with your new MAC
   3. **Announce presence**: Let network know you're online
   
   **Triggered by**:
   - System boot
   - IP configuration change
   - Interface coming up
   - HSRP/VRRP failover
   - VM migration (live migration)
   </details>

---

## ğŸ”— Navigation

| Previous | Up | Next |
|----------|-----|------|
| [â† Routing](04-routing.md) | [Table of Contents](../README.md) | [Transport Layer â†’](../06-Transport-Layer/01-transport-layer-basics.md) |

---

*Â© 2025 Computer Networking Study Notes. For educational purposes.*

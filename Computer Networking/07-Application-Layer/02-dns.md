# Chapter 7.2: Domain Name System (DNS)

[â† Back to Table of Contents](../README.md)

---

## ğŸ“š Chapter Overview

The Domain Name System (DNS) is the Internet's directory service, translating human-readable domain names into IP addresses. Without DNS, users would need to memorize numerical IP addresses for every website they visit.

---

## ğŸ¯ Learning Objectives

- Understand why DNS is needed and how it works
- Learn the hierarchical DNS structure
- Master DNS query resolution process
- Understand DNS record types and caching

---

## 1. Why DNS?

### The Name-to-Address Problem

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WHY DO WE NEED DNS?                              â”‚
â”‚                                                                     â”‚
â”‚    Humans prefer NAMES, computers need NUMBERS                     â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚   HUMAN WANTS:              COMPUTER NEEDS:                 â”‚ â”‚
â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”‚
â”‚    â”‚   â”‚                  â”‚      â”‚                  â”‚            â”‚ â”‚
â”‚    â”‚   â”‚  www.google.com  â”‚ â”€â”€â–º  â”‚  142.250.190.46  â”‚            â”‚ â”‚
â”‚    â”‚   â”‚                  â”‚      â”‚                  â”‚            â”‚ â”‚
â”‚    â”‚   â”‚  (Easy to        â”‚      â”‚  (IP address to  â”‚            â”‚ â”‚
â”‚    â”‚   â”‚   remember!)     â”‚      â”‚   route packets) â”‚            â”‚ â”‚
â”‚    â”‚   â”‚                  â”‚      â”‚                  â”‚            â”‚ â”‚
â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚   DNS bridges this gap!                                     â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    DNS IS LIKE A PHONE BOOK:                                        â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚   "I want to call John Smith"                               â”‚ â”‚
â”‚    â”‚           â†“                                                  â”‚ â”‚
â”‚    â”‚   Look up in phone book                                     â”‚ â”‚
â”‚    â”‚           â†“                                                  â”‚ â”‚
â”‚    â”‚   "John Smith = 555-1234"                                   â”‚ â”‚
â”‚    â”‚           â†“                                                  â”‚ â”‚
â”‚    â”‚   Dial 555-1234                                             â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚   Same with DNS:                                            â”‚ â”‚
â”‚    â”‚   www.google.com â†’ 142.250.190.46                          â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    DNS PROVIDES:                                                    â”‚
â”‚    â€¢ Hostname to IP address translation                            â”‚
â”‚    â€¢ IP to hostname (reverse DNS)                                  â”‚
â”‚    â€¢ Mail server lookup (MX records)                               â”‚
â”‚    â€¢ Load distribution across servers                              â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. DNS Hierarchy

### Hierarchical Namespace

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DNS HIERARCHICAL STRUCTURE                       â”‚
â”‚                                                                     â”‚
â”‚    DNS is organized like an inverted tree                          â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚                          . (ROOT)                            â”‚ â”‚
â”‚    â”‚                             â”‚                                â”‚ â”‚
â”‚    â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚ â”‚
â”‚    â”‚          â”‚                  â”‚                  â”‚             â”‚ â”‚
â”‚    â”‚          â–¼                  â–¼                  â–¼             â”‚ â”‚
â”‚    â”‚       â”Œâ”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”           â”‚ â”‚
â”‚    â”‚       â”‚ com â”‚           â”‚ org â”‚           â”‚ edu â”‚   (TLDs)  â”‚ â”‚
â”‚    â”‚       â””â”€â”€â”¬â”€â”€â”˜           â””â”€â”€â”¬â”€â”€â”˜           â””â”€â”€â”¬â”€â”€â”˜           â”‚ â”‚
â”‚    â”‚          â”‚                 â”‚                 â”‚               â”‚ â”‚
â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”           â”‚           â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚    â”‚    â–¼     â–¼     â–¼           â–¼           â–¼     â–¼     â–¼        â”‚ â”‚
â”‚    â”‚ google amazon apple    wikipedia    mit  stanford berkeley  â”‚ â”‚
â”‚    â”‚    â”‚                                                         â”‚ â”‚
â”‚    â”‚    â”œâ”€â”€ www                                                   â”‚ â”‚
â”‚    â”‚    â”œâ”€â”€ mail                                                  â”‚ â”‚
â”‚    â”‚    â”œâ”€â”€ drive                                                 â”‚ â”‚
â”‚    â”‚    â””â”€â”€ maps                                                  â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    DOMAIN NAME STRUCTURE:                                           â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚       www  .  google  .  com  .                             â”‚ â”‚
â”‚    â”‚       â”€â”€â”€     â”€â”€â”€â”€â”€â”€     â”€â”€â”€   â”‚                            â”‚ â”‚
â”‚    â”‚        â”‚        â”‚         â”‚    â”‚                            â”‚ â”‚
â”‚    â”‚        â”‚        â”‚         â”‚    â””â”€ Root (usually implicit)   â”‚ â”‚
â”‚    â”‚        â”‚        â”‚         â”‚                                  â”‚ â”‚
â”‚    â”‚        â”‚        â”‚         â””â”€â”€â”€â”€â”€ Top-Level Domain (TLD)     â”‚ â”‚
â”‚    â”‚        â”‚        â”‚                                            â”‚ â”‚
â”‚    â”‚        â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Second-Level Domain          â”‚ â”‚
â”‚    â”‚        â”‚                                                     â”‚ â”‚
â”‚    â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Subdomain/Hostname             â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚    Read RIGHT to LEFT for hierarchy                         â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    TYPES OF TLDs:                                                   â”‚
â”‚    â€¢ Generic (gTLD): .com, .org, .net, .info, .biz                 â”‚
â”‚    â€¢ Country Code (ccTLD): .us, .uk, .jp, .in, .au                 â”‚
â”‚    â€¢ Sponsored: .edu, .gov, .mil                                   â”‚
â”‚    â€¢ New gTLDs: .app, .dev, .cloud, .shop                          â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### DNS Server Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DNS SERVER TYPES                                 â”‚
â”‚                                                                     â”‚
â”‚    Different servers handle different parts of the hierarchy       â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚   1. ROOT DNS SERVERS (13 clusters worldwide)               â”‚ â”‚
â”‚    â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚    â”‚      â”‚  â€¢ Know addresses of all TLD servers            â”‚    â”‚ â”‚
â”‚    â”‚      â”‚  â€¢ Named A through M (a.root-servers.net, etc.) â”‚    â”‚ â”‚
â”‚    â”‚      â”‚  â€¢ ~1000+ physical servers (anycast)            â”‚    â”‚ â”‚
â”‚    â”‚      â”‚  â€¢ "I know who handles .com, .org, etc."       â”‚    â”‚ â”‚
â”‚    â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚    â”‚                            â”‚                                 â”‚ â”‚
â”‚    â”‚                            â–¼                                 â”‚ â”‚
â”‚    â”‚   2. TLD (Top-Level Domain) SERVERS                         â”‚ â”‚
â”‚    â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚    â”‚      â”‚  â€¢ Responsible for .com, .org, .edu, etc.       â”‚    â”‚ â”‚
â”‚    â”‚      â”‚  â€¢ Know authoritative servers for domains       â”‚    â”‚ â”‚
â”‚    â”‚      â”‚  â€¢ "I know who handles google.com"             â”‚    â”‚ â”‚
â”‚    â”‚      â”‚  â€¢ Managed by registries (Verisign for .com)   â”‚    â”‚ â”‚
â”‚    â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚    â”‚                            â”‚                                 â”‚ â”‚
â”‚    â”‚                            â–¼                                 â”‚ â”‚
â”‚    â”‚   3. AUTHORITATIVE DNS SERVERS                              â”‚ â”‚
â”‚    â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚    â”‚      â”‚  â€¢ Organization's own DNS servers               â”‚    â”‚ â”‚
â”‚    â”‚      â”‚  â€¢ Have actual hostname-to-IP mappings          â”‚    â”‚ â”‚
â”‚    â”‚      â”‚  â€¢ "www.google.com = 142.250.190.46"           â”‚    â”‚ â”‚
â”‚    â”‚      â”‚  â€¢ The definitive source for that domain       â”‚    â”‚ â”‚
â”‚    â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚   PLUS: LOCAL DNS SERVER (Recursive Resolver)                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  â€¢ Your ISP's DNS server or company's DNS                 â”‚    â”‚
â”‚   â”‚  â€¢ First point of contact for your queries                â”‚    â”‚
â”‚   â”‚  â€¢ Does the hard work of recursive lookup                 â”‚    â”‚
â”‚   â”‚  â€¢ Caches results for faster future queries               â”‚    â”‚
â”‚   â”‚  â€¢ Examples: 8.8.8.8 (Google), 1.1.1.1 (Cloudflare)      â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. DNS Resolution Process

### Iterative vs Recursive Queries

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DNS QUERY TYPES                                  â”‚
â”‚                                                                     â”‚
â”‚    ITERATIVE QUERY:                                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Server says: "I don't know, but ask this server"          â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚     [Resolver]                                              â”‚ â”‚
â”‚    â”‚         â”‚                                                    â”‚ â”‚
â”‚    â”‚         â”œâ”€â”€â”€â”€ Q: www.google.com? â”€â”€â”€â”€â–º [Root]               â”‚ â”‚
â”‚    â”‚         â”‚â—„â”€â”€â”€ A: Ask .com TLD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ â”‚
â”‚    â”‚         â”‚                                                    â”‚ â”‚
â”‚    â”‚         â”œâ”€â”€â”€â”€ Q: www.google.com? â”€â”€â”€â”€â–º [.com TLD]           â”‚ â”‚
â”‚    â”‚         â”‚â—„â”€â”€â”€ A: Ask ns1.google.com â”€â”€â”€â”˜                    â”‚ â”‚
â”‚    â”‚         â”‚                                                    â”‚ â”‚
â”‚    â”‚         â”œâ”€â”€â”€â”€ Q: www.google.com? â”€â”€â”€â”€â–º [Google DNS]         â”‚ â”‚
â”‚    â”‚         â”‚â—„â”€â”€â”€ A: 142.250.190.46 â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ â”‚
â”‚    â”‚         â”‚                                                    â”‚ â”‚
â”‚    â”‚     Resolver does all the work                              â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    RECURSIVE QUERY:                                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Server does the lookup for you                             â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚     [Client]                                                â”‚ â”‚
â”‚    â”‚         â”‚                                                    â”‚ â”‚
â”‚    â”‚         â”œâ”€â”€â”€â”€ Q: www.google.com? â”€â”€â”€â”€â–º [Local DNS]          â”‚ â”‚
â”‚    â”‚         â”‚                                   â”‚                â”‚ â”‚
â”‚    â”‚         â”‚                          (Local DNS does          â”‚ â”‚
â”‚    â”‚         â”‚                           all the work)           â”‚ â”‚
â”‚    â”‚         â”‚                                   â”‚                â”‚ â”‚
â”‚    â”‚         â”‚â—„â”€â”€â”€ A: 142.250.190.46 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚     Client just waits for final answer                      â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    TYPICAL PATTERN:                                                 â”‚
â”‚    â€¢ Client â†’ Local DNS: Recursive query                           â”‚
â”‚    â€¢ Local DNS â†’ Other servers: Iterative queries                  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Complete Resolution Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DNS RESOLUTION WALKTHROUGH                       â”‚
â”‚                                                                     â”‚
â”‚    Resolving: www.example.com                                      â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  [Your Computer]     [Local DNS]     [Root]   [TLD]  [Auth] â”‚ â”‚
â”‚    â”‚        â”‚                  â”‚            â”‚        â”‚       â”‚    â”‚ â”‚
â”‚    â”‚   1    â”‚â”€â”€â”€ Query â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚        â”‚       â”‚    â”‚ â”‚
â”‚    â”‚        â”‚  www.example.com â”‚            â”‚        â”‚       â”‚    â”‚ â”‚
â”‚    â”‚        â”‚  (recursive)     â”‚            â”‚        â”‚       â”‚    â”‚ â”‚
â”‚    â”‚        â”‚                  â”‚            â”‚        â”‚       â”‚    â”‚ â”‚
â”‚    â”‚   2    â”‚                  â”‚â”€â”€â”€ Query â”€â–ºâ”‚        â”‚       â”‚    â”‚ â”‚
â”‚    â”‚        â”‚                  â”‚   .com?    â”‚        â”‚       â”‚    â”‚ â”‚
â”‚    â”‚        â”‚                  â”‚            â”‚        â”‚       â”‚    â”‚ â”‚
â”‚    â”‚   3    â”‚                  â”‚â—„â”€â”€ Referralâ”‚        â”‚       â”‚    â”‚ â”‚
â”‚    â”‚        â”‚                  â”‚  (TLD IPs) â”‚        â”‚       â”‚    â”‚ â”‚
â”‚    â”‚        â”‚                  â”‚            â”‚        â”‚       â”‚    â”‚ â”‚
â”‚    â”‚   4    â”‚                  â”‚â”€â”€â”€ Query â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚       â”‚    â”‚ â”‚
â”‚    â”‚        â”‚                  â”‚  example.com?       â”‚       â”‚    â”‚ â”‚
â”‚    â”‚        â”‚                  â”‚                     â”‚       â”‚    â”‚ â”‚
â”‚    â”‚   5    â”‚                  â”‚â—„â”€â”€ Referral â”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚    â”‚ â”‚
â”‚    â”‚        â”‚                  â”‚  (Auth server IPs)  â”‚       â”‚    â”‚ â”‚
â”‚    â”‚        â”‚                  â”‚                     â”‚       â”‚    â”‚ â”‚
â”‚    â”‚   6    â”‚                  â”‚â”€â”€â”€ Query â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º    â”‚ â”‚
â”‚    â”‚        â”‚                  â”‚  www.example.com?           â”‚    â”‚ â”‚
â”‚    â”‚        â”‚                  â”‚                             â”‚    â”‚ â”‚
â”‚    â”‚   7    â”‚                  â”‚â—„â”€â”€ Answer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    â”‚ â”‚
â”‚    â”‚        â”‚                  â”‚  93.184.216.34              â”‚    â”‚ â”‚
â”‚    â”‚        â”‚                  â”‚                                  â”‚ â”‚
â”‚    â”‚   8    â”‚â—„â”€â”€ Answer â”€â”€â”€â”€â”€â”€â”€â”‚                                  â”‚ â”‚
â”‚    â”‚        â”‚  93.184.216.34   â”‚  (Cached!)                       â”‚ â”‚
â”‚    â”‚        â”‚                  â”‚                                  â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    STEPS:                                                           â”‚
â”‚    1. Client asks local DNS (recursive)                            â”‚
â”‚    2. Local DNS asks root server "Who handles .com?"               â”‚
â”‚    3. Root refers to .com TLD servers                              â”‚
â”‚    4. Local DNS asks TLD "Who handles example.com?"                â”‚
â”‚    5. TLD refers to example.com's authoritative servers           â”‚
â”‚    6. Local DNS asks authoritative "What is www.example.com?"     â”‚
â”‚    7. Authoritative returns IP address                             â”‚
â”‚    8. Local DNS returns answer to client (and caches it)          â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. DNS Records

### Common Record Types

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DNS RESOURCE RECORDS                             â”‚
â”‚                                                                     â”‚
â”‚    Format: (Name, Type, Value, TTL)                                â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  A RECORD (Address):                                        â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚    â”‚  â”‚  Maps hostname to IPv4 address                       â”‚    â”‚ â”‚
â”‚    â”‚  â”‚  www.example.com  A  93.184.216.34                   â”‚    â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  AAAA RECORD (IPv6 Address):                                â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚    â”‚  â”‚  Maps hostname to IPv6 address                       â”‚    â”‚ â”‚
â”‚    â”‚  â”‚  www.example.com  AAAA  2606:2800:220:1:248:1893:... â”‚    â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  CNAME RECORD (Canonical Name - Alias):                     â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚    â”‚  â”‚  Alias pointing to another hostname                  â”‚    â”‚ â”‚
â”‚    â”‚  â”‚  blog.example.com  CNAME  www.example.com            â”‚    â”‚ â”‚
â”‚    â”‚  â”‚  (blog points to www, which has the A record)        â”‚    â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  MX RECORD (Mail Exchange):                                 â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚    â”‚  â”‚  Specifies mail servers for domain                   â”‚    â”‚ â”‚
â”‚    â”‚  â”‚  example.com  MX  10 mail1.example.com               â”‚    â”‚ â”‚
â”‚    â”‚  â”‚  example.com  MX  20 mail2.example.com               â”‚    â”‚ â”‚
â”‚    â”‚  â”‚  (Lower priority number = preferred)                 â”‚    â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  NS RECORD (Name Server):                                   â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚    â”‚  â”‚  Specifies authoritative DNS servers                 â”‚    â”‚ â”‚
â”‚    â”‚  â”‚  example.com  NS  ns1.example.com                    â”‚    â”‚ â”‚
â”‚    â”‚  â”‚  example.com  NS  ns2.example.com                    â”‚    â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  TXT RECORD (Text):                                         â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚    â”‚  â”‚  Arbitrary text (SPF, DKIM, verification)            â”‚    â”‚ â”‚
â”‚    â”‚  â”‚  example.com  TXT  "v=spf1 include:_spf.google.com" â”‚    â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  PTR RECORD (Pointer - Reverse DNS):                        â”‚ â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚    â”‚  â”‚  Maps IP address back to hostname                    â”‚    â”‚ â”‚
â”‚    â”‚  â”‚  34.216.184.93.in-addr.arpa  PTR  www.example.com    â”‚    â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. DNS Caching

### Caching for Performance

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DNS CACHING                                      â”‚
â”‚                                                                     â”‚
â”‚    Caching reduces lookup time and network traffic                 â”‚
â”‚                                                                     â”‚
â”‚    CACHING LOCATIONS:                                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  1. BROWSER CACHE                                           â”‚ â”‚
â”‚    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚    â”‚     â”‚ Chrome: chrome://net-internals/#dns              â”‚    â”‚ â”‚
â”‚    â”‚     â”‚ Typically caches for minutes                      â”‚    â”‚ â”‚
â”‚    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚    â”‚                     â†“ Miss                                   â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  2. OPERATING SYSTEM CACHE                                  â”‚ â”‚
â”‚    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚    â”‚     â”‚ Windows: ipconfig /displaydns                     â”‚    â”‚ â”‚
â”‚    â”‚     â”‚ Linux: systemd-resolved                           â”‚    â”‚ â”‚
â”‚    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚    â”‚                     â†“ Miss                                   â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  3. LOCAL DNS RESOLVER CACHE                                â”‚ â”‚
â”‚    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚    â”‚     â”‚ ISP's DNS server or 8.8.8.8, 1.1.1.1             â”‚    â”‚ â”‚
â”‚    â”‚     â”‚ Caches for hours/days based on TTL               â”‚    â”‚ â”‚
â”‚    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚    â”‚                     â†“ Miss                                   â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  4. FULL RESOLUTION (Root â†’ TLD â†’ Authoritative)            â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    TTL (Time To Live):                                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  â€¢ Set by authoritative server                              â”‚ â”‚
â”‚    â”‚  â€¢ Specifies how long record can be cached                  â”‚ â”‚
â”‚    â”‚  â€¢ After TTL expires, must re-query                         â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Trade-offs:                                                 â”‚ â”‚
â”‚    â”‚  â€¢ Short TTL: Faster updates, more queries                  â”‚ â”‚
â”‚    â”‚  â€¢ Long TTL: Less queries, slower propagation               â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  Typical values:                                             â”‚ â”‚
â”‚    â”‚  â€¢ Dynamic content: 60-300 seconds                          â”‚ â”‚
â”‚    â”‚  â€¢ Static content: 3600+ seconds (1+ hours)                 â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. DNS Message Format

### Query and Response Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DNS MESSAGE FORMAT                               â”‚
â”‚                                                                     â”‚
â”‚    Same format for queries and responses                           â”‚
â”‚                                                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â”‚  0                   16                  31                 â”‚ â”‚
â”‚    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚ â”‚
â”‚    â”‚  â”‚  Transaction ID   â”‚      Flags        â”‚   HEADER         â”‚ â”‚
â”‚    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   (12 bytes)     â”‚ â”‚
â”‚    â”‚  â”‚  Question Count   â”‚   Answer Count    â”‚                  â”‚ â”‚
â”‚    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚ â”‚
â”‚    â”‚  â”‚  Authority Count  â”‚  Additional Count â”‚                  â”‚ â”‚
â”‚    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚ â”‚
â”‚    â”‚  â”‚                                       â”‚                  â”‚ â”‚
â”‚    â”‚  â”‚         QUESTION SECTION              â”‚   Variable       â”‚ â”‚
â”‚    â”‚  â”‚    (What are we asking?)              â”‚                  â”‚ â”‚
â”‚    â”‚  â”‚                                       â”‚                  â”‚ â”‚
â”‚    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚ â”‚
â”‚    â”‚  â”‚                                       â”‚                  â”‚ â”‚
â”‚    â”‚  â”‚         ANSWER SECTION                â”‚   Variable       â”‚ â”‚
â”‚    â”‚  â”‚    (Requested RRs)                    â”‚   (in response)  â”‚ â”‚
â”‚    â”‚  â”‚                                       â”‚                  â”‚ â”‚
â”‚    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚ â”‚
â”‚    â”‚  â”‚                                       â”‚                  â”‚ â”‚
â”‚    â”‚  â”‚       AUTHORITY SECTION               â”‚   Variable       â”‚ â”‚
â”‚    â”‚  â”‚    (NS records for authority)         â”‚                  â”‚ â”‚
â”‚    â”‚  â”‚                                       â”‚                  â”‚ â”‚
â”‚    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚ â”‚
â”‚    â”‚  â”‚                                       â”‚                  â”‚ â”‚
â”‚    â”‚  â”‚       ADDITIONAL SECTION              â”‚   Variable       â”‚ â”‚
â”‚    â”‚  â”‚    (Additional helpful RRs)           â”‚                  â”‚ â”‚
â”‚    â”‚  â”‚                                       â”‚                  â”‚ â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚ â”‚
â”‚    â”‚                                                              â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚    FLAGS FIELD:                                                     â”‚
â”‚    â€¢ QR: Query (0) or Response (1)                                 â”‚
â”‚    â€¢ Opcode: Query type (standard, inverse, status)                â”‚
â”‚    â€¢ AA: Authoritative Answer                                      â”‚
â”‚    â€¢ TC: Truncated (use TCP)                                       â”‚
â”‚    â€¢ RD: Recursion Desired                                         â”‚
â”‚    â€¢ RA: Recursion Available                                       â”‚
â”‚    â€¢ RCODE: Response code (0=OK, 3=Name Error)                     â”‚
â”‚                                                                     â”‚
â”‚    TRANSPORT:                                                       â”‚
â”‚    â€¢ Usually UDP port 53 (fast, small queries)                     â”‚
â”‚    â€¢ TCP port 53 for large responses (>512 bytes)                  â”‚
â”‚    â€¢ Zone transfers use TCP                                        â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Summary Table

| Record Type | Purpose | Example |
|-------------|---------|---------|
| **A** | IPv4 address | www.example.com â†’ 93.184.216.34 |
| **AAAA** | IPv6 address | www.example.com â†’ 2606:2800:... |
| **CNAME** | Alias | blog â†’ www.example.com |
| **MX** | Mail server | Priority 10 â†’ mail.example.com |
| **NS** | Name server | ns1.example.com |
| **TXT** | Text info | SPF, DKIM records |
| **PTR** | Reverse DNS | IP â†’ hostname |

---

## â“ Quick Revision Questions

1. **Q:** Why is DNS needed?
   <details>
   <summary>Answer</summary>
   DNS (Domain Name System) is needed because:
   
   - Humans prefer memorable names (www.google.com)
   - Computers need IP addresses to route packets (142.250.190.46)
   - DNS translates between names and addresses
   
   Additional services:
   - Reverse DNS (IP â†’ name)
   - Mail server lookup (MX records)
   - Load distribution
   - Service discovery
   
   Without DNS, users would need to memorize IP addresses!
   </details>

2. **Q:** Describe the DNS server hierarchy.
   <details>
   <summary>Answer</summary>
   **4-level hierarchy**:
   
   1. **Root Servers**: 13 clusters (A-M), know TLD servers
   
   2. **TLD Servers**: Handle .com, .org, .edu, etc. Know authoritative servers for domains
   
   3. **Authoritative Servers**: Organization's DNS, have actual records (A, MX, etc.)
   
   4. **Local DNS (Resolver)**: ISP's server, does recursive lookups, caches results
   
   Query path: Local â†’ Root â†’ TLD â†’ Authoritative
   </details>

3. **Q:** What is the difference between iterative and recursive DNS queries?
   <details>
   <summary>Answer</summary>
   **Recursive Query**:
   - Server does all the work
   - Returns final answer or error
   - Client just waits
   - Used: Client â†’ Local DNS
   
   **Iterative Query**:
   - Server returns best answer it knows
   - May be a referral to another server
   - Querier follows referrals
   - Used: Local DNS â†’ Root/TLD/Auth
   
   Typical: Client makes recursive query to local DNS, which makes iterative queries to other servers.
   </details>

4. **Q:** What are A, CNAME, and MX records?
   <details>
   <summary>Answer</summary>
   **A Record**:
   - Maps hostname to IPv4 address
   - www.example.com â†’ 93.184.216.34
   
   **CNAME Record**:
   - Canonical Name (alias)
   - Points one name to another
   - blog.example.com â†’ www.example.com
   - Must resolve to A record eventually
   
   **MX Record**:
   - Mail Exchange
   - Specifies email servers for domain
   - Has priority value (lower = preferred)
   - example.com MX 10 mail.example.com
   </details>

5. **Q:** How does DNS caching work and why is it important?
   <details>
   <summary>Answer</summary>
   **Caching levels**:
   1. Browser cache
   2. OS cache
   3. Local DNS resolver cache
   
   **TTL (Time To Live)**:
   - Each record has TTL set by authoritative server
   - Record cached until TTL expires
   - Then must re-query
   
   **Importance**:
   - Reduces latency (cached = instant)
   - Reduces DNS traffic
   - Reduces load on DNS servers
   - Improves user experience
   </details>

6. **Q:** Why does DNS primarily use UDP instead of TCP?
   <details>
   <summary>Answer</summary>
   **DNS uses UDP because**:
   - Queries are small (fit in one packet)
   - No connection setup overhead
   - Faster response time
   - Lower server load
   
   **TCP is used when**:
   - Response exceeds 512 bytes (TC flag set)
   - Zone transfers between DNS servers
   - Reliability needed for large responses
   
   UDP port 53 for queries, TCP port 53 for large/zone transfers.
   </details>

---

## ğŸ”— Navigation

| Previous | Up | Next |
|----------|-----|------|
| [â† Application Layer Basics](01-application-layer-basics.md) | [Table of Contents](../README.md) | [HTTP Protocol â†’](03-http-protocol.md) |

---

*Â© 2025 Computer Networking Study Notes. For educational purposes.*
